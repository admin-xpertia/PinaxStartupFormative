(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5172,e=>{"use strict";var t=e.i(20991),r=e.i(35804),s=e.i(14030);e.i(51341);var a=e.i(90782),n=e.i(76846),i=e.i(18596);let l=(0,i.default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var o=e.i(99224),c=e.i(5998),d=e.i(34979),u=e.i(92260),m=e.i(30315),x=e.i(78792),h=e.i(84391);let p=(0,i.default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),f=(0,i.default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),j=(0,i.default)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var v=e.i(41313);let g=(0,i.default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var N=e.i(24955),y=e.i(36460);function b({exerciseId:e,exerciseName:r,exerciseDescription:s,proofPointName:a,totalSteps:n=1,currentStep:i=1,estimatedMinutes:l,onSave:b,onComplete:C,onPrevious:w,onNext:k,onExit:S,children:R,showAIAssistant:A=!1,aiContext:E}){let[M,T]=(0,o.useState)(!1),[I,_]=(0,o.useState)(!1),[P,z]=(0,o.useState)(!1),[O,D]=(0,o.useState)([]),[B,F]=(0,o.useState)(""),q=i/n*100,$=i===n,L=async()=>{if(b){T(!0);try{await b({})}finally{T(!1)}}},H=async()=>{if(C){_(!0);try{await C({})}finally{_(!1)}}},U=async()=>{B.trim()&&(F(""),D(e=>[...e,{role:"user",content:B}]),setTimeout(()=>{D(e=>[...e,{role:"assistant",content:"Estoy aquí para ayudarte. ¿Qué necesitas?"}])},1e3))};return(0,t.jsxs)("div",{className:"flex h-screen flex-col bg-background",children:[(0,t.jsxs)("header",{className:"sticky top-0 z-10 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:[(0,t.jsxs)("div",{className:"container flex h-16 items-center justify-between px-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(c.Button,{variant:"ghost",size:"icon",onClick:S,children:(0,t.jsx)(g,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h1",{className:"text-lg font-semibold",children:r}),n>1&&(0,t.jsxs)(m.Badge,{variant:"secondary",children:["Paso ",i," de ",n]})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:a})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[l&&(0,t.jsxs)(m.Badge,{variant:"outline",children:["⏱ ",l," min"]}),A&&(0,t.jsxs)(c.Button,{variant:"outline",size:"sm",onClick:()=>z(!P),className:(0,y.cn)(P&&"bg-primary/10"),children:[(0,t.jsx)(N.Sparkles,{className:"h-4 w-4 mr-2"}),"Asistente IA"]}),(0,t.jsx)(c.Button,{variant:"outline",size:"sm",onClick:L,disabled:M||!b,children:M?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j,{className:"h-4 w-4 mr-2 animate-spin"}),"Guardando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f,{className:"h-4 w-4 mr-2"}),"Guardar"]})})]})]}),(0,t.jsx)(u.Progress,{value:q,className:"h-1 rounded-none"})]}),(0,t.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,t.jsx)("div",{className:(0,y.cn)("flex-1 overflow-y-auto",P&&"lg:mr-96"),children:(0,t.jsxs)("div",{className:"container max-w-4xl py-8 px-4",children:[s&&(0,t.jsx)(d.Card,{className:"mb-6 p-4 bg-muted/50",children:(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:s})}),R]})}),A&&P&&(0,t.jsxs)("aside",{className:"fixed right-0 top-16 bottom-16 w-96 border-l bg-background overflow-hidden flex flex-col",children:[(0,t.jsxs)("div",{className:"p-4 border-b",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,t.jsx)(N.Sparkles,{className:"h-4 w-4 text-primary"}),"Asistente IA"]}),(0,t.jsx)(c.Button,{variant:"ghost",size:"icon",onClick:()=>z(!1),children:(0,t.jsx)(g,{className:"h-4 w-4"})})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Pregúntame cualquier cosa sobre este ejercicio"})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[0===O.length&&(0,t.jsx)("div",{className:"text-center text-sm text-muted-foreground py-8",children:"Haz una pregunta para comenzar"}),O.map((e,r)=>(0,t.jsx)("div",{className:(0,y.cn)("flex gap-2","user"===e.role?"justify-end":"justify-start"),children:(0,t.jsx)("div",{className:(0,y.cn)("rounded-lg px-4 py-2 max-w-[80%]","user"===e.role?"bg-primary text-primary-foreground":"bg-muted"),children:(0,t.jsx)("p",{className:"text-sm",children:e.content})})},r))]}),(0,t.jsx)("div",{className:"p-4 border-t",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",placeholder:"Escribe tu pregunta...",value:B,onChange:e=>F(e.target.value),onKeyPress:e=>"Enter"===e.key&&U(),className:"flex-1 px-3 py-2 text-sm border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"}),(0,t.jsx)(c.Button,{size:"sm",onClick:U,children:(0,t.jsx)(v.MessageSquare,{className:"h-4 w-4"})})]})})]})]}),(0,t.jsx)("footer",{className:"sticky bottom-0 z-10 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,t.jsxs)("div",{className:"container flex h-16 items-center justify-between px-4",children:[(0,t.jsxs)(c.Button,{variant:"outline",onClick:w,disabled:!w,children:[(0,t.jsx)(x.ChevronLeft,{className:"h-4 w-4 mr-2"}),"Anterior"]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[Math.round(q),"% completado"]}),$?(0,t.jsx)(c.Button,{onClick:H,disabled:I||!C,children:I?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j,{className:"h-4 w-4 mr-2 animate-spin"}),"Completando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p,{className:"h-4 w-4 mr-2"}),"Completar"]})}):(0,t.jsxs)(c.Button,{onClick:k,disabled:!k,children:["Siguiente",(0,t.jsx)(h.ChevronRight,{className:"h-4 w-4 ml-2"})]})]})})]})}e.i(72386);var C=e.i(44647),w=e.i(49337);e.i(97392);var k=e.i(5609),S=e.i(99356);let R=new Map,A=e=>{if(R.has(e))return;let t=setTimeout(()=>{R.delete(e),function(e){M=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?A(r):e.toasts.forEach(e=>{A(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(M,e),E.forEach(e=>{e(M)})}({type:"REMOVE_TOAST",toastId:e})},1e6);R.set(e,t)},E=[],M={toasts:[]};var T=e.i(81053);function I(e,r=[]){let s=[],a=()=>{let t=s.map(e=>o.createContext(e));return function(r){let s=r?.[e]||t;return o.useMemo(()=>({[`__scope${e}`]:{...r,[e]:s}}),[r,s])}};return a.scopeName=e,[function(r,a){let n=o.createContext(a),i=s.length;s=[...s,a];let l=r=>{let{scope:s,children:a,...l}=r,c=s?.[e]?.[i]||n,d=o.useMemo(()=>l,Object.values(l));return(0,t.jsx)(c.Provider,{value:d,children:a})};return l.displayName=r+"Provider",[l,function(t,s){let l=s?.[e]?.[i]||n,c=o.useContext(l);if(c)return c;if(void 0!==a)return a;throw Error(`\`${t}\` must be used within \`${r}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=r.reduce((t,{useScope:r,scopeName:s})=>{let a=r(e)[`__scope${s}`];return{...t,...a}},{});return o.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}(a,...r)]}function _(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e?.(s),!1===r||!s.defaultPrevented)return t?.(s)}}"undefined"!=typeof window&&window.document&&window.document.createElement;var P=e.i(94573);o[" useEffectEvent ".trim().toString()],o[" useInsertionEffect ".trim().toString()];var z=o[" useInsertionEffect ".trim().toString()]||P.useLayoutEffect;function O({prop:e,defaultProp:t,onChange:r=()=>{},caller:s}){let[a,n,i]=function({defaultProp:e,onChange:t}){let[r,s]=o.useState(e),a=o.useRef(r),n=o.useRef(t);return z(()=>{n.current=t},[t]),o.useEffect(()=>{a.current!==r&&(n.current?.(r),a.current=r)},[r,a]),[r,s,n]}({defaultProp:t,onChange:r}),l=void 0!==e,c=l?e:a;{let t=o.useRef(void 0!==e);o.useEffect(()=>{let e=t.current;if(e!==l){let t=l?"controlled":"uncontrolled";console.warn(`${s} is changing from ${e?"controlled":"uncontrolled"} to ${t}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=l},[l,s])}return[c,o.useCallback(t=>{if(l){let r="function"==typeof t?t(e):t;r!==e&&i.current?.(r)}else n(t)},[l,e,n,i])]}Symbol("RADIX:SYNC_STATE");var D=e=>{var t;let r,s,{present:a,children:n}=e,i=function(e){var t,r;let[s,a]=o.useState(),n=o.useRef(null),i=o.useRef(e),l=o.useRef("none"),[c,d]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},o.useReducer((e,t)=>r[e][t]??e,t));return o.useEffect(()=>{let e=B(n.current);l.current="mounted"===c?e:"none"},[c]),(0,P.useLayoutEffect)(()=>{let t=n.current,r=i.current;if(r!==e){let s=l.current,a=B(t);e?d("MOUNT"):"none"===a||t?.display==="none"?d("UNMOUNT"):r&&s!==a?d("ANIMATION_OUT"):d("UNMOUNT"),i.current=e}},[e,d]),(0,P.useLayoutEffect)(()=>{if(s){let e,t=s.ownerDocument.defaultView??window,r=r=>{let a=B(n.current).includes(CSS.escape(r.animationName));if(r.target===s&&a&&(d("ANIMATION_END"),!i.current)){let r=s.style.animationFillMode;s.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===s.style.animationFillMode&&(s.style.animationFillMode=r)})}},a=e=>{e.target===s&&(l.current=B(n.current))};return s.addEventListener("animationstart",a),s.addEventListener("animationcancel",r),s.addEventListener("animationend",r),()=>{t.clearTimeout(e),s.removeEventListener("animationstart",a),s.removeEventListener("animationcancel",r),s.removeEventListener("animationend",r)}}d("ANIMATION_END")},[s,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:o.useCallback(e=>{n.current=e?getComputedStyle(e):null,a(e)},[])}}(a),l="function"==typeof n?n({present:i.isPresent}):o.Children.only(n),c=(0,T.useComposedRefs)(i.ref,(t=l,(s=(r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning)?t.ref:(s=(r=Object.getOwnPropertyDescriptor(t,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning)?t.props.ref:t.props.ref||t.ref));return"function"==typeof n||i.isPresent?o.cloneElement(l,{ref:c}):null};function B(e){return e?.animationName||"none"}function F(e){var r;let s,a=(r=e,(s=o.forwardRef((e,t)=>{let{children:r,...s}=e;if(o.isValidElement(r)){var a;let e,n,i=(a=r,(n=(e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.ref:(n=(e=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.props.ref:a.props.ref||a.ref),l=function(e,t){let r={...t};for(let s in t){let a=e[s],n=t[s];/^on[A-Z]/.test(s)?a&&n?r[s]=(...e)=>{let t=n(...e);return a(...e),t}:a&&(r[s]=a):"style"===s?r[s]={...a,...n}:"className"===s&&(r[s]=[a,n].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props);return r.type!==o.Fragment&&(l.ref=t?(0,T.composeRefs)(t,i):i),o.cloneElement(r,l)}return o.Children.count(r)>1?o.Children.only(null):null})).displayName=`${r}.SlotClone`,s),n=o.forwardRef((e,r)=>{let{children:s,...n}=e,i=o.Children.toArray(s),l=i.find($);if(l){let e=l.props.children,s=i.map(t=>t!==l?t:o.Children.count(e)>1?o.Children.only(null):o.isValidElement(e)?e.props.children:null);return(0,t.jsx)(a,{...n,ref:r,children:o.isValidElement(e)?o.cloneElement(e,void 0,s):null})}return(0,t.jsx)(a,{...n,ref:r,children:s})});return n.displayName=`${e}.Slot`,n}D.displayName="Presence",e.i(10429);var q=Symbol("radix.slottable");function $(e){return o.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===q}var L=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let s=F(`Primitive.${r}`),a=o.forwardRef((e,a)=>{let{asChild:n,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(n?s:r,{...i,ref:a})});return a.displayName=`Primitive.${r}`,{...e,[r]:a}},{}),H="Checkbox",[U,V]=I(H),[K,G]=U(H);function W(e){let{__scopeCheckbox:r,checked:s,children:a,defaultChecked:n,disabled:i,form:l,name:c,onCheckedChange:d,required:u,value:m="on",internal_do_not_use_render:x}=e,[h,p]=O({prop:s,defaultProp:n??!1,onChange:d,caller:H}),[f,j]=o.useState(null),[v,g]=o.useState(null),N=o.useRef(!1),y=!f||!!l||!!f.closest("form"),b={checked:h,disabled:i,setChecked:p,control:f,setControl:j,name:c,form:l,value:m,hasConsumerStoppedPropagationRef:N,required:u,defaultChecked:!er(n)&&n,isFormControl:y,bubbleInput:v,setBubbleInput:g};return(0,t.jsx)(K,{scope:r,...b,children:"function"==typeof x?x(b):a})}var Q="CheckboxTrigger",X=o.forwardRef(({__scopeCheckbox:e,onKeyDown:r,onClick:s,...a},n)=>{let{control:i,value:l,disabled:c,checked:d,required:u,setControl:m,setChecked:x,hasConsumerStoppedPropagationRef:h,isFormControl:p,bubbleInput:f}=G(Q,e),j=(0,T.useComposedRefs)(n,m),v=o.useRef(d);return o.useEffect(()=>{let e=i?.form;if(e){let t=()=>x(v.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[i,x]),(0,t.jsx)(L.button,{type:"button",role:"checkbox","aria-checked":er(d)?"mixed":d,"aria-required":u,"data-state":es(d),"data-disabled":c?"":void 0,disabled:c,value:l,...a,ref:j,onKeyDown:_(r,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:_(s,e=>{x(e=>!!er(e)||!e),f&&p&&(h.current=e.isPropagationStopped(),h.current||e.stopPropagation())})})});X.displayName=Q;var J=o.forwardRef((e,r)=>{let{__scopeCheckbox:s,name:a,checked:n,defaultChecked:i,required:l,disabled:o,value:c,onCheckedChange:d,form:u,...m}=e;return(0,t.jsx)(W,{__scopeCheckbox:s,checked:n,defaultChecked:i,disabled:o,required:l,onCheckedChange:d,name:a,form:u,value:c,internal_do_not_use_render:({isFormControl:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(X,{...m,ref:r,__scopeCheckbox:s}),e&&(0,t.jsx)(et,{__scopeCheckbox:s})]})})});J.displayName=H;var Z="CheckboxIndicator",Y=o.forwardRef((e,r)=>{let{__scopeCheckbox:s,forceMount:a,...n}=e,i=G(Z,s);return(0,t.jsx)(D,{present:a||er(i.checked)||!0===i.checked,children:(0,t.jsx)(L.span,{"data-state":es(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:r,style:{pointerEvents:"none",...e.style}})})});Y.displayName=Z;var ee="CheckboxBubbleInput",et=o.forwardRef(({__scopeCheckbox:e,...r},s)=>{let a,{control:n,hasConsumerStoppedPropagationRef:i,checked:l,defaultChecked:c,required:d,disabled:u,name:m,value:x,form:h,bubbleInput:p,setBubbleInput:f}=G(ee,e),j=(0,T.useComposedRefs)(s,f),v=(a=o.useRef({value:l,previous:l}),o.useMemo(()=>(a.current.value!==l&&(a.current.previous=a.current.value,a.current.value=l),a.current.previous),[l])),g=function(e){let[t,r]=o.useState(void 0);return(0,P.useLayoutEffect)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let s,a;if(!Array.isArray(t)||!t.length)return;let n=t[0];if("borderBoxSize"in n){let e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,a=t.blockSize}else s=e.offsetWidth,a=e.offsetHeight;r({width:s,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}(n);o.useEffect(()=>{if(!p)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!i.current;if(v!==l&&e){let r=new Event("click",{bubbles:t});p.indeterminate=er(l),e.call(p,!er(l)&&l),p.dispatchEvent(r)}},[p,v,l,i]);let N=o.useRef(!er(l)&&l);return(0,t.jsx)(L.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??N.current,required:d,disabled:u,name:m,value:x,form:h,...r,tabIndex:-1,ref:j,style:{...r.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function er(e){return"indeterminate"===e}function es(e){return er(e)?"indeterminate":e?"checked":"unchecked"}function ea({className:e,...r}){return(0,t.jsx)(J,{"data-slot":"checkbox",className:(0,y.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:(0,t.jsx)(Y,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,t.jsx)(p,{className:"size-3.5"})})})}function en(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e?.(s),!1===r||!s.defaultPrevented)return t?.(s)}}et.displayName=ee;var ei=e.i(51589);function el(e,r=[]){let s=[],a=()=>{let t=s.map(e=>o.createContext(e));return function(r){let s=r?.[e]||t;return o.useMemo(()=>({[`__scope${e}`]:{...r,[e]:s}}),[r,s])}};return a.scopeName=e,[function(r,a){let n=o.createContext(a),i=s.length;s=[...s,a];let l=r=>{let{scope:s,children:a,...l}=r,c=s?.[e]?.[i]||n,d=o.useMemo(()=>l,Object.values(l));return(0,t.jsx)(c.Provider,{value:d,children:a})};return l.displayName=r+"Provider",[l,function(t,s){let l=s?.[e]?.[i]||n,c=o.useContext(l);if(c)return c;if(void 0!==a)return a;throw Error(`\`${t}\` must be used within \`${r}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=r.reduce((t,{useScope:r,scopeName:s})=>{let a=r(e)[`__scope${s}`];return{...t,...a}},{});return o.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}(a,...r)]}var eo=e.i(96192),ec=e.i(75386),ed=globalThis?.document?o.useLayoutEffect:()=>{},eu=o["useId".toString()]||(()=>void 0),em=0;function ex(e){let t=o.useRef(e);return o.useEffect(()=>{t.current=e}),o.useMemo(()=>(...e)=>t.current?.(...e),[])}function eh({prop:e,defaultProp:t,onChange:r=()=>{}}){let[s,a]=function({defaultProp:e,onChange:t}){let r=o.useState(e),[s]=r,a=o.useRef(s),n=ex(t);return o.useEffect(()=>{a.current!==s&&(n(s),a.current=s)},[s,a,n]),r}({defaultProp:t,onChange:r}),n=void 0!==e,i=n?e:s,l=ex(r);return[i,o.useCallback(t=>{if(n){let r="function"==typeof t?t(e):t;r!==e&&l(r)}else a(t)},[n,e,a,l])]}var ep=o.createContext(void 0);function ef(e){let t=o.useContext(ep);return e||t||"ltr"}var ej="rovingFocusGroup.onEntryFocus",ev={bubbles:!1,cancelable:!0},eg="RovingFocusGroup",[eN,ey,eb]=function(e){let r=e+"CollectionProvider",[s,a]=el(r),[n,i]=s(r,{collectionRef:{current:null},itemMap:new Map}),l=e=>{let{scope:r,children:s}=e,a=o.default.useRef(null),i=o.default.useRef(new Map).current;return(0,t.jsx)(n,{scope:r,itemMap:i,collectionRef:a,children:s})};l.displayName=r;let c=e+"CollectionSlot",d=o.default.forwardRef((e,r)=>{let{scope:s,children:a}=e,n=i(c,s),l=(0,ei.useComposedRefs)(r,n.collectionRef);return(0,t.jsx)(ec.Slot,{ref:l,children:a})});d.displayName=c;let u=e+"CollectionItemSlot",m="data-radix-collection-item",x=o.default.forwardRef((e,r)=>{let{scope:s,children:a,...n}=e,l=o.default.useRef(null),c=(0,ei.useComposedRefs)(r,l),d=i(u,s);return o.default.useEffect(()=>(d.itemMap.set(l,{ref:l,...n}),()=>void d.itemMap.delete(l))),(0,t.jsx)(ec.Slot,{...{[m]:""},ref:c,children:a})});return x.displayName=u,[{Provider:l,Slot:d,ItemSlot:x},function(t){let r=i(e+"CollectionConsumer",t);return o.default.useCallback(()=>{let e=r.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${m}]`));return Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[r.collectionRef,r.itemMap])},a]}(eg),[eC,ew]=el(eg,[eb]),[ek,eS]=eC(eg),eR=o.forwardRef((e,r)=>(0,t.jsx)(eN.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,t.jsx)(eN.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,t.jsx)(eA,{...e,ref:r})})}));eR.displayName=eg;var eA=o.forwardRef((e,r)=>{let{__scopeRovingFocusGroup:s,orientation:a,loop:n=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:u,preventScrollOnEntryFocus:m=!1,...x}=e,h=o.useRef(null),p=(0,ei.useComposedRefs)(r,h),f=ef(i),[j=null,v]=eh({prop:l,defaultProp:c,onChange:d}),[g,N]=o.useState(!1),y=ex(u),b=ey(s),C=o.useRef(!1),[w,k]=o.useState(0);return o.useEffect(()=>{let e=h.current;if(e)return e.addEventListener(ej,y),()=>e.removeEventListener(ej,y)},[y]),(0,t.jsx)(ek,{scope:s,orientation:a,dir:f,loop:n,currentTabStopId:j,onItemFocus:o.useCallback(e=>v(e),[v]),onItemShiftTab:o.useCallback(()=>N(!0),[]),onFocusableItemAdd:o.useCallback(()=>k(e=>e+1),[]),onFocusableItemRemove:o.useCallback(()=>k(e=>e-1),[]),children:(0,t.jsx)(eo.Primitive.div,{tabIndex:g||0===w?-1:0,"data-orientation":a,...x,ref:p,style:{outline:"none",...e.style},onMouseDown:en(e.onMouseDown,()=>{C.current=!0}),onFocus:en(e.onFocus,e=>{let t=!C.current;if(e.target===e.currentTarget&&t&&!g){let t=new CustomEvent(ej,ev);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=b().filter(e=>e.focusable);eI([e.find(e=>e.active),e.find(e=>e.id===j),...e].filter(Boolean).map(e=>e.ref.current),m)}}C.current=!1}),onBlur:en(e.onBlur,()=>N(!1))})})}),eE="RovingFocusGroupItem",eM=o.forwardRef((e,r)=>{let{__scopeRovingFocusGroup:s,focusable:a=!0,active:n=!1,tabStopId:i,...l}=e,c=function(e){let[t,r]=o.useState(eu());return ed(()=>{r(e=>e??String(em++))},[void 0]),t?`radix-${t}`:""}(),d=i||c,u=eS(eE,s),m=u.currentTabStopId===d,x=ey(s),{onFocusableItemAdd:h,onFocusableItemRemove:p}=u;return o.useEffect(()=>{if(a)return h(),()=>p()},[a,h,p]),(0,t.jsx)(eN.ItemSlot,{scope:s,id:d,focusable:a,active:n,children:(0,t.jsx)(eo.Primitive.span,{tabIndex:m?0:-1,"data-orientation":u.orientation,...l,ref:r,onMouseDown:en(e.onMouseDown,e=>{a?u.onItemFocus(d):e.preventDefault()}),onFocus:en(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:en(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void u.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,r){var s;let a=(s=e.key,"rtl"!==r?s:"ArrowLeft"===s?"ArrowRight":"ArrowRight"===s?"ArrowLeft":s);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(a))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(a)))return eT[a]}(e,u.orientation,u.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let a=x().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)a.reverse();else if("prev"===t||"next"===t){var r,s;"prev"===t&&a.reverse();let n=a.indexOf(e.currentTarget);a=u.loop?(r=a,s=n+1,r.map((e,t)=>r[(s+t)%r.length])):a.slice(n+1)}setTimeout(()=>eI(a))}})})})});eM.displayName=eE;var eT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function eI(e,t=!1){let r=document.activeElement;for(let s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}var e_=e=>{var t;let r,s,{present:a,children:n}=e,i=function(e){var t,r;let[s,a]=o.useState(),n=o.useRef({}),i=o.useRef(e),l=o.useRef("none"),[c,d]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},o.useReducer((e,t)=>r[e][t]??e,t));return o.useEffect(()=>{let e=eP(n.current);l.current="mounted"===c?e:"none"},[c]),ed(()=>{let t=n.current,r=i.current;if(r!==e){let s=l.current,a=eP(t);e?d("MOUNT"):"none"===a||t?.display==="none"?d("UNMOUNT"):r&&s!==a?d("ANIMATION_OUT"):d("UNMOUNT"),i.current=e}},[e,d]),ed(()=>{if(s){let e,t=s.ownerDocument.defaultView??window,r=r=>{let a=eP(n.current).includes(r.animationName);if(r.target===s&&a&&(d("ANIMATION_END"),!i.current)){let r=s.style.animationFillMode;s.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===s.style.animationFillMode&&(s.style.animationFillMode=r)})}},a=e=>{e.target===s&&(l.current=eP(n.current))};return s.addEventListener("animationstart",a),s.addEventListener("animationcancel",r),s.addEventListener("animationend",r),()=>{t.clearTimeout(e),s.removeEventListener("animationstart",a),s.removeEventListener("animationcancel",r),s.removeEventListener("animationend",r)}}d("ANIMATION_END")},[s,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:o.useCallback(e=>{e&&(n.current=getComputedStyle(e)),a(e)},[])}}(a),l="function"==typeof n?n({present:i.isPresent}):o.Children.only(n),c=(0,ei.useComposedRefs)(i.ref,(t=l,(s=(r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning)?t.ref:(s=(r=Object.getOwnPropertyDescriptor(t,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning)?t.props.ref:t.props.ref||t.ref));return"function"==typeof n||i.isPresent?o.cloneElement(l,{ref:c}):null};function eP(e){return e?.animationName||"none"}e_.displayName="Presence";var ez="Radio",[eO,eD]=el(ez),[eB,eF]=eO(ez),eq=o.forwardRef((e,r)=>{let{__scopeRadio:s,name:a,checked:n=!1,required:i,disabled:l,value:c="on",onCheck:d,form:u,...m}=e,[x,h]=o.useState(null),p=(0,ei.useComposedRefs)(r,e=>h(e)),f=o.useRef(!1),j=!x||u||!!x.closest("form");return(0,t.jsxs)(eB,{scope:s,checked:n,disabled:l,children:[(0,t.jsx)(eo.Primitive.button,{type:"button",role:"radio","aria-checked":n,"data-state":eU(n),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:p,onClick:en(e.onClick,e=>{n||d?.(),j&&(f.current=e.isPropagationStopped(),f.current||e.stopPropagation())})}),j&&(0,t.jsx)(eH,{control:x,bubbles:!f.current,name:a,value:c,checked:n,required:i,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});eq.displayName=ez;var e$="RadioIndicator",eL=o.forwardRef((e,r)=>{let{__scopeRadio:s,forceMount:a,...n}=e,i=eF(e$,s);return(0,t.jsx)(e_,{present:a||i.checked,children:(0,t.jsx)(eo.Primitive.span,{"data-state":eU(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:r})})});eL.displayName=e$;var eH=e=>{let r,{control:s,checked:a,bubbles:n=!0,...i}=e,l=o.useRef(null),c=(r=o.useRef({value:a,previous:a}),o.useMemo(()=>(r.current.value!==a&&(r.current.previous=r.current.value,r.current.value=a),r.current.previous),[a])),d=function(e){let[t,r]=o.useState(void 0);return ed(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let s,a;if(!Array.isArray(t)||!t.length)return;let n=t[0];if("borderBoxSize"in n){let e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,a=t.blockSize}else s=e.offsetWidth,a=e.offsetHeight;r({width:s,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}(s);return o.useEffect(()=>{let e=l.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==a&&t){let r=new Event("click",{bubbles:n});t.call(e,a),e.dispatchEvent(r)}},[c,a,n]),(0,t.jsx)("input",{type:"radio","aria-hidden":!0,defaultChecked:a,...i,tabIndex:-1,ref:l,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function eU(e){return e?"checked":"unchecked"}var eV=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],eK="RadioGroup",[eG,eW]=el(eK,[ew,eD]),eQ=ew(),eX=eD(),[eJ,eZ]=eG(eK),eY=o.forwardRef((e,r)=>{let{__scopeRadioGroup:s,name:a,defaultValue:n,value:i,required:l=!1,disabled:o=!1,orientation:c,dir:d,loop:u=!0,onValueChange:m,...x}=e,h=eQ(s),p=ef(d),[f,j]=eh({prop:i,defaultProp:n,onChange:m});return(0,t.jsx)(eJ,{scope:s,name:a,required:l,disabled:o,value:f,onValueChange:j,children:(0,t.jsx)(eR,{asChild:!0,...h,orientation:c,dir:p,loop:u,children:(0,t.jsx)(eo.Primitive.div,{role:"radiogroup","aria-required":l,"aria-orientation":c,"data-disabled":o?"":void 0,dir:p,...x,ref:r})})})});eY.displayName=eK;var e0="RadioGroupItem",e1=o.forwardRef((e,r)=>{let{__scopeRadioGroup:s,disabled:a,...n}=e,i=eZ(e0,s),l=i.disabled||a,c=eQ(s),d=eX(s),u=o.useRef(null),m=(0,ei.useComposedRefs)(r,u),x=i.value===n.value,h=o.useRef(!1);return o.useEffect(()=>{let e=e=>{eV.includes(e.key)&&(h.current=!0)},t=()=>h.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,t.jsx)(eM,{asChild:!0,...c,focusable:!l,active:x,children:(0,t.jsx)(eq,{disabled:l,required:i.required,checked:x,...d,...n,name:i.name,ref:m,onCheck:()=>i.onValueChange(n.value),onKeyDown:en(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:en(n.onFocus,()=>{h.current&&u.current?.click()})})})});e1.displayName=e0;var e2=o.forwardRef((e,r)=>{let{__scopeRadioGroup:s,...a}=e,n=eX(s);return(0,t.jsx)(eL,{...n,...a,ref:r})});e2.displayName="RadioGroupIndicator";let e5=(0,i.default)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),e4=o.forwardRef(({className:e,...r},s)=>(0,t.jsx)(eY,{className:(0,y.cn)("grid gap-2",e),...r,ref:s}));e4.displayName=eY.displayName;let e3=o.forwardRef(({className:e,...r},s)=>(0,t.jsx)(e1,{ref:s,className:(0,y.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:(0,t.jsx)(e2,{className:"flex items-center justify-center",children:(0,t.jsx)(e5,{className:"h-2.5 w-2.5 fill-current text-current"})})}));e3.displayName=e1.displayName;var e6=e.i(321),e9=o.forwardRef((e,r)=>(0,t.jsx)(e6.Primitive.label,{...e,ref:r,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));function e8({className:e,...r}){return(0,t.jsx)(e9,{"data-slot":"label",className:(0,y.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...r})}e9.displayName="Label";var e7=e.i(63533);let te=(0,i.default)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);function tt({exerciseId:e,exerciseName:r,proofPointName:s,content:a,onSave:n,onComplete:i,onExit:l}){let[u,x]=(0,o.useState)(0),[h,p]=(0,o.useState)(new Set),[f,j]=(0,o.useState)({}),[v,g]=(0,o.useState)(!1),N=a.secciones.length+ +!!a.quiz,C=u===a.secciones.length&&a.quiz;h.size,a.secciones.length;let k=()=>{u<N-1&&x(u+1)},R=()=>{if(!a.quiz)return 0;let e=0;return a.quiz.forEach((t,r)=>{let s=f[r];Array.isArray(t.respuesta_correcta)?JSON.stringify(s?.sort())===JSON.stringify(t.respuesta_correcta.sort())&&e++:s===t.respuesta_correcta&&e++}),Math.round(e/a.quiz.length*100)};return(0,t.jsx)(b,{exerciseId:e,exerciseName:r,exerciseDescription:a.objetivos.join(" • "),proofPointName:s,totalSteps:N,currentStep:u+1,onSave:n,onComplete:i,onPrevious:u>0?()=>{u>0&&x(u-1)}:void 0,onNext:u<N-1&&!C?k:void 0,onExit:l,showAIAssistant:!0,children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center gap-2 flex-wrap",children:Array.from({length:N}).map((e,r)=>(0,t.jsxs)(c.Button,{variant:u===r?"default":"outline",size:"sm",onClick:()=>x(r),className:"relative",children:[h.has(r)&&(0,t.jsx)(S.CheckCircle2,{className:"h-4 w-4 absolute -top-1 -right-1 text-green-600"}),r<a.secciones.length?`Secci\xf3n ${r+1}`:"Quiz"]},r))}),(0,t.jsx)(e7.Separator,{}),!C&&a.secciones[u]&&(0,t.jsxs)(t.Fragment,{children:[((e,r)=>{switch(e.tipo){case"texto":return(0,t.jsxs)("div",{className:"prose prose-lg max-w-none",children:[e.titulo&&(0,t.jsx)("h3",{children:e.titulo}),(0,t.jsx)("p",{className:"text-foreground/90 leading-relaxed",children:e.contenido})]});case"video":return(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(te,{className:"h-5 w-5"}),e.titulo||"Video"]})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsx)("div",{className:"aspect-video bg-muted rounded-lg flex items-center justify-center",children:e.url?(0,t.jsx)("iframe",{src:e.url,className:"w-full h-full rounded-lg",allowFullScreen:!0}):(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Video: ",e.contenido]})})})]});case"imagen":return(0,t.jsx)(d.Card,{children:(0,t.jsxs)(d.CardContent,{className:"p-4",children:[e.url?(0,t.jsx)("img",{src:e.url,alt:e.titulo||e.contenido,className:"w-full rounded-lg"}):(0,t.jsx)("div",{className:"aspect-video bg-muted rounded-lg flex items-center justify-center",children:(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Imagen: ",e.contenido]})}),e.titulo&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-2 text-center",children:e.titulo})]})});case"lista":return(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{children:e.titulo||"Puntos Clave"})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsx)("ul",{className:"space-y-2",children:(e.items||[]).map((e,r)=>(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)(S.CheckCircle2,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0"}),(0,t.jsx)("span",{children:e})]},r))})})]});case"concepto_clave":return(0,t.jsxs)(d.Card,{className:"border-primary/50 bg-primary/5",children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsxs)(d.CardTitle,{className:"flex items-center gap-2 text-primary",children:[(0,t.jsx)(w.BookOpen,{className:"h-5 w-5"}),"Concepto Clave"]})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsx)("p",{className:"text-lg font-medium",children:e.contenido})})]});default:return(0,t.jsx)("p",{children:e.contenido})}})(a.secciones[u],0),!h.has(u)&&(0,t.jsxs)(c.Button,{onClick:()=>{p(e=>new Set([...e,u])),k()},className:"w-full",size:"lg",children:[(0,t.jsx)(S.CheckCircle2,{className:"h-5 w-5 mr-2"}),"Marcar como Completada"]})]}),C&&(a.quiz?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(d.Card,{className:"border-primary/50 bg-primary/5",children:(0,t.jsxs)(d.CardContent,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Evaluación de Comprensión"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Responde las siguientes preguntas para verificar tu comprensión de la lección"})]})}),a.quiz.map((e,r)=>(0,t.jsxs)(d.Card,{children:[(0,t.jsxs)(d.CardHeader,{children:[(0,t.jsxs)(d.CardTitle,{className:"text-lg",children:["Pregunta ",r+1," de ",a.quiz.length]}),(0,t.jsx)("p",{className:"text-foreground/90",children:e.pregunta})]}),(0,t.jsxs)(d.CardContent,{children:["multiple_choice"===e.tipo&&(0,t.jsx)(e4,{value:f[r],onValueChange:e=>j({...f,[r]:e}),disabled:v,children:e.opciones.map((s,a)=>{let n=s===e.respuesta_correcta,i=f[r]===s;return(0,t.jsxs)("div",{className:(0,y.cn)("flex items-center space-x-2 rounded-lg border p-4 transition-colors",v&&n&&"border-green-500 bg-green-50",v&&i&&!n&&"border-red-500 bg-red-50"),children:[(0,t.jsx)(e3,{value:s,id:`q${r}-o${a}`}),(0,t.jsx)(e8,{htmlFor:`q${r}-o${a}`,className:"flex-1 cursor-pointer",children:s}),v&&n&&(0,t.jsx)(S.CheckCircle2,{className:"h-5 w-5 text-green-600"})]},a)})}),"checkbox"===e.tipo&&(0,t.jsx)("div",{className:"space-y-2",children:e.opciones.map((s,a)=>{let n=e.respuesta_correcta.includes(s),i=f[r]?.includes(s);return(0,t.jsxs)("div",{className:(0,y.cn)("flex items-center space-x-2 rounded-lg border p-4",v&&n&&"border-green-500 bg-green-50",v&&i&&!n&&"border-red-500 bg-red-50"),children:[(0,t.jsx)(ea,{id:`q${r}-o${a}`,checked:f[r]?.includes(s)||!1,onCheckedChange:e=>{let t=f[r]||[],a=e?[...t,s]:t.filter(e=>e!==s);j({...f,[r]:a})},disabled:v}),(0,t.jsx)(e8,{htmlFor:`q${r}-o${a}`,className:"flex-1 cursor-pointer",children:s})]},a)})}),v&&e.explicacion&&(0,t.jsx)("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm",children:[(0,t.jsx)("strong",{children:"Explicación:"})," ",e.explicacion]})})]})]},r)),!v&&(0,t.jsx)(c.Button,{onClick:()=>{g(!0),p(e=>new Set([...e,u]))},size:"lg",className:"w-full",children:"Enviar Respuestas"}),v&&(0,t.jsx)(d.Card,{className:"border-primary",children:(0,t.jsx)(d.CardContent,{className:"p-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("h3",{className:"text-2xl font-bold mb-2",children:["Tu puntuación: ",R(),"%"]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:R()>=70?"¡Excelente! Has demostrado un buen entendimiento de la lección":"Revisa los conceptos clave y vuelve a intentarlo"})]})})})]}):null),!C&&a.conceptos_clave&&a.conceptos_clave.length>0&&(0,t.jsxs)(d.Card,{className:"mt-8 border-primary/30 bg-primary/5",children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{children:"Conceptos Clave de Esta Lección"})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:a.conceptos_clave.map((e,r)=>(0,t.jsx)(m.Badge,{variant:"secondary",className:"text-sm",children:e},r))})})]})]})})}function tr({className:e,type:r,...s}){return(0,t.jsx)("input",{type:r,"data-slot":"input",className:(0,y.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}let ts=(0,i.default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),ta=(0,i.default)("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),tn=(0,i.default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);function ti({exerciseId:e,exerciseName:r,proofPointName:s,content:a,initialResponses:n={},onSave:i,onComplete:l,onExit:u}){let[x,h]=(0,o.useState)(0),[p,f]=(0,o.useState)(n),[j,v]=(0,o.useState)(new Set),g=a.secciones.length,N=a.secciones[x],w=(e,t)=>`s${e}_p${t}`,k=(e,t,r)=>{let s=w(e,t);f(e=>({...e,[s]:r}))},R=(e,t)=>p[w(e,t)]||"",A=e=>a.secciones[e].prompts.every((t,r)=>{let s=R(e,r);return"lista"===t.tipo?Array.isArray(s)&&s.length>0:s&&s.toString().trim().length>0}),E=()=>Math.round(N.prompts.filter((e,t)=>{let r=R(x,t);return r&&r.toString().trim().length>0}).length/N.prompts.length*100),M=async()=>{await i(p)},T=async()=>{A(x)&&v(e=>new Set([...e,x])),await l(p)};return(0,t.jsx)(b,{exerciseId:e,exerciseName:r,exerciseDescription:a.objetivo,proofPointName:s,totalSteps:g,currentStep:x+1,estimatedMinutes:a.tiempo_sugerido,onSave:M,onComplete:T,onPrevious:x>0?()=>{x>0&&h(x-1)}:void 0,onNext:x<g-1?()=>{x<g-1&&(A(x)&&v(e=>new Set([...e,x])),h(x+1))}:void 0,onExit:u,showAIAssistant:!0,children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(d.Card,{className:"border-primary/30 bg-primary/5",children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(tn,{className:"h-5 w-5"}),"Contexto"]})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsx)("p",{className:"text-foreground/90",children:a.contexto})})]}),(0,t.jsx)("div",{className:"flex items-center gap-2 flex-wrap",children:a.secciones.map((e,r)=>(0,t.jsxs)(c.Button,{variant:x===r?"default":"outline",size:"sm",onClick:()=>h(r),className:"relative",children:[j.has(r)?(0,t.jsx)(S.CheckCircle2,{className:"h-4 w-4 mr-2 text-green-600"}):(0,t.jsx)(e5,{className:"h-4 w-4 mr-2"}),"Sección ",r+1]},r))}),(0,t.jsx)(e7.Separator,{}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-2",children:N.titulo}),N.descripcion&&(0,t.jsx)("p",{className:"text-muted-foreground",children:N.descripcion})]}),(0,t.jsx)(d.Card,{className:"bg-blue-50 border-blue-200",children:(0,t.jsx)(d.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(ts,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,t.jsx)("p",{className:"text-sm",children:N.instrucciones})]})})}),(0,t.jsx)("div",{className:"space-y-6",children:N.prompts.map((e,r)=>(0,t.jsx)(d.Card,{children:(0,t.jsx)(d.CardContent,{className:"p-6",children:((e,r)=>{let s=R(x,r);switch(e.tipo){case"texto_corto":return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:e.pregunta}),e.guia&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.guia})]}),(0,t.jsx)(tr,{placeholder:e.placeholder||"Escribe tu respuesta...",value:s,onChange:e=>k(x,r,e.target.value),className:"text-base"})]});case"texto_largo":case"reflexion":let a=(s||"").trim().split(/\s+/).filter(e=>e.length>0).length,n=e.min_palabras||0,i=e.max_palabras||1e3,l=a>=n&&a<=i;return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:e.pregunta}),e.guia&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.guia})]}),(0,t.jsx)(C.Textarea,{placeholder:e.placeholder||"Desarrolla tu respuesta aquí...",value:s,onChange:e=>k(x,r,e.target.value),className:"min-h-[200px] text-base"}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("span",{className:(0,y.cn)("text-muted-foreground",!l&&"text-orange-600"),children:[a," palabras",n>0&&` (m\xednimo ${n})`]}),e.ejemplos&&e.ejemplos.length>0&&(0,t.jsxs)(c.Button,{variant:"ghost",size:"sm",onClick:()=>{},children:[(0,t.jsx)(ta,{className:"h-4 w-4 mr-2"}),"Ver ejemplos"]})]})]});case"lista":let o=s||[""];return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:e.pregunta}),e.guia&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.guia})]}),(0,t.jsx)("div",{className:"space-y-2",children:o.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"text-sm text-muted-foreground w-6",children:[s+1,"."]}),(0,t.jsx)(tr,{placeholder:"Escribe un ítem...",value:e,onChange:e=>{let t=[...o];t[s]=e.target.value,k(x,r,t)}}),s===o.length-1&&(0,t.jsx)(c.Button,{variant:"outline",size:"sm",onClick:()=>{k(x,r,[...o,""])},children:"+"})]},s))})]});case"tabla":let d=s||[["",""]];return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:e.pregunta}),e.guia&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.guia})]}),(0,t.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-muted",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-3 text-left text-sm font-medium",children:"Columna 1"}),(0,t.jsx)("th",{className:"p-3 text-left text-sm font-medium",children:"Columna 2"}),(0,t.jsx)("th",{className:"p-3 w-12"})]})}),(0,t.jsx)("tbody",{children:d.map((e,s)=>(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsx)("td",{className:"p-2",children:(0,t.jsx)(tr,{value:e[0],onChange:e=>{let t=[...d];t[s][0]=e.target.value,k(x,r,t)},placeholder:"..."})}),(0,t.jsx)("td",{className:"p-2",children:(0,t.jsx)(tr,{value:e[1],onChange:e=>{let t=[...d];t[s][1]=e.target.value,k(x,r,t)},placeholder:"..."})}),(0,t.jsx)("td",{className:"p-2",children:s===d.length-1&&(0,t.jsx)(c.Button,{variant:"ghost",size:"sm",onClick:()=>{k(x,r,[...d,["",""]])},children:"+"})})]},s))})]})})]});default:return null}})(e,r)})},r))}),(0,t.jsx)(d.Card,{className:"border-dashed",children:(0,t.jsx)(d.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Progreso de la sección"}),(0,t.jsxs)(m.Badge,{variant:100===E()?"default":"secondary",children:[E(),"% completado"]})]})})})]}),a.criterios_evaluacion&&a.criterios_evaluacion.length>0&&(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{className:"text-lg",children:"Criterios de Evaluación"})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsx)("ul",{className:"space-y-2",children:a.criterios_evaluacion.map((e,r)=>(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)(S.CheckCircle2,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0"}),(0,t.jsx)("span",{className:"text-sm",children:e})]},r))})})]})]})})}var tl=e.i(45312);let to=(0,i.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),tc=(0,i.default)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);function td({exerciseId:e,exerciseName:r,proofPointName:s,content:a,onSave:n,onComplete:i,onExit:l}){let[u,x]=(0,o.useState)([{id:"initial",role:"system",content:a.situacion_inicial,timestamp:new Date}]),[h,p]=(0,o.useState)(""),[f,g]=(0,o.useState)(!1),[N,w]=(0,o.useState)(!0),[R,A]=(0,o.useState)(!1),[E,M]=(0,o.useState)(new Set),T=(0,o.useRef)(null),I=(0,o.useRef)(null);(0,o.useEffect)(()=>{T.current?.scrollIntoView({behavior:"smooth"})},[u]);let _=async()=>{if(!h.trim()||f)return;let e={id:`user-${Date.now()}`,role:"user",content:h.trim(),timestamp:new Date};x(t=>[...t,e]),p(""),g(!0),setTimeout(()=>{let e={id:`ai-${Date.now()}`,role:"assistant",content:`[Respuesta de ${a.personaje_ia.nombre}] Entiendo tu punto. Como ${a.personaje_ia.rol}, mi perspectiva es...`,timestamp:new Date};Math.random()>.5&&(e.feedback={tipo:Math.random()>.3?"positivo":"mejora",mensaje:Math.random()>.3?"Excelente enfoque. Estás demostrando empatía y escucha activa.":"Considera reformular tu mensaje para ser más específico."}),x(t=>[...t,e]),g(!1),P(u.length+2)},1500)},P=e=>{let t=new Set(E);e>=4&&t.add(0),e>=8&&t.add(1),e>=12&&t.add(2),M(t),t.size>=a.criterios_exito.length&&A(!0)},z=async()=>{await n({messages:u,successCriteriaMet:Array.from(E),conversationComplete:R})},O=async()=>{await i({messages:u,successCriteriaMet:Array.from(E),conversationComplete:R})};return(0,t.jsx)(b,{exerciseId:e,exerciseName:r,exerciseDescription:a.descripcion,proofPointName:s,totalSteps:1,currentStep:1,estimatedMinutes:a.tiempo_sugerido,onSave:z,onComplete:R?O:void 0,onExit:l,showAIAssistant:!1,children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(d.Card,{className:"border-primary/30 bg-primary/5",children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)(d.CardTitle,{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(v.MessageSquare,{className:"h-5 w-5"}),a.titulo]}),(0,t.jsx)("p",{className:"text-sm text-foreground/80",children:a.descripcion})]}),(0,t.jsx)(m.Badge,{className:(()=>{switch(a.nivel_dificultad){case"principiante":return"bg-green-500";case"intermedio":return"bg-yellow-500";case"avanzado":return"bg-red-500";default:return"bg-gray-500"}})(),children:a.nivel_dificultad})]})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-semibold mb-1",children:"Tu Objetivo:"}),(0,t.jsx)("p",{className:"text-sm text-foreground/90",children:a.objetivo_estudiante})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-background rounded-lg border",children:[(0,t.jsx)(tl.Avatar,{children:(0,t.jsx)(tl.AvatarFallback,{children:(0,t.jsx)(tc,{className:"h-5 w-5"})})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:a.personaje_ia.nombre}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[a.personaje_ia.rol," • ",a.personaje_ia.tono]})]})]})]})})]}),N&&(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(d.CardTitle,{className:"text-lg",children:"Criterios de Éxito"}),(0,t.jsx)(c.Button,{variant:"ghost",size:"sm",onClick:()=>w(!1),children:"Ocultar"})]})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsx)("ul",{className:"space-y-2",children:a.criterios_exito.map((e,r)=>(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[E.has(r)?(0,t.jsx)(S.CheckCircle2,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}):(0,t.jsx)("div",{className:"h-5 w-5 rounded-full border-2 mt-0.5 flex-shrink-0"}),(0,t.jsx)("span",{className:(0,y.cn)("text-sm",E.has(r)&&"text-muted-foreground line-through"),children:e})]},r))})})]}),(0,t.jsxs)(d.Card,{className:"border-2",children:[(0,t.jsx)(d.CardHeader,{className:"border-b bg-muted/50",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(v.MessageSquare,{className:"h-5 w-5 text-primary"}),(0,t.jsx)("span",{className:"font-semibold",children:"Conversación"}),(0,t.jsxs)(m.Badge,{variant:"outline",children:[u.filter(e=>"system"!==e.role).length," mensajes"]})]}),(0,t.jsxs)(c.Button,{variant:"outline",size:"sm",onClick:()=>{x([{id:"initial",role:"system",content:a.situacion_inicial,timestamp:new Date}]),A(!1),M(new Set)},children:[(0,t.jsx)(j,{className:"h-4 w-4 mr-2"}),"Reiniciar"]})]})}),(0,t.jsxs)(d.CardContent,{className:"p-0",children:[(0,t.jsxs)("div",{className:"h-[500px] overflow-y-auto p-4 space-y-4",children:[u.map(e=>(0,t.jsx)("div",{children:"system"===e.role?(0,t.jsx)("div",{className:"bg-muted/50 rounded-lg p-4 border-l-4 border-primary",children:(0,t.jsx)("p",{className:"text-sm italic",children:e.content})}):(0,t.jsxs)("div",{className:(0,y.cn)("flex gap-3","user"===e.role?"justify-end":"justify-start"),children:["assistant"===e.role&&(0,t.jsx)(tl.Avatar,{className:"h-8 w-8",children:(0,t.jsx)(tl.AvatarFallback,{className:"bg-primary/10",children:(0,t.jsx)(tc,{className:"h-4 w-4 text-primary"})})}),(0,t.jsxs)("div",{className:(0,y.cn)("max-w-[70%] space-y-2","user"===e.role&&"items-end"),children:[(0,t.jsx)("div",{className:(0,y.cn)("rounded-lg p-3","user"===e.role?"bg-primary text-primary-foreground":"bg-muted"),children:(0,t.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.content})}),e.feedback&&(0,t.jsx)("div",{className:(0,y.cn)("text-xs p-2 rounded border-l-2","positivo"===e.feedback.tipo&&"bg-green-50 border-green-500 text-green-900","mejora"===e.feedback.tipo&&"bg-orange-50 border-orange-500 text-orange-900","neutral"===e.feedback.tipo&&"bg-blue-50 border-blue-500 text-blue-900"),children:(0,t.jsxs)("div",{className:"flex items-start gap-1",children:[(0,t.jsx)(ta,{className:"h-3 w-3 mt-0.5"}),(0,t.jsx)("span",{children:e.feedback.mensaje})]})})]}),"user"===e.role&&(0,t.jsx)(tl.Avatar,{className:"h-8 w-8",children:(0,t.jsx)(tl.AvatarFallback,{className:"bg-muted",children:(0,t.jsx)(to,{className:"h-4 w-4"})})})]})},e.id)),f&&(0,t.jsxs)("div",{className:"flex gap-3 justify-start",children:[(0,t.jsx)(tl.Avatar,{className:"h-8 w-8",children:(0,t.jsx)(tl.AvatarFallback,{className:"bg-primary/10",children:(0,t.jsx)(tc,{className:"h-4 w-4 text-primary"})})}),(0,t.jsx)("div",{className:"bg-muted rounded-lg p-3",children:(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)("div",{className:"h-2 w-2 bg-muted-foreground rounded-full animate-bounce"}),(0,t.jsx)("div",{className:"h-2 w-2 bg-muted-foreground rounded-full animate-bounce delay-100"}),(0,t.jsx)("div",{className:"h-2 w-2 bg-muted-foreground rounded-full animate-bounce delay-200"})]})})]}),(0,t.jsx)("div",{ref:T})]}),(0,t.jsxs)("div",{className:"border-t p-4",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(C.Textarea,{ref:I,placeholder:`Escribe tu mensaje para ${a.personaje_ia.nombre}...`,value:h,onChange:e=>p(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),_())},disabled:f||R,className:"resize-none min-h-[80px]"}),(0,t.jsx)(c.Button,{onClick:_,disabled:!h.trim()||f||R,size:"lg",children:(0,t.jsx)(k.Send,{className:"h-5 w-5"})})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Presiona Enter para enviar, Shift+Enter para nueva línea"})]})]})]}),R&&(0,t.jsx)(d.Card,{className:"border-green-500 bg-green-50",children:(0,t.jsx)(d.CardContent,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(S.CheckCircle2,{className:"h-6 w-6 text-green-600 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-green-900 mb-1",children:"¡Simulación Completada!"}),(0,t.jsx)("p",{className:"text-sm text-green-800",children:"Has cumplido todos los criterios de éxito. Puedes continuar la conversación o completar el ejercicio."})]})]})})})]})})}let tu=(0,i.default)("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);var tm=e.i(13029),tx=e.i(72640);function th({exerciseId:e,exerciseName:r,proofPointName:s,content:a,initialResponses:n={},onSave:i,onComplete:l,onExit:x}){let[h,p]=(0,o.useState)(0),[f,j]=(0,o.useState)(n),[g,N]=(0,o.useState)(new Set),[k,R]=(0,o.useState)(!1),[A,E]=(0,o.useState)(""),M=a.pasos[h],T=a.pasos.length,I=(e,t)=>{j(r=>({...r,[h]:{...r[h],[e]:t}}))},_=e=>f[h]?.[e]||"",P=e=>{let t=f[e];return t?.reflexion&&t.reflexion.trim().length>100},z=async()=>{R(!0),E(`Como ${a.contexto_mentor.nombre}, te sugiero que reflexiones sobre ${M.titulo.toLowerCase()}. ${M.criterio_avance}`)},O=async()=>{await i({responses:f,completedSteps:Array.from(g),currentStep:h})},D=async()=>{P(h)&&N(e=>new Set([...e,h])),await l({responses:f,completedSteps:Array.from(g),currentStep:h})},B=g.size/T*100;return(0,t.jsx)(b,{exerciseId:e,exerciseName:r,exerciseDescription:a.objetivo_general,proofPointName:s,totalSteps:T,currentStep:h+1,onSave:O,onComplete:D,onPrevious:h>0?()=>{h>0&&p(h-1)}:void 0,onNext:h<T-1&&g.has(h)?()=>{h<T-1&&p(h+1)}:void 0,onExit:x,showAIAssistant:!1,children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(d.Card,{className:"border-primary/30 bg-gradient-to-r from-primary/5 to-background",children:(0,t.jsx)(d.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center",children:(0,t.jsx)(tu,{className:"h-6 w-6 text-primary"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(d.CardTitle,{children:a.contexto_mentor.nombre}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:a.contexto_mentor.especialidad}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,t.jsx)(m.Badge,{variant:"outline",children:a.contexto_mentor.estilo}),(0,t.jsx)(m.Badge,{variant:"outline",children:a.contexto_mentor.enfoque})]})]})]})})}),(0,t.jsx)(d.Card,{children:(0,t.jsx)(d.CardContent,{className:"p-6",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Progreso General"}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:[g.size," / ",T," pasos completados"]})]}),(0,t.jsx)(u.Progress,{value:B,className:"h-2"})]})})}),(0,t.jsx)("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:a.pasos.map((e,r)=>(0,t.jsxs)(c.Button,{variant:h===r?"default":"outline",size:"sm",onClick:()=>p(r),className:(0,y.cn)("flex-shrink-0 relative",g.has(r)&&"border-green-500"),children:[g.has(r)?(0,t.jsx)(S.CheckCircle2,{className:"h-4 w-4 mr-2 text-green-600"}):(0,t.jsx)(e5,{className:"h-4 w-4 mr-2"}),"Paso ",r+1]},r))}),(0,t.jsx)(e7.Separator,{}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold",children:["Paso ",h+1,": ",M.titulo]}),(0,t.jsx)(m.Badge,{variant:g.has(h)?"default":"secondary",children:g.has(h)?"Completado":"En progreso"})]}),(0,t.jsx)(d.Card,{className:"bg-blue-50 border-blue-200",children:(0,t.jsx)(d.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(tm.Target,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,t.jsx)("p",{className:"text-sm",children:M.instruccion})]})})})]}),(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsxs)(d.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(v.MessageSquare,{className:"h-5 w-5"}),"Pregunta de Reflexión"]})}),(0,t.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-foreground/90 font-medium",children:M.pregunta_reflexion}),(0,t.jsx)(C.Textarea,{placeholder:"Escribe tu reflexión aquí... (mínimo 100 palabras)",value:_("reflexion"),onChange:e=>I("reflexion",e.target.value),className:"min-h-[200px]"}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("span",{className:(0,y.cn)("text-muted-foreground",_("reflexion")?.length<100&&"text-orange-600"),children:[_("reflexion")?.length||0," caracteres",_("reflexion")?.length<100&&" (mínimo 100)"]}),(0,t.jsxs)(c.Button,{variant:"outline",size:"sm",onClick:z,children:[(0,t.jsx)(ta,{className:"h-4 w-4 mr-2"}),"Pedir consejo al mentor"]})]})]})]}),k&&A&&(0,t.jsx)(d.Card,{className:"border-primary bg-primary/5",children:(0,t.jsx)(d.CardContent,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(tu,{className:"h-5 w-5 text-primary"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"font-semibold mb-2",children:[a.contexto_mentor.nombre," dice:"]}),(0,t.jsx)("p",{className:"text-sm",children:A})]})]})})}),M.recursos&&M.recursos.length>0&&(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsxs)(d.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(w.BookOpen,{className:"h-5 w-5"}),"Recursos de Apoyo"]})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsx)("div",{className:"space-y-3",children:M.recursos.map((e,r)=>(0,t.jsxs)("div",{className:(0,y.cn)("p-4 rounded-lg border-l-4","consejo"===e.tipo&&"bg-blue-50 border-blue-500","ejemplo"===e.tipo&&"bg-green-50 border-green-500","link"===e.tipo&&"bg-purple-50 border-purple-500"),children:[(0,t.jsx)("h5",{className:"font-medium text-sm mb-1",children:e.titulo}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.contenido})]},r))})})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsxs)(d.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,t.jsx)(S.CheckCircle2,{className:"h-4 w-4"}),"Acciones Tomadas (Opcional)"]})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsx)(C.Textarea,{placeholder:"¿Qué acciones has tomado o planeas tomar basándote en este paso?",value:_("acciones_tomadas")?.join("\n")||"",onChange:e=>{I("acciones_tomadas",e.target.value.split("\n").filter(e=>e.trim()))},className:"min-h-[120px]"})})]}),(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsxs)(d.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,t.jsx)(ta,{className:"h-4 w-4"}),"Aprendizajes Clave (Opcional)"]})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsx)(C.Textarea,{placeholder:"¿Qué has aprendido en este paso?",value:_("aprendizajes")?.join("\n")||"",onChange:e=>{I("aprendizajes",e.target.value.split("\n").filter(e=>e.trim()))},className:"min-h-[120px]"})})]})]}),(0,t.jsx)(d.Card,{className:"border-dashed",children:(0,t.jsx)(d.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(ts,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium mb-1",children:"Para avanzar al siguiente paso:"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:M.criterio_avance})]})]})})}),!g.has(h)&&(0,t.jsxs)(c.Button,{onClick:()=>{P(h)&&(N(e=>new Set([...e,h])),h<T-1&&p(h+1))},disabled:!P(h),size:"lg",className:"w-full",children:[(0,t.jsx)(S.CheckCircle2,{className:"h-5 w-5 mr-2"}),"Completar Paso ",h+1]})]}),h===T-1&&g.has(h)&&(0,t.jsxs)(d.Card,{className:"border-primary bg-gradient-to-r from-primary/5 to-background",children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(tx.TrendingUp,{className:"h-5 w-5"}),"Reflexión Final"]})}),(0,t.jsxs)(d.CardContent,{children:[(0,t.jsx)("p",{className:"text-foreground/90 mb-4",children:a.reflexion_final}),a.metricas_seguimiento&&a.metricas_seguimiento.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-2 text-sm",children:"Métricas para dar seguimiento:"}),(0,t.jsx)("ul",{className:"space-y-1",children:a.metricas_seguimiento.map((e,r)=>(0,t.jsxs)("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-primary",children:"•"}),e]},r))})]})]})]})]})})}let tp=(0,i.default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),tf=(0,i.default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var tj=e.i(49604),tv=new WeakMap;function tg(e,t){var r,s;let a,n,i;if("at"in Array.prototype)return Array.prototype.at.call(e,t);let l=(r=e,s=t,a=r.length,(i=(n=tN(s))>=0?n:a+n)<0||i>=a?-1:i);return -1===l?void 0:e[l]}function tN(e){return e!=e||0===e?0:Math.trunc(e)}(class e extends Map{#e;constructor(e){super(e),this.#e=[...super.keys()],tv.set(this,!0)}set(e,t){return tv.get(this)&&(this.has(e)?this.#e[this.#e.indexOf(e)]=e:this.#e.push(e)),super.set(e,t),this}insert(e,t,r){let s,a=this.has(t),n=this.#e.length,i=tN(e),l=i>=0?i:n+i,o=l<0||l>=n?-1:l;if(o===this.size||a&&o===this.size-1||-1===o)return this.set(t,r),this;let c=this.size+ +!a;i<0&&l++;let d=[...this.#e],u=!1;for(let e=l;e<c;e++)if(l===e){let n=d[e];d[e]===t&&(n=d[e+1]),a&&this.delete(t),s=this.get(n),this.set(t,r)}else{u||d[e-1]!==t||(u=!0);let r=d[u?e:e-1],a=s;s=this.get(r),this.delete(r),this.set(r,a)}return this}with(t,r,s){let a=new e(this);return a.insert(t,r,s),a}before(e){let t=this.#e.indexOf(e)-1;if(!(t<0))return this.entryAt(t)}setBefore(e,t,r){let s=this.#e.indexOf(e);return -1===s?this:this.insert(s,t,r)}after(e){let t=this.#e.indexOf(e);if(-1!==(t=-1===t||t===this.size-1?-1:t+1))return this.entryAt(t)}setAfter(e,t,r){let s=this.#e.indexOf(e);return -1===s?this:this.insert(s+1,t,r)}first(){return this.entryAt(0)}last(){return this.entryAt(-1)}clear(){return this.#e=[],super.clear()}delete(e){let t=super.delete(e);return t&&this.#e.splice(this.#e.indexOf(e),1),t}deleteAt(e){let t=this.keyAt(e);return void 0!==t&&this.delete(t)}at(e){let t=tg(this.#e,e);if(void 0!==t)return this.get(t)}entryAt(e){let t=tg(this.#e,e);if(void 0!==t)return[t,this.get(t)]}indexOf(e){return this.#e.indexOf(e)}keyAt(e){return tg(this.#e,e)}from(e,t){let r=this.indexOf(e);if(-1===r)return;let s=r+t;return s<0&&(s=0),s>=this.size&&(s=this.size-1),this.at(s)}keyFrom(e,t){let r=this.indexOf(e);if(-1===r)return;let s=r+t;return s<0&&(s=0),s>=this.size&&(s=this.size-1),this.keyAt(s)}find(e,t){let r=0;for(let s of this){if(Reflect.apply(e,t,[s,r,this]))return s;r++}}findIndex(e,t){let r=0;for(let s of this){if(Reflect.apply(e,t,[s,r,this]))return r;r++}return -1}filter(t,r){let s=[],a=0;for(let e of this)Reflect.apply(t,r,[e,a,this])&&s.push(e),a++;return new e(s)}map(t,r){let s=[],a=0;for(let e of this)s.push([e[0],Reflect.apply(t,r,[e,a,this])]),a++;return new e(s)}reduce(...e){let[t,r]=e,s=0,a=r??this.at(0);for(let r of this)a=0===s&&1===e.length?r:Reflect.apply(t,this,[a,r,s,this]),s++;return a}reduceRight(...e){let[t,r]=e,s=r??this.at(-1);for(let r=this.size-1;r>=0;r--){let a=this.at(r);s=r===this.size-1&&1===e.length?a:Reflect.apply(t,this,[s,a,r,this])}return s}toSorted(t){return new e([...this.entries()].sort(t))}toReversed(){let t=new e;for(let e=this.size-1;e>=0;e--){let r=this.keyAt(e),s=this.get(r);t.set(r,s)}return t}toSpliced(...t){let r=[...this.entries()];return r.splice(...t),new e(r)}slice(t,r){let s=new e,a=this.size-1;if(void 0===t)return s;t<0&&(t+=this.size),void 0!==r&&r>0&&(a=r-1);for(let e=t;e<=a;e++){let t=this.keyAt(e),r=this.get(t);s.set(t,r)}return s}every(e,t){let r=0;for(let s of this){if(!Reflect.apply(e,t,[s,r,this]))return!1;r++}return!0}some(e,t){let r=0;for(let s of this){if(Reflect.apply(e,t,[s,r,this]))return!0;r++}return!1}});var ty=o[" useId ".trim().toString()]||(()=>void 0),tb=0;function tC(e){let[t,r]=o.useState(ty());return(0,P.useLayoutEffect)(()=>{e||r(e=>e??String(tb++))},[e]),e||(t?`radix-${t}`:"")}var tw=e.i(10863),tk=o.createContext(void 0);function tS(e){let t=o.useContext(tk);return e||t||"ltr"}var tR="rovingFocusGroup.onEntryFocus",tA={bubbles:!1,cancelable:!0},tE="RovingFocusGroup",[tM,tT,tI]=function(e){let r=e+"CollectionProvider",[s,a]=I(r),[n,i]=s(r,{collectionRef:{current:null},itemMap:new Map}),l=e=>{let{scope:r,children:s}=e,a=o.default.useRef(null),i=o.default.useRef(new Map).current;return(0,t.jsx)(n,{scope:r,itemMap:i,collectionRef:a,children:s})};l.displayName=r;let c=e+"CollectionSlot",d=F(c),u=o.default.forwardRef((e,r)=>{let{scope:s,children:a}=e,n=i(c,s),l=(0,T.useComposedRefs)(r,n.collectionRef);return(0,t.jsx)(d,{ref:l,children:a})});u.displayName=c;let m=e+"CollectionItemSlot",x="data-radix-collection-item",h=F(m),p=o.default.forwardRef((e,r)=>{let{scope:s,children:a,...n}=e,l=o.default.useRef(null),c=(0,T.useComposedRefs)(r,l),d=i(m,s);return o.default.useEffect(()=>(d.itemMap.set(l,{ref:l,...n}),()=>void d.itemMap.delete(l))),(0,t.jsx)(h,{...{[x]:""},ref:c,children:a})});return p.displayName=m,[{Provider:l,Slot:u,ItemSlot:p},function(t){let r=i(e+"CollectionConsumer",t);return o.default.useCallback(()=>{let e=r.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${x}]`));return Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[r.collectionRef,r.itemMap])},a]}(tE),[t_,tP]=I(tE,[tI]),[tz,tO]=t_(tE),tD=o.forwardRef((e,r)=>(0,t.jsx)(tM.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,t.jsx)(tM.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,t.jsx)(tB,{...e,ref:r})})}));tD.displayName=tE;var tB=o.forwardRef((e,r)=>{let{__scopeRovingFocusGroup:s,orientation:a,loop:n=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:u,preventScrollOnEntryFocus:m=!1,...x}=e,h=o.useRef(null),p=(0,T.useComposedRefs)(r,h),f=tS(i),[j,v]=O({prop:l,defaultProp:c??null,onChange:d,caller:tE}),[g,N]=o.useState(!1),y=(0,tw.useCallbackRef)(u),b=tT(s),C=o.useRef(!1),[w,k]=o.useState(0);return o.useEffect(()=>{let e=h.current;if(e)return e.addEventListener(tR,y),()=>e.removeEventListener(tR,y)},[y]),(0,t.jsx)(tz,{scope:s,orientation:a,dir:f,loop:n,currentTabStopId:j,onItemFocus:o.useCallback(e=>v(e),[v]),onItemShiftTab:o.useCallback(()=>N(!0),[]),onFocusableItemAdd:o.useCallback(()=>k(e=>e+1),[]),onFocusableItemRemove:o.useCallback(()=>k(e=>e-1),[]),children:(0,t.jsx)(L.div,{tabIndex:g||0===w?-1:0,"data-orientation":a,...x,ref:p,style:{outline:"none",...e.style},onMouseDown:_(e.onMouseDown,()=>{C.current=!0}),onFocus:_(e.onFocus,e=>{let t=!C.current;if(e.target===e.currentTarget&&t&&!g){let t=new CustomEvent(tR,tA);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=b().filter(e=>e.focusable);tL([e.find(e=>e.active),e.find(e=>e.id===j),...e].filter(Boolean).map(e=>e.ref.current),m)}}C.current=!1}),onBlur:_(e.onBlur,()=>N(!1))})})}),tF="RovingFocusGroupItem",tq=o.forwardRef((e,r)=>{let{__scopeRovingFocusGroup:s,focusable:a=!0,active:n=!1,tabStopId:i,children:l,...c}=e,d=tC(),u=i||d,m=tO(tF,s),x=m.currentTabStopId===u,h=tT(s),{onFocusableItemAdd:p,onFocusableItemRemove:f,currentTabStopId:j}=m;return o.useEffect(()=>{if(a)return p(),()=>f()},[a,p,f]),(0,t.jsx)(tM.ItemSlot,{scope:s,id:u,focusable:a,active:n,children:(0,t.jsx)(L.span,{tabIndex:x?0:-1,"data-orientation":m.orientation,...c,ref:r,onMouseDown:_(e.onMouseDown,e=>{a?m.onItemFocus(u):e.preventDefault()}),onFocus:_(e.onFocus,()=>m.onItemFocus(u)),onKeyDown:_(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void m.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,r){var s;let a=(s=e.key,"rtl"!==r?s:"ArrowLeft"===s?"ArrowRight":"ArrowRight"===s?"ArrowLeft":s);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(a))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(a)))return t$[a]}(e,m.orientation,m.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let a=h().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)a.reverse();else if("prev"===t||"next"===t){var r,s;"prev"===t&&a.reverse();let n=a.indexOf(e.currentTarget);a=m.loop?(r=a,s=n+1,r.map((e,t)=>r[(s+t)%r.length])):a.slice(n+1)}setTimeout(()=>tL(a))}}),children:"function"==typeof l?l({isCurrentTabStop:x,hasTabStop:null!=j}):l})})});tq.displayName=tF;var t$={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function tL(e,t=!1){let r=document.activeElement;for(let s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}var tH="Tabs",[tU,tV]=I(tH,[tP]),tK=tP(),[tG,tW]=tU(tH),tQ=o.forwardRef((e,r)=>{let{__scopeTabs:s,value:a,onValueChange:n,defaultValue:i,orientation:l="horizontal",dir:o,activationMode:c="automatic",...d}=e,u=tS(o),[m,x]=O({prop:a,onChange:n,defaultProp:i??"",caller:tH});return(0,t.jsx)(tG,{scope:s,baseId:tC(),value:m,onValueChange:x,orientation:l,dir:u,activationMode:c,children:(0,t.jsx)(L.div,{dir:u,"data-orientation":l,...d,ref:r})})});tQ.displayName=tH;var tX="TabsList",tJ=o.forwardRef((e,r)=>{let{__scopeTabs:s,loop:a=!0,...n}=e,i=tW(tX,s),l=tK(s);return(0,t.jsx)(tD,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:a,children:(0,t.jsx)(L.div,{role:"tablist","aria-orientation":i.orientation,...n,ref:r})})});tJ.displayName=tX;var tZ="TabsTrigger",tY=o.forwardRef((e,r)=>{let{__scopeTabs:s,value:a,disabled:n=!1,...i}=e,l=tW(tZ,s),o=tK(s),c=t2(l.baseId,a),d=t5(l.baseId,a),u=a===l.value;return(0,t.jsx)(tq,{asChild:!0,...o,focusable:!n,active:u,children:(0,t.jsx)(L.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:c,...i,ref:r,onMouseDown:_(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(a)}),onKeyDown:_(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(a)}),onFocus:_(e.onFocus,()=>{let e="manual"!==l.activationMode;u||n||!e||l.onValueChange(a)})})})});tY.displayName=tZ;var t0="TabsContent",t1=o.forwardRef((e,r)=>{let{__scopeTabs:s,value:a,forceMount:n,children:i,...l}=e,c=tW(t0,s),d=t2(c.baseId,a),u=t5(c.baseId,a),m=a===c.value,x=o.useRef(m);return o.useEffect(()=>{let e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(D,{present:n||m,children:({present:s})=>(0,t.jsx)(L.div,{"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!s,id:u,tabIndex:0,...l,ref:r,style:{...e.style,animationDuration:x.current?"0s":void 0},children:s&&i})})});function t2(e,t){return`${e}-trigger-${t}`}function t5(e,t){return`${e}-content-${t}`}function t4({className:e,...r}){return(0,t.jsx)(tQ,{"data-slot":"tabs",className:(0,y.cn)("flex flex-col gap-2",e),...r})}function t3({className:e,...r}){return(0,t.jsx)(tJ,{"data-slot":"tabs-list",className:(0,y.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...r})}function t6({className:e,...r}){return(0,t.jsx)(tY,{"data-slot":"tabs-trigger",className:(0,y.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function t9({className:e,...r}){return(0,t.jsx)(t1,{"data-slot":"tabs-content",className:(0,y.cn)("flex-1 outline-none",e),...r})}function t8({exerciseId:e,exerciseName:r,proofPointName:s,content:a,onSave:n,onComplete:i,onExit:l}){let[x,h]=(0,o.useState)("upload"),[p,f]=(0,o.useState)([]),[j,v]=(0,o.useState)(null),[g,N]=(0,o.useState)(null),y=async()=>{h("analyzing"),setTimeout(()=>{let e={themes:[{name:"Problema Principal",frequency:8,quotes:["Quote 1","Quote 2"]},{name:"Solución Propuesta",frequency:6,quotes:["Quote 3"]},{name:"Willingness to Pay",frequency:5,quotes:["Quote 4","Quote 5"]}],matrix:[{problem:"Gestión de inventario",p1:!0,p2:!1,p3:!0},{problem:"Costos operativos",p1:!0,p2:!0,p3:!1}]};v(e),N(e),h("results")},2e3)};return(0,t.jsxs)(b,{exerciseId:e,exerciseName:r,exerciseDescription:a.descripcion,proofPointName:s,totalSteps:3,currentStep:"upload"===x?1:"analyzing"===x?2:3,onSave:n,onComplete:"results"===x?i:void 0,onExit:l,showAIAssistant:!1,children:["upload"===x&&(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{children:"Paso 1: Cargar Datos para Análisis"})}),(0,t.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-12 text-center",children:[(0,t.jsx)(tp,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Arrastra archivos aquí o haz click para seleccionar"}),(0,t.jsx)("input",{type:"file",multiple:!0,accept:".txt,.pdf,.doc,.docx",onChange:e=>{var t;(t=e.target.files)&&f(Array.from(t))},className:"hidden",id:"file-upload"}),(0,t.jsx)(c.Button,{asChild:!0,variant:"outline",children:(0,t.jsx)("label",{htmlFor:"file-upload",className:"cursor-pointer",children:"Seleccionar Archivos"})})]}),p.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"font-medium mb-2",children:["Archivos Cargados (",p.length,")"]}),(0,t.jsx)("div",{className:"space-y-2",children:p.map((e,r)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(tn,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm",children:e.name})]}),(0,t.jsxs)(m.Badge,{variant:"secondary",children:[(e.size/1024).toFixed(1)," KB"]})]},r))})]}),(0,t.jsxs)(c.Button,{onClick:y,disabled:0===p.length,className:"w-full",size:"lg",children:[(0,t.jsx)(tj.BarChart3,{className:"h-5 w-5 mr-2"}),"Analizar con IA"]})]})]})}),"analyzing"===x&&(0,t.jsx)(d.Card,{children:(0,t.jsx)(d.CardContent,{className:"py-12",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"inline-block h-16 w-16 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"}),(0,t.jsx)("h3",{className:"text-xl font-semibold",children:"Analizando tus datos..."}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Esto puede tomar hasta 30 segundos"}),(0,t.jsx)(u.Progress,{value:66,className:"w-64 mx-auto"})]})})}),"results"===x&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(d.Card,{className:"bg-yellow-50 border-yellow-200",children:(0,t.jsx)(d.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(S.CheckCircle2,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Análisis Completo"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Revisa, edita y valida los resultados antes de exportar"})]})]})})}),(0,t.jsxs)(t4,{defaultValue:"themes",children:[(0,t.jsxs)(t3,{children:[(0,t.jsx)(t6,{value:"themes",children:"Temas Identificados"}),(0,t.jsx)(t6,{value:"matrix",children:"Matriz de Problemas"}),(0,t.jsx)(t6,{value:"quotes",children:"Citas Destacadas"})]}),(0,t.jsx)(t9,{value:"themes",className:"space-y-4",children:j?.themes.map((e,r)=>(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(d.CardTitle,{className:"text-lg",children:e.name}),(0,t.jsxs)(m.Badge,{children:[e.frequency," menciones"]})]})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h5",{className:"text-sm font-medium",children:"Citas representativas:"}),e.quotes.map((e,r)=>(0,t.jsxs)("p",{className:"text-sm text-muted-foreground italic border-l-2 pl-3",children:['"',e,'"']},r))]})})]},r))}),(0,t.jsx)(t9,{value:"matrix",children:(0,t.jsx)(d.Card,{children:(0,t.jsx)(d.CardContent,{className:"p-6",children:(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Matriz de análisis cruzado (implementación pendiente)"})})})}),(0,t.jsx)(t9,{value:"quotes",children:(0,t.jsx)(d.Card,{children:(0,t.jsx)(d.CardContent,{className:"p-6",children:(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Citas destacadas organizadas por tema (implementación pendiente)"})})})})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(c.Button,{onClick:()=>{let e=new Blob([JSON.stringify(g,null,2)],{type:"application/json"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="analysis-results.json",r.click()},variant:"outline",className:"flex-1",children:[(0,t.jsx)(tf,{className:"h-4 w-4 mr-2"}),"Exportar Resultados"]}),(0,t.jsx)(c.Button,{onClick:()=>h("upload"),variant:"outline",children:"Nuevo Análisis"})]})]})]})}t1.displayName=t0;let t7=(0,i.default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function re({exerciseId:e,exerciseName:r,proofPointName:s,content:a,onSave:n,onComplete:i,onExit:l}){let[u,m]=(0,o.useState)({}),[x,h]=(0,o.useState)([]),[p,f]=(0,o.useState)(0),[j,v]=(0,o.useState)(!1),g=async()=>{v(!0),setTimeout(()=>{h([{id:1,title:"Variante A",content:"Contenido generado A"},{id:2,title:"Variante B",content:"Contenido generado B"},{id:3,title:"Variante C",content:"Contenido generado C"}]),v(!1)},2e3)};return(0,t.jsx)(b,{exerciseId:e,exerciseName:r,proofPointName:s,onSave:n,onComplete:i,onExit:l,children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{children:"Información Base"})}),(0,t.jsxs)(d.CardContent,{className:"space-y-4",children:[a.promptsIniciales.map((e,r)=>(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:e}),(0,t.jsx)(C.Textarea,{value:u[`p${r}`]||"",onChange:e=>m({...u,[`p${r}`]:e.target.value}),placeholder:"Escribe aquí..."})]},r)),(0,t.jsxs)(c.Button,{onClick:g,disabled:j,className:"w-full",children:[(0,t.jsx)(N.Sparkles,{className:"h-4 w-4 mr-2"}),j?"Generando...":"Generar Variantes con IA"]})]})]}),x.length>0&&(0,t.jsx)("div",{className:"grid md:grid-cols-3 gap-4",children:x.map((e,r)=>(0,t.jsxs)(d.Card,{className:p===r?"border-primary":"",onClick:()=>f(r),children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{className:"text-lg",children:e.title})}),(0,t.jsxs)(d.CardContent,{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.content}),(0,t.jsxs)(c.Button,{size:"sm",variant:"outline",className:"mt-4 w-full",children:[(0,t.jsx)(t7,{className:"h-4 w-4 mr-2"}),"Seleccionar y Editar"]})]})]},e.id))})]})})}function rt({exerciseId:e,exerciseName:r,proofPointName:s,content:a,onSave:n,onComplete:i,onExit:l}){let[c,u]=(0,o.useState)({});return(0,t.jsx)(b,{exerciseId:e,exerciseName:r,proofPointName:s,onSave:n,onComplete:i,onExit:l,children:(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(tx.TrendingUp,{className:"h-5 w-5"}),"Registro de Métricas"]})}),(0,t.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Métrica 1"}),(0,t.jsx)(tr,{type:"number",value:c.m1||"",onChange:e=>u({...c,m1:Number(e.target.value)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Métrica 2"}),(0,t.jsx)(tr,{type:"number",value:c.m2||"",onChange:e=>u({...c,m2:Number(e.target.value)})})]})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sistema de tracking de métricas con gráficas (implementación completa pendiente)"})]})]})})}function rr({exerciseId:e,exerciseName:r,proofPointName:s,content:a,onSave:n,onComplete:i,onExit:l}){return(0,t.jsx)(b,{exerciseId:e,exerciseName:r,proofPointName:s,onSave:n,onComplete:i,onExit:l,showAIAssistant:!0,children:(0,t.jsxs)(d.Card,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(S.CheckCircle2,{className:"h-5 w-5 text-primary"}),(0,t.jsx)("h3",{className:"font-semibold",children:"Herramienta de Revisión"})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Player de revisión con feedback IA (implementación completa pendiente)"})]})})}let rs=(0,i.default)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);function ra({exerciseId:e,exerciseName:r,proofPointName:s,content:a,onSave:n,onComplete:i,onExit:l}){return(0,t.jsx)(b,{exerciseId:e,exerciseName:r,proofPointName:s,onSave:n,onComplete:i,onExit:l,children:(0,t.jsxs)(d.Card,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(rs,{className:"h-5 w-5 text-primary"}),(0,t.jsx)("h3",{className:"font-semibold",children:"Simulador de Entorno"})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Simulador interactivo de escenarios (implementación completa pendiente)"})]})})}var rn=e.i(48048);function ri({exerciseId:e,exerciseName:r,proofPointName:s,content:a,onSave:n,onComplete:i,onExit:l}){return(0,t.jsx)(b,{exerciseId:e,exerciseName:r,proofPointName:s,onSave:n,onComplete:i,onExit:l,children:(0,t.jsxs)(d.Card,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(rn.Award,{className:"h-5 w-5 text-primary"}),(0,t.jsx)("h3",{className:"font-semibold",children:"Sistema de Progresión"})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Visualización de badges y logros (implementación completa pendiente)"})]})})}function rl(){let e=(0,r.useParams)(),i=(0,r.useRouter)(),o=e.exerciseId,{data:c,error:d,isLoading:u}=(0,s.default)(o?`exercise-${o}`:null,()=>a.exercisesApi.getById(o)),m=async e=>{try{await a.exercisesApi.saveProgress(o,e),n.toast.success("Progreso guardado exitosamente")}catch(e){throw console.error("Error saving progress:",e),n.toast.error("Error al guardar el progreso"),e}},x=async e=>{try{let t=await a.exercisesApi.complete(o,e);n.toast.success("¡Ejercicio completado! 🎉"),t.nextExerciseId?i.push(`/exercises/${t.nextExerciseId}`):t.proofPointCompleted?(n.toast.success("¡Proof Point completado! 🌟"),i.push("/dashboard")):i.push(`/proof-points/${c?.proofPointId}`)}catch(e){throw console.error("Error completing exercise:",e),n.toast.error("Error al completar el ejercicio"),e}},h=()=>{c?.proofPointId?i.push(`/proof-points/${c.proofPointId}`):i.push("/dashboard")};if(u)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(l,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Cargando ejercicio..."})]})});if(d||!c)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-destructive mb-4",children:"Error al cargar el ejercicio"}),(0,t.jsx)("button",{onClick:()=>i.push("/dashboard"),className:"text-primary hover:underline",children:"Volver al Dashboard"})]})});let p={exerciseId:c.id,exerciseName:c.nombre,proofPointName:c.proofPointName,content:c.content,savedData:c.savedData,onSave:m,onComplete:x,onExit:h};switch(c.tipo){case"leccion_interactiva":return(0,t.jsx)(tt,{...p});case"cuaderno_trabajo":return(0,t.jsx)(ti,{...p});case"simulacion_interaccion":return(0,t.jsx)(td,{...p});case"mentor_ia":return(0,t.jsx)(th,{...p});case"herramienta_analisis":return(0,t.jsx)(t8,{...p});case"herramienta_creacion":return(0,t.jsx)(re,{...p});case"sistema_tracking":return(0,t.jsx)(rt,{...p});case"herramienta_revision":return(0,t.jsx)(rr,{...p});case"simulador_entorno":return(0,t.jsx)(ra,{...p});case"sistema_progresion":return(0,t.jsx)(ri,{...p});default:return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("p",{className:"text-destructive mb-4",children:["Tipo de ejercicio no soportado: ",c.tipo]}),(0,t.jsx)("button",{onClick:h,className:"text-primary hover:underline",children:"Volver"})]})})}}e.s(["default",()=>rl],5172)}]);