module.exports=[21825,a=>{"use strict";var b=a.i(17188),c=a.i(70935),d=a.i(19227);a.i(72712);var e=a.i(73357),f=a.i(9606),g=a.i(61237);let h=(0,g.default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var i=a.i(68407),j=a.i(40695),k=a.i(3130),l=a.i(2150),m=a.i(54161),n=a.i(60493),o=a.i(46886);let p=(0,g.default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),q=(0,g.default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),r=(0,g.default)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var s=a.i(82634);let t=(0,g.default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var u=a.i(28980),v=a.i(97895);function w({exerciseId:a,exerciseName:c,exerciseDescription:d,proofPointName:e,totalSteps:f=1,currentStep:g=1,estimatedMinutes:h,onSave:w,onComplete:x,onPrevious:y,onNext:z,onExit:A,children:B,showAIAssistant:C=!1,aiContext:D}){let[E,F]=(0,i.useState)(!1),[G,H]=(0,i.useState)(!1),[I,J]=(0,i.useState)(!1),[K,L]=(0,i.useState)([]),[M,N]=(0,i.useState)(""),O=g/f*100,P=g===f,Q=async()=>{if(w){F(!0);try{await w({})}finally{F(!1)}}},R=async()=>{if(x){H(!0);try{await x({})}finally{H(!1)}}},S=async()=>{M.trim()&&(N(""),L(a=>[...a,{role:"user",content:M}]),setTimeout(()=>{L(a=>[...a,{role:"assistant",content:"Estoy aquí para ayudarte. ¿Qué necesitas?"}])},1e3))};return(0,b.jsxs)("div",{className:"flex h-screen flex-col bg-background",children:[(0,b.jsxs)("header",{className:"sticky top-0 z-10 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:[(0,b.jsxs)("div",{className:"container flex h-16 items-center justify-between px-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(j.Button,{variant:"ghost",size:"icon",onClick:A,children:(0,b.jsx)(t,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("h1",{className:"text-lg font-semibold",children:c}),f>1&&(0,b.jsxs)(m.Badge,{variant:"secondary",children:["Paso ",g," de ",f]})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:e})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[h&&(0,b.jsxs)(m.Badge,{variant:"outline",children:["⏱ ",h," min"]}),C&&(0,b.jsxs)(j.Button,{variant:"outline",size:"sm",onClick:()=>J(!I),className:(0,v.cn)(I&&"bg-primary/10"),children:[(0,b.jsx)(u.Sparkles,{className:"h-4 w-4 mr-2"}),"Asistente IA"]}),(0,b.jsx)(j.Button,{variant:"outline",size:"sm",onClick:Q,disabled:E||!w,children:E?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r,{className:"h-4 w-4 mr-2 animate-spin"}),"Guardando..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q,{className:"h-4 w-4 mr-2"}),"Guardar"]})})]})]}),(0,b.jsx)(l.Progress,{value:O,className:"h-1 rounded-none"})]}),(0,b.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,b.jsx)("div",{className:(0,v.cn)("flex-1 overflow-y-auto",I&&"lg:mr-96"),children:(0,b.jsxs)("div",{className:"container max-w-4xl py-8 px-4",children:[d&&(0,b.jsx)(k.Card,{className:"mb-6 p-4 bg-muted/50",children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:d})}),B]})}),C&&I&&(0,b.jsxs)("aside",{className:"fixed right-0 top-16 bottom-16 w-96 border-l bg-background overflow-hidden flex flex-col",children:[(0,b.jsxs)("div",{className:"p-4 border-b",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,b.jsx)(u.Sparkles,{className:"h-4 w-4 text-primary"}),"Asistente IA"]}),(0,b.jsx)(j.Button,{variant:"ghost",size:"icon",onClick:()=>J(!1),children:(0,b.jsx)(t,{className:"h-4 w-4"})})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Pregúntame cualquier cosa sobre este ejercicio"})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[0===K.length&&(0,b.jsx)("div",{className:"text-center text-sm text-muted-foreground py-8",children:"Haz una pregunta para comenzar"}),K.map((a,c)=>(0,b.jsx)("div",{className:(0,v.cn)("flex gap-2","user"===a.role?"justify-end":"justify-start"),children:(0,b.jsx)("div",{className:(0,v.cn)("rounded-lg px-4 py-2 max-w-[80%]","user"===a.role?"bg-primary text-primary-foreground":"bg-muted"),children:(0,b.jsx)("p",{className:"text-sm",children:a.content})})},c))]}),(0,b.jsx)("div",{className:"p-4 border-t",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",placeholder:"Escribe tu pregunta...",value:M,onChange:a=>N(a.target.value),onKeyPress:a=>"Enter"===a.key&&S(),className:"flex-1 px-3 py-2 text-sm border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"}),(0,b.jsx)(j.Button,{size:"sm",onClick:S,children:(0,b.jsx)(s.MessageSquare,{className:"h-4 w-4"})})]})})]})]}),(0,b.jsx)("footer",{className:"sticky bottom-0 z-10 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,b.jsxs)("div",{className:"container flex h-16 items-center justify-between px-4",children:[(0,b.jsxs)(j.Button,{variant:"outline",onClick:y,disabled:!y,children:[(0,b.jsx)(n.ChevronLeft,{className:"h-4 w-4 mr-2"}),"Anterior"]}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:[Math.round(O),"% completado"]}),P?(0,b.jsx)(j.Button,{onClick:R,disabled:G||!x,children:G?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r,{className:"h-4 w-4 mr-2 animate-spin"}),"Completando..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p,{className:"h-4 w-4 mr-2"}),"Completar"]})}):(0,b.jsxs)(j.Button,{onClick:z,disabled:!z,children:["Siguiente",(0,b.jsx)(o.ChevronRight,{className:"h-4 w-4 ml-2"})]})]})})]})}a.i(46470);var x=a.i(46893),y=a.i(85102);a.i(76929);var z=a.i(65604),A=a.i(69964);let B=new Map,C=a=>{if(B.has(a))return;let b=setTimeout(()=>{B.delete(a),function(a){E=((a,b)=>{switch(b.type){case"ADD_TOAST":return{...a,toasts:[b.toast,...a.toasts].slice(0,1)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(a=>a.id===b.toast.id?{...a,...b.toast}:a)};case"DISMISS_TOAST":{let{toastId:c}=b;return c?C(c):a.toasts.forEach(a=>{C(a.id)}),{...a,toasts:a.toasts.map(a=>a.id===c||void 0===c?{...a,open:!1}:a)}}case"REMOVE_TOAST":if(void 0===b.toastId)return{...a,toasts:[]};return{...a,toasts:a.toasts.filter(a=>a.id!==b.toastId)}}})(E,a),D.forEach(a=>{a(E)})}({type:"REMOVE_TOAST",toastId:a})},1e6);B.set(a,b)},D=[],E={toasts:[]};var F=a.i(17988);function G(a,c=[]){let d=[],e=()=>{let b=d.map(a=>i.createContext(a));return function(c){let d=c?.[a]||b;return i.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return e.scopeName=a,[function(c,e){let f=i.createContext(e),g=d.length;d=[...d,e];let h=c=>{let{scope:d,children:e,...h}=c,j=d?.[a]?.[g]||f,k=i.useMemo(()=>h,Object.values(h));return(0,b.jsx)(j.Provider,{value:k,children:e})};return h.displayName=c+"Provider",[h,function(b,d){let h=d?.[a]?.[g]||f,j=i.useContext(h);if(j)return j;if(void 0!==e)return e;throw Error(`\`${b}\` must be used within \`${c}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return i.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(e,...c)]}function H(a,b,{checkForDefaultPrevented:c=!0}={}){return function(d){if(a?.(d),!1===c||!d.defaultPrevented)return b?.(d)}}var I=a.i(37276);i[" useEffectEvent ".trim().toString()],i[" useInsertionEffect ".trim().toString()];var J=i[" useInsertionEffect ".trim().toString()]||I.useLayoutEffect;function K({prop:a,defaultProp:b,onChange:c=()=>{},caller:d}){let[e,f,g]=function({defaultProp:a,onChange:b}){let[c,d]=i.useState(a),e=i.useRef(c),f=i.useRef(b);return J(()=>{f.current=b},[b]),i.useEffect(()=>{e.current!==c&&(f.current?.(c),e.current=c)},[c,e]),[c,d,f]}({defaultProp:b,onChange:c}),h=void 0!==a,j=h?a:e;{let b=i.useRef(void 0!==a);i.useEffect(()=>{let a=b.current;if(a!==h){let b=h?"controlled":"uncontrolled";console.warn(`${d} is changing from ${a?"controlled":"uncontrolled"} to ${b}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}b.current=h},[h,d])}return[j,i.useCallback(b=>{if(h){let c="function"==typeof b?b(a):b;c!==a&&g.current?.(c)}else f(b)},[h,a,f,g])]}Symbol("RADIX:SYNC_STATE");var L=a=>{var b;let c,d,{present:e,children:f}=a,g=function(a){var b,c;let[d,e]=i.useState(),f=i.useRef(null),g=i.useRef(a),h=i.useRef("none"),[j,k]=(b=a?"mounted":"unmounted",c={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},i.useReducer((a,b)=>c[a][b]??a,b));return i.useEffect(()=>{let a=M(f.current);h.current="mounted"===j?a:"none"},[j]),(0,I.useLayoutEffect)(()=>{let b=f.current,c=g.current;if(c!==a){let d=h.current,e=M(b);a?k("MOUNT"):"none"===e||b?.display==="none"?k("UNMOUNT"):c&&d!==e?k("ANIMATION_OUT"):k("UNMOUNT"),g.current=a}},[a,k]),(0,I.useLayoutEffect)(()=>{if(d){let a,b=d.ownerDocument.defaultView??window,c=c=>{let e=M(f.current).includes(CSS.escape(c.animationName));if(c.target===d&&e&&(k("ANIMATION_END"),!g.current)){let c=d.style.animationFillMode;d.style.animationFillMode="forwards",a=b.setTimeout(()=>{"forwards"===d.style.animationFillMode&&(d.style.animationFillMode=c)})}},e=a=>{a.target===d&&(h.current=M(f.current))};return d.addEventListener("animationstart",e),d.addEventListener("animationcancel",c),d.addEventListener("animationend",c),()=>{b.clearTimeout(a),d.removeEventListener("animationstart",e),d.removeEventListener("animationcancel",c),d.removeEventListener("animationend",c)}}k("ANIMATION_END")},[d,k]),{isPresent:["mounted","unmountSuspended"].includes(j),ref:i.useCallback(a=>{f.current=a?getComputedStyle(a):null,e(a)},[])}}(e),h="function"==typeof f?f({present:g.isPresent}):i.Children.only(f),j=(0,F.useComposedRefs)(g.ref,(b=h,(d=(c=Object.getOwnPropertyDescriptor(b.props,"ref")?.get)&&"isReactWarning"in c&&c.isReactWarning)?b.ref:(d=(c=Object.getOwnPropertyDescriptor(b,"ref")?.get)&&"isReactWarning"in c&&c.isReactWarning)?b.props.ref:b.props.ref||b.ref));return"function"==typeof f||g.isPresent?i.cloneElement(h,{ref:j}):null};function M(a){return a?.animationName||"none"}function N(a){var c;let d,e=(c=a,(d=i.forwardRef((a,b)=>{let{children:c,...d}=a;if(i.isValidElement(c)){var e;let a,f,g=(e=c,(f=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(f=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),h=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==i.Fragment&&(h.ref=b?(0,F.composeRefs)(b,g):g),i.cloneElement(c,h)}return i.Children.count(c)>1?i.Children.only(null):null})).displayName=`${c}.SlotClone`,d),f=i.forwardRef((a,c)=>{let{children:d,...f}=a,g=i.Children.toArray(d),h=g.find(P);if(h){let a=h.props.children,d=g.map(b=>b!==h?b:i.Children.count(a)>1?i.Children.only(null):i.isValidElement(a)?a.props.children:null);return(0,b.jsx)(e,{...f,ref:c,children:i.isValidElement(a)?i.cloneElement(a,void 0,d):null})}return(0,b.jsx)(e,{...f,ref:c,children:d})});return f.displayName=`${a}.Slot`,f}L.displayName="Presence",a.i(48377);var O=Symbol("radix.slottable");function P(a){return i.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===O}var Q=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,c)=>{let d=N(`Primitive.${c}`),e=i.forwardRef((a,e)=>{let{asChild:f,...g}=a;return(0,b.jsx)(f?d:c,{...g,ref:e})});return e.displayName=`Primitive.${c}`,{...a,[c]:e}},{}),R="Checkbox",[S,T]=G(R),[U,V]=S(R);function W(a){let{__scopeCheckbox:c,checked:d,children:e,defaultChecked:f,disabled:g,form:h,name:j,onCheckedChange:k,required:l,value:m="on",internal_do_not_use_render:n}=a,[o,p]=K({prop:d,defaultProp:f??!1,onChange:k,caller:R}),[q,r]=i.useState(null),[s,t]=i.useState(null),u=i.useRef(!1),v=!q||!!h||!!q.closest("form"),w={checked:o,disabled:g,setChecked:p,control:q,setControl:r,name:j,form:h,value:m,hasConsumerStoppedPropagationRef:u,required:l,defaultChecked:!ac(f)&&f,isFormControl:v,bubbleInput:s,setBubbleInput:t};return(0,b.jsx)(U,{scope:c,...w,children:"function"==typeof n?n(w):e})}var X="CheckboxTrigger",Y=i.forwardRef(({__scopeCheckbox:a,onKeyDown:c,onClick:d,...e},f)=>{let{control:g,value:h,disabled:j,checked:k,required:l,setControl:m,setChecked:n,hasConsumerStoppedPropagationRef:o,isFormControl:p,bubbleInput:q}=V(X,a),r=(0,F.useComposedRefs)(f,m),s=i.useRef(k);return i.useEffect(()=>{let a=g?.form;if(a){let b=()=>n(s.current);return a.addEventListener("reset",b),()=>a.removeEventListener("reset",b)}},[g,n]),(0,b.jsx)(Q.button,{type:"button",role:"checkbox","aria-checked":ac(k)?"mixed":k,"aria-required":l,"data-state":ad(k),"data-disabled":j?"":void 0,disabled:j,value:h,...e,ref:r,onKeyDown:H(c,a=>{"Enter"===a.key&&a.preventDefault()}),onClick:H(d,a=>{n(a=>!!ac(a)||!a),q&&p&&(o.current=a.isPropagationStopped(),o.current||a.stopPropagation())})})});Y.displayName=X;var Z=i.forwardRef((a,c)=>{let{__scopeCheckbox:d,name:e,checked:f,defaultChecked:g,required:h,disabled:i,value:j,onCheckedChange:k,form:l,...m}=a;return(0,b.jsx)(W,{__scopeCheckbox:d,checked:f,defaultChecked:g,disabled:i,required:h,onCheckedChange:k,name:e,form:l,value:j,internal_do_not_use_render:({isFormControl:a})=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Y,{...m,ref:c,__scopeCheckbox:d}),a&&(0,b.jsx)(ab,{__scopeCheckbox:d})]})})});Z.displayName=R;var $="CheckboxIndicator",_=i.forwardRef((a,c)=>{let{__scopeCheckbox:d,forceMount:e,...f}=a,g=V($,d);return(0,b.jsx)(L,{present:e||ac(g.checked)||!0===g.checked,children:(0,b.jsx)(Q.span,{"data-state":ad(g.checked),"data-disabled":g.disabled?"":void 0,...f,ref:c,style:{pointerEvents:"none",...a.style}})})});_.displayName=$;var aa="CheckboxBubbleInput",ab=i.forwardRef(({__scopeCheckbox:a,...c},d)=>{let e,{control:f,hasConsumerStoppedPropagationRef:g,checked:h,defaultChecked:j,required:k,disabled:l,name:m,value:n,form:o,bubbleInput:p,setBubbleInput:q}=V(aa,a),r=(0,F.useComposedRefs)(d,q),s=(e=i.useRef({value:h,previous:h}),i.useMemo(()=>(e.current.value!==h&&(e.current.previous=e.current.value,e.current.value=h),e.current.previous),[h])),t=function(a){let[b,c]=i.useState(void 0);return(0,I.useLayoutEffect)(()=>{if(a){c({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let d,e;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;d=b.inlineSize,e=b.blockSize}else d=a.offsetWidth,e=a.offsetHeight;c({width:d,height:e})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}c(void 0)},[a]),b}(f);i.useEffect(()=>{if(!p)return;let a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,b=!g.current;if(s!==h&&a){let c=new Event("click",{bubbles:b});p.indeterminate=ac(h),a.call(p,!ac(h)&&h),p.dispatchEvent(c)}},[p,s,h,g]);let u=i.useRef(!ac(h)&&h);return(0,b.jsx)(Q.input,{type:"checkbox","aria-hidden":!0,defaultChecked:j??u.current,required:k,disabled:l,name:m,value:n,form:o,...c,tabIndex:-1,ref:r,style:{...c.style,...t,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function ac(a){return"indeterminate"===a}function ad(a){return ac(a)?"indeterminate":a?"checked":"unchecked"}function ae({className:a,...c}){return(0,b.jsx)(Z,{"data-slot":"checkbox",className:(0,v.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...c,children:(0,b.jsx)(_,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,b.jsx)(p,{className:"size-3.5"})})})}function af(a,b,{checkForDefaultPrevented:c=!0}={}){return function(d){if(a?.(d),!1===c||!d.defaultPrevented)return b?.(d)}}ab.displayName=aa;var ag=a.i(3100);function ah(a,c=[]){let d=[],e=()=>{let b=d.map(a=>i.createContext(a));return function(c){let d=c?.[a]||b;return i.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return e.scopeName=a,[function(c,e){let f=i.createContext(e),g=d.length;d=[...d,e];let h=c=>{let{scope:d,children:e,...h}=c,j=d?.[a]?.[g]||f,k=i.useMemo(()=>h,Object.values(h));return(0,b.jsx)(j.Provider,{value:k,children:e})};return h.displayName=c+"Provider",[h,function(b,d){let h=d?.[a]?.[g]||f,j=i.useContext(h);if(j)return j;if(void 0!==e)return e;throw Error(`\`${b}\` must be used within \`${c}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return i.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(e,...c)]}var ai=a.i(77299),aj=a.i(10803),ak=globalThis?.document?i.useLayoutEffect:()=>{},al=i["useId".toString()]||(()=>void 0),am=0;function an(a){let b=i.useRef(a);return i.useEffect(()=>{b.current=a}),i.useMemo(()=>(...a)=>b.current?.(...a),[])}function ao({prop:a,defaultProp:b,onChange:c=()=>{}}){let[d,e]=function({defaultProp:a,onChange:b}){let c=i.useState(a),[d]=c,e=i.useRef(d),f=an(b);return i.useEffect(()=>{e.current!==d&&(f(d),e.current=d)},[d,e,f]),c}({defaultProp:b,onChange:c}),f=void 0!==a,g=f?a:d,h=an(c);return[g,i.useCallback(b=>{if(f){let c="function"==typeof b?b(a):b;c!==a&&h(c)}else e(b)},[f,a,e,h])]}var ap=i.createContext(void 0);function aq(a){let b=i.useContext(ap);return a||b||"ltr"}var ar="rovingFocusGroup.onEntryFocus",as={bubbles:!1,cancelable:!0},at="RovingFocusGroup",[au,av,aw]=function(a){let c=a+"CollectionProvider",[d,e]=ah(c),[f,g]=d(c,{collectionRef:{current:null},itemMap:new Map}),h=a=>{let{scope:c,children:d}=a,e=i.default.useRef(null),g=i.default.useRef(new Map).current;return(0,b.jsx)(f,{scope:c,itemMap:g,collectionRef:e,children:d})};h.displayName=c;let j=a+"CollectionSlot",k=i.default.forwardRef((a,c)=>{let{scope:d,children:e}=a,f=g(j,d),h=(0,ag.useComposedRefs)(c,f.collectionRef);return(0,b.jsx)(aj.Slot,{ref:h,children:e})});k.displayName=j;let l=a+"CollectionItemSlot",m="data-radix-collection-item",n=i.default.forwardRef((a,c)=>{let{scope:d,children:e,...f}=a,h=i.default.useRef(null),j=(0,ag.useComposedRefs)(c,h),k=g(l,d);return i.default.useEffect(()=>(k.itemMap.set(h,{ref:h,...f}),()=>void k.itemMap.delete(h))),(0,b.jsx)(aj.Slot,{...{[m]:""},ref:j,children:e})});return n.displayName=l,[{Provider:h,Slot:k,ItemSlot:n},function(b){let c=g(a+"CollectionConsumer",b);return i.default.useCallback(()=>{let a=c.collectionRef.current;if(!a)return[];let b=Array.from(a.querySelectorAll(`[${m}]`));return Array.from(c.itemMap.values()).sort((a,c)=>b.indexOf(a.ref.current)-b.indexOf(c.ref.current))},[c.collectionRef,c.itemMap])},e]}(at),[ax,ay]=ah(at,[aw]),[az,aA]=ax(at),aB=i.forwardRef((a,c)=>(0,b.jsx)(au.Provider,{scope:a.__scopeRovingFocusGroup,children:(0,b.jsx)(au.Slot,{scope:a.__scopeRovingFocusGroup,children:(0,b.jsx)(aC,{...a,ref:c})})}));aB.displayName=at;var aC=i.forwardRef((a,c)=>{let{__scopeRovingFocusGroup:d,orientation:e,loop:f=!1,dir:g,currentTabStopId:h,defaultCurrentTabStopId:j,onCurrentTabStopIdChange:k,onEntryFocus:l,preventScrollOnEntryFocus:m=!1,...n}=a,o=i.useRef(null),p=(0,ag.useComposedRefs)(c,o),q=aq(g),[r=null,s]=ao({prop:h,defaultProp:j,onChange:k}),[t,u]=i.useState(!1),v=an(l),w=av(d),x=i.useRef(!1),[y,z]=i.useState(0);return i.useEffect(()=>{let a=o.current;if(a)return a.addEventListener(ar,v),()=>a.removeEventListener(ar,v)},[v]),(0,b.jsx)(az,{scope:d,orientation:e,dir:q,loop:f,currentTabStopId:r,onItemFocus:i.useCallback(a=>s(a),[s]),onItemShiftTab:i.useCallback(()=>u(!0),[]),onFocusableItemAdd:i.useCallback(()=>z(a=>a+1),[]),onFocusableItemRemove:i.useCallback(()=>z(a=>a-1),[]),children:(0,b.jsx)(ai.Primitive.div,{tabIndex:t||0===y?-1:0,"data-orientation":e,...n,ref:p,style:{outline:"none",...a.style},onMouseDown:af(a.onMouseDown,()=>{x.current=!0}),onFocus:af(a.onFocus,a=>{let b=!x.current;if(a.target===a.currentTarget&&b&&!t){let b=new CustomEvent(ar,as);if(a.currentTarget.dispatchEvent(b),!b.defaultPrevented){let a=w().filter(a=>a.focusable);aG([a.find(a=>a.active),a.find(a=>a.id===r),...a].filter(Boolean).map(a=>a.ref.current),m)}}x.current=!1}),onBlur:af(a.onBlur,()=>u(!1))})})}),aD="RovingFocusGroupItem",aE=i.forwardRef((a,c)=>{let{__scopeRovingFocusGroup:d,focusable:e=!0,active:f=!1,tabStopId:g,...h}=a,j=function(a){let[b,c]=i.useState(al());return ak(()=>{c(a=>a??String(am++))},[void 0]),b?`radix-${b}`:""}(),k=g||j,l=aA(aD,d),m=l.currentTabStopId===k,n=av(d),{onFocusableItemAdd:o,onFocusableItemRemove:p}=l;return i.useEffect(()=>{if(e)return o(),()=>p()},[e,o,p]),(0,b.jsx)(au.ItemSlot,{scope:d,id:k,focusable:e,active:f,children:(0,b.jsx)(ai.Primitive.span,{tabIndex:m?0:-1,"data-orientation":l.orientation,...h,ref:c,onMouseDown:af(a.onMouseDown,a=>{e?l.onItemFocus(k):a.preventDefault()}),onFocus:af(a.onFocus,()=>l.onItemFocus(k)),onKeyDown:af(a.onKeyDown,a=>{if("Tab"===a.key&&a.shiftKey)return void l.onItemShiftTab();if(a.target!==a.currentTarget)return;let b=function(a,b,c){var d;let e=(d=a.key,"rtl"!==c?d:"ArrowLeft"===d?"ArrowRight":"ArrowRight"===d?"ArrowLeft":d);if(!("vertical"===b&&["ArrowLeft","ArrowRight"].includes(e))&&!("horizontal"===b&&["ArrowUp","ArrowDown"].includes(e)))return aF[e]}(a,l.orientation,l.dir);if(void 0!==b){if(a.metaKey||a.ctrlKey||a.altKey||a.shiftKey)return;a.preventDefault();let e=n().filter(a=>a.focusable).map(a=>a.ref.current);if("last"===b)e.reverse();else if("prev"===b||"next"===b){var c,d;"prev"===b&&e.reverse();let f=e.indexOf(a.currentTarget);e=l.loop?(c=e,d=f+1,c.map((a,b)=>c[(d+b)%c.length])):e.slice(f+1)}setTimeout(()=>aG(e))}})})})});aE.displayName=aD;var aF={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function aG(a,b=!1){let c=document.activeElement;for(let d of a)if(d===c||(d.focus({preventScroll:b}),document.activeElement!==c))return}var aH=a=>{var b;let c,d,{present:e,children:f}=a,g=function(a){var b,c;let[d,e]=i.useState(),f=i.useRef({}),g=i.useRef(a),h=i.useRef("none"),[j,k]=(b=a?"mounted":"unmounted",c={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},i.useReducer((a,b)=>c[a][b]??a,b));return i.useEffect(()=>{let a=aI(f.current);h.current="mounted"===j?a:"none"},[j]),ak(()=>{let b=f.current,c=g.current;if(c!==a){let d=h.current,e=aI(b);a?k("MOUNT"):"none"===e||b?.display==="none"?k("UNMOUNT"):c&&d!==e?k("ANIMATION_OUT"):k("UNMOUNT"),g.current=a}},[a,k]),ak(()=>{if(d){let a,b=d.ownerDocument.defaultView??window,c=c=>{let e=aI(f.current).includes(c.animationName);if(c.target===d&&e&&(k("ANIMATION_END"),!g.current)){let c=d.style.animationFillMode;d.style.animationFillMode="forwards",a=b.setTimeout(()=>{"forwards"===d.style.animationFillMode&&(d.style.animationFillMode=c)})}},e=a=>{a.target===d&&(h.current=aI(f.current))};return d.addEventListener("animationstart",e),d.addEventListener("animationcancel",c),d.addEventListener("animationend",c),()=>{b.clearTimeout(a),d.removeEventListener("animationstart",e),d.removeEventListener("animationcancel",c),d.removeEventListener("animationend",c)}}k("ANIMATION_END")},[d,k]),{isPresent:["mounted","unmountSuspended"].includes(j),ref:i.useCallback(a=>{a&&(f.current=getComputedStyle(a)),e(a)},[])}}(e),h="function"==typeof f?f({present:g.isPresent}):i.Children.only(f),j=(0,ag.useComposedRefs)(g.ref,(b=h,(d=(c=Object.getOwnPropertyDescriptor(b.props,"ref")?.get)&&"isReactWarning"in c&&c.isReactWarning)?b.ref:(d=(c=Object.getOwnPropertyDescriptor(b,"ref")?.get)&&"isReactWarning"in c&&c.isReactWarning)?b.props.ref:b.props.ref||b.ref));return"function"==typeof f||g.isPresent?i.cloneElement(h,{ref:j}):null};function aI(a){return a?.animationName||"none"}aH.displayName="Presence";var aJ="Radio",[aK,aL]=ah(aJ),[aM,aN]=aK(aJ),aO=i.forwardRef((a,c)=>{let{__scopeRadio:d,name:e,checked:f=!1,required:g,disabled:h,value:j="on",onCheck:k,form:l,...m}=a,[n,o]=i.useState(null),p=(0,ag.useComposedRefs)(c,a=>o(a)),q=i.useRef(!1),r=!n||l||!!n.closest("form");return(0,b.jsxs)(aM,{scope:d,checked:f,disabled:h,children:[(0,b.jsx)(ai.Primitive.button,{type:"button",role:"radio","aria-checked":f,"data-state":aS(f),"data-disabled":h?"":void 0,disabled:h,value:j,...m,ref:p,onClick:af(a.onClick,a=>{f||k?.(),r&&(q.current=a.isPropagationStopped(),q.current||a.stopPropagation())})}),r&&(0,b.jsx)(aR,{control:n,bubbles:!q.current,name:e,value:j,checked:f,required:g,disabled:h,form:l,style:{transform:"translateX(-100%)"}})]})});aO.displayName=aJ;var aP="RadioIndicator",aQ=i.forwardRef((a,c)=>{let{__scopeRadio:d,forceMount:e,...f}=a,g=aN(aP,d);return(0,b.jsx)(aH,{present:e||g.checked,children:(0,b.jsx)(ai.Primitive.span,{"data-state":aS(g.checked),"data-disabled":g.disabled?"":void 0,...f,ref:c})})});aQ.displayName=aP;var aR=a=>{let c,{control:d,checked:e,bubbles:f=!0,...g}=a,h=i.useRef(null),j=(c=i.useRef({value:e,previous:e}),i.useMemo(()=>(c.current.value!==e&&(c.current.previous=c.current.value,c.current.value=e),c.current.previous),[e])),k=function(a){let[b,c]=i.useState(void 0);return ak(()=>{if(a){c({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let d,e;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;d=b.inlineSize,e=b.blockSize}else d=a.offsetWidth,e=a.offsetHeight;c({width:d,height:e})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}c(void 0)},[a]),b}(d);return i.useEffect(()=>{let a=h.current,b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(j!==e&&b){let c=new Event("click",{bubbles:f});b.call(a,e),a.dispatchEvent(c)}},[j,e,f]),(0,b.jsx)("input",{type:"radio","aria-hidden":!0,defaultChecked:e,...g,tabIndex:-1,ref:h,style:{...a.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function aS(a){return a?"checked":"unchecked"}var aT=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],aU="RadioGroup",[aV,aW]=ah(aU,[ay,aL]),aX=ay(),aY=aL(),[aZ,a$]=aV(aU),a_=i.forwardRef((a,c)=>{let{__scopeRadioGroup:d,name:e,defaultValue:f,value:g,required:h=!1,disabled:i=!1,orientation:j,dir:k,loop:l=!0,onValueChange:m,...n}=a,o=aX(d),p=aq(k),[q,r]=ao({prop:g,defaultProp:f,onChange:m});return(0,b.jsx)(aZ,{scope:d,name:e,required:h,disabled:i,value:q,onValueChange:r,children:(0,b.jsx)(aB,{asChild:!0,...o,orientation:j,dir:p,loop:l,children:(0,b.jsx)(ai.Primitive.div,{role:"radiogroup","aria-required":h,"aria-orientation":j,"data-disabled":i?"":void 0,dir:p,...n,ref:c})})})});a_.displayName=aU;var a0="RadioGroupItem",a1=i.forwardRef((a,c)=>{let{__scopeRadioGroup:d,disabled:e,...f}=a,g=a$(a0,d),h=g.disabled||e,j=aX(d),k=aY(d),l=i.useRef(null),m=(0,ag.useComposedRefs)(c,l),n=g.value===f.value,o=i.useRef(!1);return i.useEffect(()=>{let a=a=>{aT.includes(a.key)&&(o.current=!0)},b=()=>o.current=!1;return document.addEventListener("keydown",a),document.addEventListener("keyup",b),()=>{document.removeEventListener("keydown",a),document.removeEventListener("keyup",b)}},[]),(0,b.jsx)(aE,{asChild:!0,...j,focusable:!h,active:n,children:(0,b.jsx)(aO,{disabled:h,required:g.required,checked:n,...k,...f,name:g.name,ref:m,onCheck:()=>g.onValueChange(f.value),onKeyDown:af(a=>{"Enter"===a.key&&a.preventDefault()}),onFocus:af(f.onFocus,()=>{o.current&&l.current?.click()})})})});a1.displayName=a0;var a2=i.forwardRef((a,c)=>{let{__scopeRadioGroup:d,...e}=a,f=aY(d);return(0,b.jsx)(aQ,{...f,...e,ref:c})});a2.displayName="RadioGroupIndicator";let a3=(0,g.default)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),a4=i.forwardRef(({className:a,...c},d)=>(0,b.jsx)(a_,{className:(0,v.cn)("grid gap-2",a),...c,ref:d}));a4.displayName=a_.displayName;let a5=i.forwardRef(({className:a,...c},d)=>(0,b.jsx)(a1,{ref:d,className:(0,v.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...c,children:(0,b.jsx)(a2,{className:"flex items-center justify-center",children:(0,b.jsx)(a3,{className:"h-2.5 w-2.5 fill-current text-current"})})}));a5.displayName=a1.displayName;var a6=a.i(72949),a7=i.forwardRef((a,c)=>(0,b.jsx)(a6.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));function a8({className:a,...c}){return(0,b.jsx)(a7,{"data-slot":"label",className:(0,v.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a7.displayName="Label";var a9=a.i(7379);let ba=(0,g.default)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);function bb({exerciseId:a,exerciseName:c,proofPointName:d,content:e,onSave:f,onComplete:g,onExit:h}){let[l,n]=(0,i.useState)(0),[o,p]=(0,i.useState)(new Set),[q,r]=(0,i.useState)({}),[s,t]=(0,i.useState)(!1),u=e.secciones.length+ +!!e.quiz,x=l===e.secciones.length&&e.quiz;o.size,e.secciones.length;let z=()=>{l<u-1&&n(l+1)},B=()=>{if(!e.quiz)return 0;let a=0;return e.quiz.forEach((b,c)=>{let d=q[c];Array.isArray(b.respuesta_correcta)?JSON.stringify(d?.sort())===JSON.stringify(b.respuesta_correcta.sort())&&a++:d===b.respuesta_correcta&&a++}),Math.round(a/e.quiz.length*100)};return(0,b.jsx)(w,{exerciseId:a,exerciseName:c,exerciseDescription:e.objetivos.join(" • "),proofPointName:d,totalSteps:u,currentStep:l+1,onSave:f,onComplete:g,onPrevious:l>0?()=>{l>0&&n(l-1)}:void 0,onNext:l<u-1&&!x?z:void 0,onExit:h,showAIAssistant:!0,children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center gap-2 flex-wrap",children:Array.from({length:u}).map((a,c)=>(0,b.jsxs)(j.Button,{variant:l===c?"default":"outline",size:"sm",onClick:()=>n(c),className:"relative",children:[o.has(c)&&(0,b.jsx)(A.CheckCircle2,{className:"h-4 w-4 absolute -top-1 -right-1 text-green-600"}),c<e.secciones.length?`Secci\xf3n ${c+1}`:"Quiz"]},c))}),(0,b.jsx)(a9.Separator,{}),!x&&e.secciones[l]&&(0,b.jsxs)(b.Fragment,{children:[((a,c)=>{switch(a.tipo){case"texto":return(0,b.jsxs)("div",{className:"prose prose-lg max-w-none",children:[a.titulo&&(0,b.jsx)("h3",{children:a.titulo}),(0,b.jsx)("p",{className:"text-foreground/90 leading-relaxed",children:a.contenido})]});case"video":return(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)(k.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(ba,{className:"h-5 w-5"}),a.titulo||"Video"]})}),(0,b.jsx)(k.CardContent,{children:(0,b.jsx)("div",{className:"aspect-video bg-muted rounded-lg flex items-center justify-center",children:a.url?(0,b.jsx)("iframe",{src:a.url,className:"w-full h-full rounded-lg",allowFullScreen:!0}):(0,b.jsxs)("p",{className:"text-muted-foreground",children:["Video: ",a.contenido]})})})]});case"imagen":return(0,b.jsx)(k.Card,{children:(0,b.jsxs)(k.CardContent,{className:"p-4",children:[a.url?(0,b.jsx)("img",{src:a.url,alt:a.titulo||a.contenido,className:"w-full rounded-lg"}):(0,b.jsx)("div",{className:"aspect-video bg-muted rounded-lg flex items-center justify-center",children:(0,b.jsxs)("p",{className:"text-muted-foreground",children:["Imagen: ",a.contenido]})}),a.titulo&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-2 text-center",children:a.titulo})]})});case"lista":return(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsx)(k.CardTitle,{children:a.titulo||"Puntos Clave"})}),(0,b.jsx)(k.CardContent,{children:(0,b.jsx)("ul",{className:"space-y-2",children:(a.items||[]).map((a,c)=>(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)(A.CheckCircle2,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0"}),(0,b.jsx)("span",{children:a})]},c))})})]});case"concepto_clave":return(0,b.jsxs)(k.Card,{className:"border-primary/50 bg-primary/5",children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)(k.CardTitle,{className:"flex items-center gap-2 text-primary",children:[(0,b.jsx)(y.BookOpen,{className:"h-5 w-5"}),"Concepto Clave"]})}),(0,b.jsx)(k.CardContent,{children:(0,b.jsx)("p",{className:"text-lg font-medium",children:a.contenido})})]});default:return(0,b.jsx)("p",{children:a.contenido})}})(e.secciones[l],0),!o.has(l)&&(0,b.jsxs)(j.Button,{onClick:()=>{p(a=>new Set([...a,l])),z()},className:"w-full",size:"lg",children:[(0,b.jsx)(A.CheckCircle2,{className:"h-5 w-5 mr-2"}),"Marcar como Completada"]})]}),x&&(e.quiz?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(k.Card,{className:"border-primary/50 bg-primary/5",children:(0,b.jsxs)(k.CardContent,{className:"p-6",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Evaluación de Comprensión"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Responde las siguientes preguntas para verificar tu comprensión de la lección"})]})}),e.quiz.map((a,c)=>(0,b.jsxs)(k.Card,{children:[(0,b.jsxs)(k.CardHeader,{children:[(0,b.jsxs)(k.CardTitle,{className:"text-lg",children:["Pregunta ",c+1," de ",e.quiz.length]}),(0,b.jsx)("p",{className:"text-foreground/90",children:a.pregunta})]}),(0,b.jsxs)(k.CardContent,{children:["multiple_choice"===a.tipo&&(0,b.jsx)(a4,{value:q[c],onValueChange:a=>r({...q,[c]:a}),disabled:s,children:a.opciones.map((d,e)=>{let f=d===a.respuesta_correcta,g=q[c]===d;return(0,b.jsxs)("div",{className:(0,v.cn)("flex items-center space-x-2 rounded-lg border p-4 transition-colors",s&&f&&"border-green-500 bg-green-50",s&&g&&!f&&"border-red-500 bg-red-50"),children:[(0,b.jsx)(a5,{value:d,id:`q${c}-o${e}`}),(0,b.jsx)(a8,{htmlFor:`q${c}-o${e}`,className:"flex-1 cursor-pointer",children:d}),s&&f&&(0,b.jsx)(A.CheckCircle2,{className:"h-5 w-5 text-green-600"})]},e)})}),"checkbox"===a.tipo&&(0,b.jsx)("div",{className:"space-y-2",children:a.opciones.map((d,e)=>{let f=a.respuesta_correcta.includes(d),g=q[c]?.includes(d);return(0,b.jsxs)("div",{className:(0,v.cn)("flex items-center space-x-2 rounded-lg border p-4",s&&f&&"border-green-500 bg-green-50",s&&g&&!f&&"border-red-500 bg-red-50"),children:[(0,b.jsx)(ae,{id:`q${c}-o${e}`,checked:q[c]?.includes(d)||!1,onCheckedChange:a=>{let b=q[c]||[],e=a?[...b,d]:b.filter(a=>a!==d);r({...q,[c]:e})},disabled:s}),(0,b.jsx)(a8,{htmlFor:`q${c}-o${e}`,className:"flex-1 cursor-pointer",children:d})]},e)})}),s&&a.explicacion&&(0,b.jsx)("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,b.jsxs)("p",{className:"text-sm",children:[(0,b.jsx)("strong",{children:"Explicación:"})," ",a.explicacion]})})]})]},c)),!s&&(0,b.jsx)(j.Button,{onClick:()=>{t(!0),p(a=>new Set([...a,l]))},size:"lg",className:"w-full",children:"Enviar Respuestas"}),s&&(0,b.jsx)(k.Card,{className:"border-primary",children:(0,b.jsx)(k.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)("h3",{className:"text-2xl font-bold mb-2",children:["Tu puntuación: ",B(),"%"]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:B()>=70?"¡Excelente! Has demostrado un buen entendimiento de la lección":"Revisa los conceptos clave y vuelve a intentarlo"})]})})})]}):null),!x&&e.conceptos_clave&&e.conceptos_clave.length>0&&(0,b.jsxs)(k.Card,{className:"mt-8 border-primary/30 bg-primary/5",children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsx)(k.CardTitle,{children:"Conceptos Clave de Esta Lección"})}),(0,b.jsx)(k.CardContent,{children:(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:e.conceptos_clave.map((a,c)=>(0,b.jsx)(m.Badge,{variant:"secondary",className:"text-sm",children:a},c))})})]})]})})}function bc({className:a,type:c,...d}){return(0,b.jsx)("input",{type:c,"data-slot":"input",className:(0,v.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...d})}let bd=(0,g.default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),be=(0,g.default)("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),bf=(0,g.default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);function bg({exerciseId:a,exerciseName:c,proofPointName:d,content:e,initialResponses:f={},onSave:g,onComplete:h,onExit:l}){let[n,o]=(0,i.useState)(0),[p,q]=(0,i.useState)(f),[r,s]=(0,i.useState)(new Set),t=e.secciones.length,u=e.secciones[n],y=(a,b)=>`s${a}_p${b}`,z=(a,b,c)=>{let d=y(a,b);q(a=>({...a,[d]:c}))},B=(a,b)=>p[y(a,b)]||"",C=a=>e.secciones[a].prompts.every((b,c)=>{let d=B(a,c);return"lista"===b.tipo?Array.isArray(d)&&d.length>0:d&&d.toString().trim().length>0}),D=()=>Math.round(u.prompts.filter((a,b)=>{let c=B(n,b);return c&&c.toString().trim().length>0}).length/u.prompts.length*100),E=async()=>{await g(p)},F=async()=>{C(n)&&s(a=>new Set([...a,n])),await h(p)};return(0,b.jsx)(w,{exerciseId:a,exerciseName:c,exerciseDescription:e.objetivo,proofPointName:d,totalSteps:t,currentStep:n+1,estimatedMinutes:e.tiempo_sugerido,onSave:E,onComplete:F,onPrevious:n>0?()=>{n>0&&o(n-1)}:void 0,onNext:n<t-1?()=>{n<t-1&&(C(n)&&s(a=>new Set([...a,n])),o(n+1))}:void 0,onExit:l,showAIAssistant:!0,children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(k.Card,{className:"border-primary/30 bg-primary/5",children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)(k.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(bf,{className:"h-5 w-5"}),"Contexto"]})}),(0,b.jsx)(k.CardContent,{children:(0,b.jsx)("p",{className:"text-foreground/90",children:e.contexto})})]}),(0,b.jsx)("div",{className:"flex items-center gap-2 flex-wrap",children:e.secciones.map((a,c)=>(0,b.jsxs)(j.Button,{variant:n===c?"default":"outline",size:"sm",onClick:()=>o(c),className:"relative",children:[r.has(c)?(0,b.jsx)(A.CheckCircle2,{className:"h-4 w-4 mr-2 text-green-600"}):(0,b.jsx)(a3,{className:"h-4 w-4 mr-2"}),"Sección ",c+1]},c))}),(0,b.jsx)(a9.Separator,{}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-2",children:u.titulo}),u.descripcion&&(0,b.jsx)("p",{className:"text-muted-foreground",children:u.descripcion})]}),(0,b.jsx)(k.Card,{className:"bg-blue-50 border-blue-200",children:(0,b.jsx)(k.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(bd,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,b.jsx)("p",{className:"text-sm",children:u.instrucciones})]})})}),(0,b.jsx)("div",{className:"space-y-6",children:u.prompts.map((a,c)=>(0,b.jsx)(k.Card,{children:(0,b.jsx)(k.CardContent,{className:"p-6",children:((a,c)=>{let d=B(n,c);switch(a.tipo){case"texto_corto":return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:a.pregunta}),a.guia&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:a.guia})]}),(0,b.jsx)(bc,{placeholder:a.placeholder||"Escribe tu respuesta...",value:d,onChange:a=>z(n,c,a.target.value),className:"text-base"})]});case"texto_largo":case"reflexion":let e=(d||"").trim().split(/\s+/).filter(a=>a.length>0).length,f=a.min_palabras||0,g=a.max_palabras||1e3,h=e>=f&&e<=g;return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:a.pregunta}),a.guia&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:a.guia})]}),(0,b.jsx)(x.Textarea,{placeholder:a.placeholder||"Desarrolla tu respuesta aquí...",value:d,onChange:a=>z(n,c,a.target.value),className:"min-h-[200px] text-base"}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("span",{className:(0,v.cn)("text-muted-foreground",!h&&"text-orange-600"),children:[e," palabras",f>0&&` (m\xednimo ${f})`]}),a.ejemplos&&a.ejemplos.length>0&&(0,b.jsxs)(j.Button,{variant:"ghost",size:"sm",onClick:()=>{},children:[(0,b.jsx)(be,{className:"h-4 w-4 mr-2"}),"Ver ejemplos"]})]})]});case"lista":let i=d||[""];return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:a.pregunta}),a.guia&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:a.guia})]}),(0,b.jsx)("div",{className:"space-y-2",children:i.map((a,d)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("span",{className:"text-sm text-muted-foreground w-6",children:[d+1,"."]}),(0,b.jsx)(bc,{placeholder:"Escribe un ítem...",value:a,onChange:a=>{let b=[...i];b[d]=a.target.value,z(n,c,b)}}),d===i.length-1&&(0,b.jsx)(j.Button,{variant:"outline",size:"sm",onClick:()=>{z(n,c,[...i,""])},children:"+"})]},d))})]});case"tabla":let k=d||[["",""]];return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:a.pregunta}),a.guia&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:a.guia})]}),(0,b.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-muted",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"p-3 text-left text-sm font-medium",children:"Columna 1"}),(0,b.jsx)("th",{className:"p-3 text-left text-sm font-medium",children:"Columna 2"}),(0,b.jsx)("th",{className:"p-3 w-12"})]})}),(0,b.jsx)("tbody",{children:k.map((a,d)=>(0,b.jsxs)("tr",{className:"border-t",children:[(0,b.jsx)("td",{className:"p-2",children:(0,b.jsx)(bc,{value:a[0],onChange:a=>{let b=[...k];b[d][0]=a.target.value,z(n,c,b)},placeholder:"..."})}),(0,b.jsx)("td",{className:"p-2",children:(0,b.jsx)(bc,{value:a[1],onChange:a=>{let b=[...k];b[d][1]=a.target.value,z(n,c,b)},placeholder:"..."})}),(0,b.jsx)("td",{className:"p-2",children:d===k.length-1&&(0,b.jsx)(j.Button,{variant:"ghost",size:"sm",onClick:()=>{z(n,c,[...k,["",""]])},children:"+"})})]},d))})]})})]});default:return null}})(a,c)})},c))}),(0,b.jsx)(k.Card,{className:"border-dashed",children:(0,b.jsx)(k.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Progreso de la sección"}),(0,b.jsxs)(m.Badge,{variant:100===D()?"default":"secondary",children:[D(),"% completado"]})]})})})]}),e.criterios_evaluacion&&e.criterios_evaluacion.length>0&&(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsx)(k.CardTitle,{className:"text-lg",children:"Criterios de Evaluación"})}),(0,b.jsx)(k.CardContent,{children:(0,b.jsx)("ul",{className:"space-y-2",children:e.criterios_evaluacion.map((a,c)=>(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)(A.CheckCircle2,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0"}),(0,b.jsx)("span",{className:"text-sm",children:a})]},c))})})]})]})})}var bh=a.i(7706);let bi=(0,g.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),bj=(0,g.default)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);function bk({exerciseId:a,exerciseName:c,proofPointName:d,content:e,onSave:f,onComplete:g,onExit:h}){let[l,n]=(0,i.useState)([{id:"initial",role:"system",content:e.situacion_inicial,timestamp:new Date}]),[o,p]=(0,i.useState)(""),[q,t]=(0,i.useState)(!1),[u,y]=(0,i.useState)(!0),[B,C]=(0,i.useState)(!1),[D,E]=(0,i.useState)(new Set),F=(0,i.useRef)(null),G=(0,i.useRef)(null);(0,i.useEffect)(()=>{F.current?.scrollIntoView({behavior:"smooth"})},[l]);let H=async()=>{if(!o.trim()||q)return;let a={id:`user-${Date.now()}`,role:"user",content:o.trim(),timestamp:new Date};n(b=>[...b,a]),p(""),t(!0),setTimeout(()=>{let a={id:`ai-${Date.now()}`,role:"assistant",content:`[Respuesta de ${e.personaje_ia.nombre}] Entiendo tu punto. Como ${e.personaje_ia.rol}, mi perspectiva es...`,timestamp:new Date};Math.random()>.5&&(a.feedback={tipo:Math.random()>.3?"positivo":"mejora",mensaje:Math.random()>.3?"Excelente enfoque. Estás demostrando empatía y escucha activa.":"Considera reformular tu mensaje para ser más específico."}),n(b=>[...b,a]),t(!1),I(l.length+2)},1500)},I=a=>{let b=new Set(D);a>=4&&b.add(0),a>=8&&b.add(1),a>=12&&b.add(2),E(b),b.size>=e.criterios_exito.length&&C(!0)},J=async()=>{await f({messages:l,successCriteriaMet:Array.from(D),conversationComplete:B})},K=async()=>{await g({messages:l,successCriteriaMet:Array.from(D),conversationComplete:B})};return(0,b.jsx)(w,{exerciseId:a,exerciseName:c,exerciseDescription:e.descripcion,proofPointName:d,totalSteps:1,currentStep:1,estimatedMinutes:e.tiempo_sugerido,onSave:J,onComplete:B?K:void 0,onExit:h,showAIAssistant:!1,children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(k.Card,{className:"border-primary/30 bg-primary/5",children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)(k.CardTitle,{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(s.MessageSquare,{className:"h-5 w-5"}),e.titulo]}),(0,b.jsx)("p",{className:"text-sm text-foreground/80",children:e.descripcion})]}),(0,b.jsx)(m.Badge,{className:(()=>{switch(e.nivel_dificultad){case"principiante":return"bg-green-500";case"intermedio":return"bg-yellow-500";case"avanzado":return"bg-red-500";default:return"bg-gray-500"}})(),children:e.nivel_dificultad})]})}),(0,b.jsx)(k.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-semibold mb-1",children:"Tu Objetivo:"}),(0,b.jsx)("p",{className:"text-sm text-foreground/90",children:e.objetivo_estudiante})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-background rounded-lg border",children:[(0,b.jsx)(bh.Avatar,{children:(0,b.jsx)(bh.AvatarFallback,{children:(0,b.jsx)(bj,{className:"h-5 w-5"})})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium text-sm",children:e.personaje_ia.nombre}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.personaje_ia.rol," • ",e.personaje_ia.tono]})]})]})]})})]}),u&&(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(k.CardTitle,{className:"text-lg",children:"Criterios de Éxito"}),(0,b.jsx)(j.Button,{variant:"ghost",size:"sm",onClick:()=>y(!1),children:"Ocultar"})]})}),(0,b.jsx)(k.CardContent,{children:(0,b.jsx)("ul",{className:"space-y-2",children:e.criterios_exito.map((a,c)=>(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[D.has(c)?(0,b.jsx)(A.CheckCircle2,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}):(0,b.jsx)("div",{className:"h-5 w-5 rounded-full border-2 mt-0.5 flex-shrink-0"}),(0,b.jsx)("span",{className:(0,v.cn)("text-sm",D.has(c)&&"text-muted-foreground line-through"),children:a})]},c))})})]}),(0,b.jsxs)(k.Card,{className:"border-2",children:[(0,b.jsx)(k.CardHeader,{className:"border-b bg-muted/50",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(s.MessageSquare,{className:"h-5 w-5 text-primary"}),(0,b.jsx)("span",{className:"font-semibold",children:"Conversación"}),(0,b.jsxs)(m.Badge,{variant:"outline",children:[l.filter(a=>"system"!==a.role).length," mensajes"]})]}),(0,b.jsxs)(j.Button,{variant:"outline",size:"sm",onClick:()=>{n([{id:"initial",role:"system",content:e.situacion_inicial,timestamp:new Date}]),C(!1),E(new Set)},children:[(0,b.jsx)(r,{className:"h-4 w-4 mr-2"}),"Reiniciar"]})]})}),(0,b.jsxs)(k.CardContent,{className:"p-0",children:[(0,b.jsxs)("div",{className:"h-[500px] overflow-y-auto p-4 space-y-4",children:[l.map(a=>(0,b.jsx)("div",{children:"system"===a.role?(0,b.jsx)("div",{className:"bg-muted/50 rounded-lg p-4 border-l-4 border-primary",children:(0,b.jsx)("p",{className:"text-sm italic",children:a.content})}):(0,b.jsxs)("div",{className:(0,v.cn)("flex gap-3","user"===a.role?"justify-end":"justify-start"),children:["assistant"===a.role&&(0,b.jsx)(bh.Avatar,{className:"h-8 w-8",children:(0,b.jsx)(bh.AvatarFallback,{className:"bg-primary/10",children:(0,b.jsx)(bj,{className:"h-4 w-4 text-primary"})})}),(0,b.jsxs)("div",{className:(0,v.cn)("max-w-[70%] space-y-2","user"===a.role&&"items-end"),children:[(0,b.jsx)("div",{className:(0,v.cn)("rounded-lg p-3","user"===a.role?"bg-primary text-primary-foreground":"bg-muted"),children:(0,b.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:a.content})}),a.feedback&&(0,b.jsx)("div",{className:(0,v.cn)("text-xs p-2 rounded border-l-2","positivo"===a.feedback.tipo&&"bg-green-50 border-green-500 text-green-900","mejora"===a.feedback.tipo&&"bg-orange-50 border-orange-500 text-orange-900","neutral"===a.feedback.tipo&&"bg-blue-50 border-blue-500 text-blue-900"),children:(0,b.jsxs)("div",{className:"flex items-start gap-1",children:[(0,b.jsx)(be,{className:"h-3 w-3 mt-0.5"}),(0,b.jsx)("span",{children:a.feedback.mensaje})]})})]}),"user"===a.role&&(0,b.jsx)(bh.Avatar,{className:"h-8 w-8",children:(0,b.jsx)(bh.AvatarFallback,{className:"bg-muted",children:(0,b.jsx)(bi,{className:"h-4 w-4"})})})]})},a.id)),q&&(0,b.jsxs)("div",{className:"flex gap-3 justify-start",children:[(0,b.jsx)(bh.Avatar,{className:"h-8 w-8",children:(0,b.jsx)(bh.AvatarFallback,{className:"bg-primary/10",children:(0,b.jsx)(bj,{className:"h-4 w-4 text-primary"})})}),(0,b.jsx)("div",{className:"bg-muted rounded-lg p-3",children:(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)("div",{className:"h-2 w-2 bg-muted-foreground rounded-full animate-bounce"}),(0,b.jsx)("div",{className:"h-2 w-2 bg-muted-foreground rounded-full animate-bounce delay-100"}),(0,b.jsx)("div",{className:"h-2 w-2 bg-muted-foreground rounded-full animate-bounce delay-200"})]})})]}),(0,b.jsx)("div",{ref:F})]}),(0,b.jsxs)("div",{className:"border-t p-4",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(x.Textarea,{ref:G,placeholder:`Escribe tu mensaje para ${e.personaje_ia.nombre}...`,value:o,onChange:a=>p(a.target.value),onKeyDown:a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),H())},disabled:q||B,className:"resize-none min-h-[80px]"}),(0,b.jsx)(j.Button,{onClick:H,disabled:!o.trim()||q||B,size:"lg",children:(0,b.jsx)(z.Send,{className:"h-5 w-5"})})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Presiona Enter para enviar, Shift+Enter para nueva línea"})]})]})]}),B&&(0,b.jsx)(k.Card,{className:"border-green-500 bg-green-50",children:(0,b.jsx)(k.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(A.CheckCircle2,{className:"h-6 w-6 text-green-600 flex-shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-semibold text-green-900 mb-1",children:"¡Simulación Completada!"}),(0,b.jsx)("p",{className:"text-sm text-green-800",children:"Has cumplido todos los criterios de éxito. Puedes continuar la conversación o completar el ejercicio."})]})]})})})]})})}let bl=(0,g.default)("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);var bm=a.i(42891),bn=a.i(99009);function bo({exerciseId:a,exerciseName:c,proofPointName:d,content:e,initialResponses:f={},onSave:g,onComplete:h,onExit:n}){let[o,p]=(0,i.useState)(0),[q,r]=(0,i.useState)(f),[t,u]=(0,i.useState)(new Set),[z,B]=(0,i.useState)(!1),[C,D]=(0,i.useState)(""),E=e.pasos[o],F=e.pasos.length,G=(a,b)=>{r(c=>({...c,[o]:{...c[o],[a]:b}}))},H=a=>q[o]?.[a]||"",I=a=>{let b=q[a];return b?.reflexion&&b.reflexion.trim().length>100},J=async()=>{B(!0),D(`Como ${e.contexto_mentor.nombre}, te sugiero que reflexiones sobre ${E.titulo.toLowerCase()}. ${E.criterio_avance}`)},K=async()=>{await g({responses:q,completedSteps:Array.from(t),currentStep:o})},L=async()=>{I(o)&&u(a=>new Set([...a,o])),await h({responses:q,completedSteps:Array.from(t),currentStep:o})},M=t.size/F*100;return(0,b.jsx)(w,{exerciseId:a,exerciseName:c,exerciseDescription:e.objetivo_general,proofPointName:d,totalSteps:F,currentStep:o+1,onSave:K,onComplete:L,onPrevious:o>0?()=>{o>0&&p(o-1)}:void 0,onNext:o<F-1&&t.has(o)?()=>{o<F-1&&p(o+1)}:void 0,onExit:n,showAIAssistant:!1,children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(k.Card,{className:"border-primary/30 bg-gradient-to-r from-primary/5 to-background",children:(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center",children:(0,b.jsx)(bl,{className:"h-6 w-6 text-primary"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(k.CardTitle,{children:e.contexto_mentor.nombre}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.contexto_mentor.especialidad}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,b.jsx)(m.Badge,{variant:"outline",children:e.contexto_mentor.estilo}),(0,b.jsx)(m.Badge,{variant:"outline",children:e.contexto_mentor.enfoque})]})]})]})})}),(0,b.jsx)(k.Card,{children:(0,b.jsx)(k.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Progreso General"}),(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:[t.size," / ",F," pasos completados"]})]}),(0,b.jsx)(l.Progress,{value:M,className:"h-2"})]})})}),(0,b.jsx)("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:e.pasos.map((a,c)=>(0,b.jsxs)(j.Button,{variant:o===c?"default":"outline",size:"sm",onClick:()=>p(c),className:(0,v.cn)("flex-shrink-0 relative",t.has(c)&&"border-green-500"),children:[t.has(c)?(0,b.jsx)(A.CheckCircle2,{className:"h-4 w-4 mr-2 text-green-600"}):(0,b.jsx)(a3,{className:"h-4 w-4 mr-2"}),"Paso ",c+1]},c))}),(0,b.jsx)(a9.Separator,{}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold",children:["Paso ",o+1,": ",E.titulo]}),(0,b.jsx)(m.Badge,{variant:t.has(o)?"default":"secondary",children:t.has(o)?"Completado":"En progreso"})]}),(0,b.jsx)(k.Card,{className:"bg-blue-50 border-blue-200",children:(0,b.jsx)(k.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(bm.Target,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,b.jsx)("p",{className:"text-sm",children:E.instruccion})]})})})]}),(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)(k.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(s.MessageSquare,{className:"h-5 w-5"}),"Pregunta de Reflexión"]})}),(0,b.jsxs)(k.CardContent,{className:"space-y-4",children:[(0,b.jsx)("p",{className:"text-foreground/90 font-medium",children:E.pregunta_reflexion}),(0,b.jsx)(x.Textarea,{placeholder:"Escribe tu reflexión aquí... (mínimo 100 palabras)",value:H("reflexion"),onChange:a=>G("reflexion",a.target.value),className:"min-h-[200px]"}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("span",{className:(0,v.cn)("text-muted-foreground",H("reflexion")?.length<100&&"text-orange-600"),children:[H("reflexion")?.length||0," caracteres",H("reflexion")?.length<100&&" (mínimo 100)"]}),(0,b.jsxs)(j.Button,{variant:"outline",size:"sm",onClick:J,children:[(0,b.jsx)(be,{className:"h-4 w-4 mr-2"}),"Pedir consejo al mentor"]})]})]})]}),z&&C&&(0,b.jsx)(k.Card,{className:"border-primary bg-primary/5",children:(0,b.jsx)(k.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(bl,{className:"h-5 w-5 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h4",{className:"font-semibold mb-2",children:[e.contexto_mentor.nombre," dice:"]}),(0,b.jsx)("p",{className:"text-sm",children:C})]})]})})}),E.recursos&&E.recursos.length>0&&(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)(k.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(y.BookOpen,{className:"h-5 w-5"}),"Recursos de Apoyo"]})}),(0,b.jsx)(k.CardContent,{children:(0,b.jsx)("div",{className:"space-y-3",children:E.recursos.map((a,c)=>(0,b.jsxs)("div",{className:(0,v.cn)("p-4 rounded-lg border-l-4","consejo"===a.tipo&&"bg-blue-50 border-blue-500","ejemplo"===a.tipo&&"bg-green-50 border-green-500","link"===a.tipo&&"bg-purple-50 border-purple-500"),children:[(0,b.jsx)("h5",{className:"font-medium text-sm mb-1",children:a.titulo}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.contenido})]},c))})})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)(k.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,b.jsx)(A.CheckCircle2,{className:"h-4 w-4"}),"Acciones Tomadas (Opcional)"]})}),(0,b.jsx)(k.CardContent,{children:(0,b.jsx)(x.Textarea,{placeholder:"¿Qué acciones has tomado o planeas tomar basándote en este paso?",value:H("acciones_tomadas")?.join("\n")||"",onChange:a=>{G("acciones_tomadas",a.target.value.split("\n").filter(a=>a.trim()))},className:"min-h-[120px]"})})]}),(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)(k.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,b.jsx)(be,{className:"h-4 w-4"}),"Aprendizajes Clave (Opcional)"]})}),(0,b.jsx)(k.CardContent,{children:(0,b.jsx)(x.Textarea,{placeholder:"¿Qué has aprendido en este paso?",value:H("aprendizajes")?.join("\n")||"",onChange:a=>{G("aprendizajes",a.target.value.split("\n").filter(a=>a.trim()))},className:"min-h-[120px]"})})]})]}),(0,b.jsx)(k.Card,{className:"border-dashed",children:(0,b.jsx)(k.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(bd,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium mb-1",children:"Para avanzar al siguiente paso:"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:E.criterio_avance})]})]})})}),!t.has(o)&&(0,b.jsxs)(j.Button,{onClick:()=>{I(o)&&(u(a=>new Set([...a,o])),o<F-1&&p(o+1))},disabled:!I(o),size:"lg",className:"w-full",children:[(0,b.jsx)(A.CheckCircle2,{className:"h-5 w-5 mr-2"}),"Completar Paso ",o+1]})]}),o===F-1&&t.has(o)&&(0,b.jsxs)(k.Card,{className:"border-primary bg-gradient-to-r from-primary/5 to-background",children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)(k.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(bn.TrendingUp,{className:"h-5 w-5"}),"Reflexión Final"]})}),(0,b.jsxs)(k.CardContent,{children:[(0,b.jsx)("p",{className:"text-foreground/90 mb-4",children:e.reflexion_final}),e.metricas_seguimiento&&e.metricas_seguimiento.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium mb-2 text-sm",children:"Métricas para dar seguimiento:"}),(0,b.jsx)("ul",{className:"space-y-1",children:e.metricas_seguimiento.map((a,c)=>(0,b.jsxs)("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[(0,b.jsx)("span",{className:"text-primary",children:"•"}),a]},c))})]})]})]})]})})}let bp=(0,g.default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),bq=(0,g.default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var br=a.i(75686),bs=new WeakMap;function bt(a,b){var c,d;let e,f,g;if("at"in Array.prototype)return Array.prototype.at.call(a,b);let h=(c=a,d=b,e=c.length,(g=(f=bu(d))>=0?f:e+f)<0||g>=e?-1:g);return -1===h?void 0:a[h]}function bu(a){return a!=a||0===a?0:Math.trunc(a)}(class a extends Map{#a;constructor(a){super(a),this.#a=[...super.keys()],bs.set(this,!0)}set(a,b){return bs.get(this)&&(this.has(a)?this.#a[this.#a.indexOf(a)]=a:this.#a.push(a)),super.set(a,b),this}insert(a,b,c){let d,e=this.has(b),f=this.#a.length,g=bu(a),h=g>=0?g:f+g,i=h<0||h>=f?-1:h;if(i===this.size||e&&i===this.size-1||-1===i)return this.set(b,c),this;let j=this.size+ +!e;g<0&&h++;let k=[...this.#a],l=!1;for(let a=h;a<j;a++)if(h===a){let f=k[a];k[a]===b&&(f=k[a+1]),e&&this.delete(b),d=this.get(f),this.set(b,c)}else{l||k[a-1]!==b||(l=!0);let c=k[l?a:a-1],e=d;d=this.get(c),this.delete(c),this.set(c,e)}return this}with(b,c,d){let e=new a(this);return e.insert(b,c,d),e}before(a){let b=this.#a.indexOf(a)-1;if(!(b<0))return this.entryAt(b)}setBefore(a,b,c){let d=this.#a.indexOf(a);return -1===d?this:this.insert(d,b,c)}after(a){let b=this.#a.indexOf(a);if(-1!==(b=-1===b||b===this.size-1?-1:b+1))return this.entryAt(b)}setAfter(a,b,c){let d=this.#a.indexOf(a);return -1===d?this:this.insert(d+1,b,c)}first(){return this.entryAt(0)}last(){return this.entryAt(-1)}clear(){return this.#a=[],super.clear()}delete(a){let b=super.delete(a);return b&&this.#a.splice(this.#a.indexOf(a),1),b}deleteAt(a){let b=this.keyAt(a);return void 0!==b&&this.delete(b)}at(a){let b=bt(this.#a,a);if(void 0!==b)return this.get(b)}entryAt(a){let b=bt(this.#a,a);if(void 0!==b)return[b,this.get(b)]}indexOf(a){return this.#a.indexOf(a)}keyAt(a){return bt(this.#a,a)}from(a,b){let c=this.indexOf(a);if(-1===c)return;let d=c+b;return d<0&&(d=0),d>=this.size&&(d=this.size-1),this.at(d)}keyFrom(a,b){let c=this.indexOf(a);if(-1===c)return;let d=c+b;return d<0&&(d=0),d>=this.size&&(d=this.size-1),this.keyAt(d)}find(a,b){let c=0;for(let d of this){if(Reflect.apply(a,b,[d,c,this]))return d;c++}}findIndex(a,b){let c=0;for(let d of this){if(Reflect.apply(a,b,[d,c,this]))return c;c++}return -1}filter(b,c){let d=[],e=0;for(let a of this)Reflect.apply(b,c,[a,e,this])&&d.push(a),e++;return new a(d)}map(b,c){let d=[],e=0;for(let a of this)d.push([a[0],Reflect.apply(b,c,[a,e,this])]),e++;return new a(d)}reduce(...a){let[b,c]=a,d=0,e=c??this.at(0);for(let c of this)e=0===d&&1===a.length?c:Reflect.apply(b,this,[e,c,d,this]),d++;return e}reduceRight(...a){let[b,c]=a,d=c??this.at(-1);for(let c=this.size-1;c>=0;c--){let e=this.at(c);d=c===this.size-1&&1===a.length?e:Reflect.apply(b,this,[d,e,c,this])}return d}toSorted(b){return new a([...this.entries()].sort(b))}toReversed(){let b=new a;for(let a=this.size-1;a>=0;a--){let c=this.keyAt(a),d=this.get(c);b.set(c,d)}return b}toSpliced(...b){let c=[...this.entries()];return c.splice(...b),new a(c)}slice(b,c){let d=new a,e=this.size-1;if(void 0===b)return d;b<0&&(b+=this.size),void 0!==c&&c>0&&(e=c-1);for(let a=b;a<=e;a++){let b=this.keyAt(a),c=this.get(b);d.set(b,c)}return d}every(a,b){let c=0;for(let d of this){if(!Reflect.apply(a,b,[d,c,this]))return!1;c++}return!0}some(a,b){let c=0;for(let d of this){if(Reflect.apply(a,b,[d,c,this]))return!0;c++}return!1}});var bv=i[" useId ".trim().toString()]||(()=>void 0),bw=0;function bx(a){let[b,c]=i.useState(bv());return(0,I.useLayoutEffect)(()=>{a||c(a=>a??String(bw++))},[a]),a||(b?`radix-${b}`:"")}var by=a.i(44293),bz=i.createContext(void 0);function bA(a){let b=i.useContext(bz);return a||b||"ltr"}var bB="rovingFocusGroup.onEntryFocus",bC={bubbles:!1,cancelable:!0},bD="RovingFocusGroup",[bE,bF,bG]=function(a){let c=a+"CollectionProvider",[d,e]=G(c),[f,g]=d(c,{collectionRef:{current:null},itemMap:new Map}),h=a=>{let{scope:c,children:d}=a,e=i.default.useRef(null),g=i.default.useRef(new Map).current;return(0,b.jsx)(f,{scope:c,itemMap:g,collectionRef:e,children:d})};h.displayName=c;let j=a+"CollectionSlot",k=N(j),l=i.default.forwardRef((a,c)=>{let{scope:d,children:e}=a,f=g(j,d),h=(0,F.useComposedRefs)(c,f.collectionRef);return(0,b.jsx)(k,{ref:h,children:e})});l.displayName=j;let m=a+"CollectionItemSlot",n="data-radix-collection-item",o=N(m),p=i.default.forwardRef((a,c)=>{let{scope:d,children:e,...f}=a,h=i.default.useRef(null),j=(0,F.useComposedRefs)(c,h),k=g(m,d);return i.default.useEffect(()=>(k.itemMap.set(h,{ref:h,...f}),()=>void k.itemMap.delete(h))),(0,b.jsx)(o,{...{[n]:""},ref:j,children:e})});return p.displayName=m,[{Provider:h,Slot:l,ItemSlot:p},function(b){let c=g(a+"CollectionConsumer",b);return i.default.useCallback(()=>{let a=c.collectionRef.current;if(!a)return[];let b=Array.from(a.querySelectorAll(`[${n}]`));return Array.from(c.itemMap.values()).sort((a,c)=>b.indexOf(a.ref.current)-b.indexOf(c.ref.current))},[c.collectionRef,c.itemMap])},e]}(bD),[bH,bI]=G(bD,[bG]),[bJ,bK]=bH(bD),bL=i.forwardRef((a,c)=>(0,b.jsx)(bE.Provider,{scope:a.__scopeRovingFocusGroup,children:(0,b.jsx)(bE.Slot,{scope:a.__scopeRovingFocusGroup,children:(0,b.jsx)(bM,{...a,ref:c})})}));bL.displayName=bD;var bM=i.forwardRef((a,c)=>{let{__scopeRovingFocusGroup:d,orientation:e,loop:f=!1,dir:g,currentTabStopId:h,defaultCurrentTabStopId:j,onCurrentTabStopIdChange:k,onEntryFocus:l,preventScrollOnEntryFocus:m=!1,...n}=a,o=i.useRef(null),p=(0,F.useComposedRefs)(c,o),q=bA(g),[r,s]=K({prop:h,defaultProp:j??null,onChange:k,caller:bD}),[t,u]=i.useState(!1),v=(0,by.useCallbackRef)(l),w=bF(d),x=i.useRef(!1),[y,z]=i.useState(0);return i.useEffect(()=>{let a=o.current;if(a)return a.addEventListener(bB,v),()=>a.removeEventListener(bB,v)},[v]),(0,b.jsx)(bJ,{scope:d,orientation:e,dir:q,loop:f,currentTabStopId:r,onItemFocus:i.useCallback(a=>s(a),[s]),onItemShiftTab:i.useCallback(()=>u(!0),[]),onFocusableItemAdd:i.useCallback(()=>z(a=>a+1),[]),onFocusableItemRemove:i.useCallback(()=>z(a=>a-1),[]),children:(0,b.jsx)(Q.div,{tabIndex:t||0===y?-1:0,"data-orientation":e,...n,ref:p,style:{outline:"none",...a.style},onMouseDown:H(a.onMouseDown,()=>{x.current=!0}),onFocus:H(a.onFocus,a=>{let b=!x.current;if(a.target===a.currentTarget&&b&&!t){let b=new CustomEvent(bB,bC);if(a.currentTarget.dispatchEvent(b),!b.defaultPrevented){let a=w().filter(a=>a.focusable);bQ([a.find(a=>a.active),a.find(a=>a.id===r),...a].filter(Boolean).map(a=>a.ref.current),m)}}x.current=!1}),onBlur:H(a.onBlur,()=>u(!1))})})}),bN="RovingFocusGroupItem",bO=i.forwardRef((a,c)=>{let{__scopeRovingFocusGroup:d,focusable:e=!0,active:f=!1,tabStopId:g,children:h,...j}=a,k=bx(),l=g||k,m=bK(bN,d),n=m.currentTabStopId===l,o=bF(d),{onFocusableItemAdd:p,onFocusableItemRemove:q,currentTabStopId:r}=m;return i.useEffect(()=>{if(e)return p(),()=>q()},[e,p,q]),(0,b.jsx)(bE.ItemSlot,{scope:d,id:l,focusable:e,active:f,children:(0,b.jsx)(Q.span,{tabIndex:n?0:-1,"data-orientation":m.orientation,...j,ref:c,onMouseDown:H(a.onMouseDown,a=>{e?m.onItemFocus(l):a.preventDefault()}),onFocus:H(a.onFocus,()=>m.onItemFocus(l)),onKeyDown:H(a.onKeyDown,a=>{if("Tab"===a.key&&a.shiftKey)return void m.onItemShiftTab();if(a.target!==a.currentTarget)return;let b=function(a,b,c){var d;let e=(d=a.key,"rtl"!==c?d:"ArrowLeft"===d?"ArrowRight":"ArrowRight"===d?"ArrowLeft":d);if(!("vertical"===b&&["ArrowLeft","ArrowRight"].includes(e))&&!("horizontal"===b&&["ArrowUp","ArrowDown"].includes(e)))return bP[e]}(a,m.orientation,m.dir);if(void 0!==b){if(a.metaKey||a.ctrlKey||a.altKey||a.shiftKey)return;a.preventDefault();let e=o().filter(a=>a.focusable).map(a=>a.ref.current);if("last"===b)e.reverse();else if("prev"===b||"next"===b){var c,d;"prev"===b&&e.reverse();let f=e.indexOf(a.currentTarget);e=m.loop?(c=e,d=f+1,c.map((a,b)=>c[(d+b)%c.length])):e.slice(f+1)}setTimeout(()=>bQ(e))}}),children:"function"==typeof h?h({isCurrentTabStop:n,hasTabStop:null!=r}):h})})});bO.displayName=bN;var bP={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function bQ(a,b=!1){let c=document.activeElement;for(let d of a)if(d===c||(d.focus({preventScroll:b}),document.activeElement!==c))return}var bR="Tabs",[bS,bT]=G(bR,[bI]),bU=bI(),[bV,bW]=bS(bR),bX=i.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,onValueChange:f,defaultValue:g,orientation:h="horizontal",dir:i,activationMode:j="automatic",...k}=a,l=bA(i),[m,n]=K({prop:e,onChange:f,defaultProp:g??"",caller:bR});return(0,b.jsx)(bV,{scope:d,baseId:bx(),value:m,onValueChange:n,orientation:h,dir:l,activationMode:j,children:(0,b.jsx)(Q.div,{dir:l,"data-orientation":h,...k,ref:c})})});bX.displayName=bR;var bY="TabsList",bZ=i.forwardRef((a,c)=>{let{__scopeTabs:d,loop:e=!0,...f}=a,g=bW(bY,d),h=bU(d);return(0,b.jsx)(bL,{asChild:!0,...h,orientation:g.orientation,dir:g.dir,loop:e,children:(0,b.jsx)(Q.div,{role:"tablist","aria-orientation":g.orientation,...f,ref:c})})});bZ.displayName=bY;var b$="TabsTrigger",b_=i.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,disabled:f=!1,...g}=a,h=bW(b$,d),i=bU(d),j=b2(h.baseId,e),k=b3(h.baseId,e),l=e===h.value;return(0,b.jsx)(bO,{asChild:!0,...i,focusable:!f,active:l,children:(0,b.jsx)(Q.button,{type:"button",role:"tab","aria-selected":l,"aria-controls":k,"data-state":l?"active":"inactive","data-disabled":f?"":void 0,disabled:f,id:j,...g,ref:c,onMouseDown:H(a.onMouseDown,a=>{f||0!==a.button||!1!==a.ctrlKey?a.preventDefault():h.onValueChange(e)}),onKeyDown:H(a.onKeyDown,a=>{[" ","Enter"].includes(a.key)&&h.onValueChange(e)}),onFocus:H(a.onFocus,()=>{let a="manual"!==h.activationMode;l||f||!a||h.onValueChange(e)})})})});b_.displayName=b$;var b0="TabsContent",b1=i.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,forceMount:f,children:g,...h}=a,j=bW(b0,d),k=b2(j.baseId,e),l=b3(j.baseId,e),m=e===j.value,n=i.useRef(m);return i.useEffect(()=>{let a=requestAnimationFrame(()=>n.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,b.jsx)(L,{present:f||m,children:({present:d})=>(0,b.jsx)(Q.div,{"data-state":m?"active":"inactive","data-orientation":j.orientation,role:"tabpanel","aria-labelledby":k,hidden:!d,id:l,tabIndex:0,...h,ref:c,style:{...a.style,animationDuration:n.current?"0s":void 0},children:d&&g})})});function b2(a,b){return`${a}-trigger-${b}`}function b3(a,b){return`${a}-content-${b}`}function b4({className:a,...c}){return(0,b.jsx)(bX,{"data-slot":"tabs",className:(0,v.cn)("flex flex-col gap-2",a),...c})}function b5({className:a,...c}){return(0,b.jsx)(bZ,{"data-slot":"tabs-list",className:(0,v.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...c})}function b6({className:a,...c}){return(0,b.jsx)(b_,{"data-slot":"tabs-trigger",className:(0,v.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...c})}function b7({className:a,...c}){return(0,b.jsx)(b1,{"data-slot":"tabs-content",className:(0,v.cn)("flex-1 outline-none",a),...c})}function b8({exerciseId:a,exerciseName:c,proofPointName:d,content:e,onSave:f,onComplete:g,onExit:h}){let[n,o]=(0,i.useState)("upload"),[p,q]=(0,i.useState)([]),[r,s]=(0,i.useState)(null),[t,u]=(0,i.useState)(null),v=async()=>{o("analyzing"),setTimeout(()=>{let a={themes:[{name:"Problema Principal",frequency:8,quotes:["Quote 1","Quote 2"]},{name:"Solución Propuesta",frequency:6,quotes:["Quote 3"]},{name:"Willingness to Pay",frequency:5,quotes:["Quote 4","Quote 5"]}],matrix:[{problem:"Gestión de inventario",p1:!0,p2:!1,p3:!0},{problem:"Costos operativos",p1:!0,p2:!0,p3:!1}]};s(a),u(a),o("results")},2e3)};return(0,b.jsxs)(w,{exerciseId:a,exerciseName:c,exerciseDescription:e.descripcion,proofPointName:d,totalSteps:3,currentStep:"upload"===n?1:"analyzing"===n?2:3,onSave:f,onComplete:"results"===n?g:void 0,onExit:h,showAIAssistant:!1,children:["upload"===n&&(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsx)(k.CardTitle,{children:"Paso 1: Cargar Datos para Análisis"})}),(0,b.jsxs)(k.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-12 text-center",children:[(0,b.jsx)(bp,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Arrastra archivos aquí o haz click para seleccionar"}),(0,b.jsx)("input",{type:"file",multiple:!0,accept:".txt,.pdf,.doc,.docx",onChange:a=>{var b;(b=a.target.files)&&q(Array.from(b))},className:"hidden",id:"file-upload"}),(0,b.jsx)(j.Button,{asChild:!0,variant:"outline",children:(0,b.jsx)("label",{htmlFor:"file-upload",className:"cursor-pointer",children:"Seleccionar Archivos"})})]}),p.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("h4",{className:"font-medium mb-2",children:["Archivos Cargados (",p.length,")"]}),(0,b.jsx)("div",{className:"space-y-2",children:p.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(bf,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-sm",children:a.name})]}),(0,b.jsxs)(m.Badge,{variant:"secondary",children:[(a.size/1024).toFixed(1)," KB"]})]},c))})]}),(0,b.jsxs)(j.Button,{onClick:v,disabled:0===p.length,className:"w-full",size:"lg",children:[(0,b.jsx)(br.BarChart3,{className:"h-5 w-5 mr-2"}),"Analizar con IA"]})]})]})}),"analyzing"===n&&(0,b.jsx)(k.Card,{children:(0,b.jsx)(k.CardContent,{className:"py-12",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("div",{className:"inline-block h-16 w-16 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"}),(0,b.jsx)("h3",{className:"text-xl font-semibold",children:"Analizando tus datos..."}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Esto puede tomar hasta 30 segundos"}),(0,b.jsx)(l.Progress,{value:66,className:"w-64 mx-auto"})]})})}),"results"===n&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(k.Card,{className:"bg-yellow-50 border-yellow-200",children:(0,b.jsx)(k.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(A.CheckCircle2,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Análisis Completo"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Revisa, edita y valida los resultados antes de exportar"})]})]})})}),(0,b.jsxs)(b4,{defaultValue:"themes",children:[(0,b.jsxs)(b5,{children:[(0,b.jsx)(b6,{value:"themes",children:"Temas Identificados"}),(0,b.jsx)(b6,{value:"matrix",children:"Matriz de Problemas"}),(0,b.jsx)(b6,{value:"quotes",children:"Citas Destacadas"})]}),(0,b.jsx)(b7,{value:"themes",className:"space-y-4",children:r?.themes.map((a,c)=>(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(k.CardTitle,{className:"text-lg",children:a.name}),(0,b.jsxs)(m.Badge,{children:[a.frequency," menciones"]})]})}),(0,b.jsx)(k.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h5",{className:"text-sm font-medium",children:"Citas representativas:"}),a.quotes.map((a,c)=>(0,b.jsxs)("p",{className:"text-sm text-muted-foreground italic border-l-2 pl-3",children:['"',a,'"']},c))]})})]},c))}),(0,b.jsx)(b7,{value:"matrix",children:(0,b.jsx)(k.Card,{children:(0,b.jsx)(k.CardContent,{className:"p-6",children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Matriz de análisis cruzado (implementación pendiente)"})})})}),(0,b.jsx)(b7,{value:"quotes",children:(0,b.jsx)(k.Card,{children:(0,b.jsx)(k.CardContent,{className:"p-6",children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Citas destacadas organizadas por tema (implementación pendiente)"})})})})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(j.Button,{onClick:()=>{let a=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),b=URL.createObjectURL(a),c=document.createElement("a");c.href=b,c.download="analysis-results.json",c.click()},variant:"outline",className:"flex-1",children:[(0,b.jsx)(bq,{className:"h-4 w-4 mr-2"}),"Exportar Resultados"]}),(0,b.jsx)(j.Button,{onClick:()=>o("upload"),variant:"outline",children:"Nuevo Análisis"})]})]})]})}b1.displayName=b0;let b9=(0,g.default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function ca({exerciseId:a,exerciseName:c,proofPointName:d,content:e,onSave:f,onComplete:g,onExit:h}){let[l,m]=(0,i.useState)({}),[n,o]=(0,i.useState)([]),[p,q]=(0,i.useState)(0),[r,s]=(0,i.useState)(!1),t=async()=>{s(!0),setTimeout(()=>{o([{id:1,title:"Variante A",content:"Contenido generado A"},{id:2,title:"Variante B",content:"Contenido generado B"},{id:3,title:"Variante C",content:"Contenido generado C"}]),s(!1)},2e3)};return(0,b.jsx)(w,{exerciseId:a,exerciseName:c,proofPointName:d,onSave:f,onComplete:g,onExit:h,children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsx)(k.CardTitle,{children:"Información Base"})}),(0,b.jsxs)(k.CardContent,{className:"space-y-4",children:[e.promptsIniciales.map((a,c)=>(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:a}),(0,b.jsx)(x.Textarea,{value:l[`p${c}`]||"",onChange:a=>m({...l,[`p${c}`]:a.target.value}),placeholder:"Escribe aquí..."})]},c)),(0,b.jsxs)(j.Button,{onClick:t,disabled:r,className:"w-full",children:[(0,b.jsx)(u.Sparkles,{className:"h-4 w-4 mr-2"}),r?"Generando...":"Generar Variantes con IA"]})]})]}),n.length>0&&(0,b.jsx)("div",{className:"grid md:grid-cols-3 gap-4",children:n.map((a,c)=>(0,b.jsxs)(k.Card,{className:p===c?"border-primary":"",onClick:()=>q(c),children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsx)(k.CardTitle,{className:"text-lg",children:a.title})}),(0,b.jsxs)(k.CardContent,{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.content}),(0,b.jsxs)(j.Button,{size:"sm",variant:"outline",className:"mt-4 w-full",children:[(0,b.jsx)(b9,{className:"h-4 w-4 mr-2"}),"Seleccionar y Editar"]})]})]},a.id))})]})})}function cb({exerciseId:a,exerciseName:c,proofPointName:d,content:e,onSave:f,onComplete:g,onExit:h}){let[j,l]=(0,i.useState)({});return(0,b.jsx)(w,{exerciseId:a,exerciseName:c,proofPointName:d,onSave:f,onComplete:g,onExit:h,children:(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)(k.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(bn.TrendingUp,{className:"h-5 w-5"}),"Registro de Métricas"]})}),(0,b.jsxs)(k.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Métrica 1"}),(0,b.jsx)(bc,{type:"number",value:j.m1||"",onChange:a=>l({...j,m1:Number(a.target.value)})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Métrica 2"}),(0,b.jsx)(bc,{type:"number",value:j.m2||"",onChange:a=>l({...j,m2:Number(a.target.value)})})]})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sistema de tracking de métricas con gráficas (implementación completa pendiente)"})]})]})})}function cc({exerciseId:a,exerciseName:c,proofPointName:d,content:e,onSave:f,onComplete:g,onExit:h}){return(0,b.jsx)(w,{exerciseId:a,exerciseName:c,proofPointName:d,onSave:f,onComplete:g,onExit:h,showAIAssistant:!0,children:(0,b.jsxs)(k.Card,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(A.CheckCircle2,{className:"h-5 w-5 text-primary"}),(0,b.jsx)("h3",{className:"font-semibold",children:"Herramienta de Revisión"})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Player de revisión con feedback IA (implementación completa pendiente)"})]})})}let cd=(0,g.default)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);function ce({exerciseId:a,exerciseName:c,proofPointName:d,content:e,onSave:f,onComplete:g,onExit:h}){return(0,b.jsx)(w,{exerciseId:a,exerciseName:c,proofPointName:d,onSave:f,onComplete:g,onExit:h,children:(0,b.jsxs)(k.Card,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(cd,{className:"h-5 w-5 text-primary"}),(0,b.jsx)("h3",{className:"font-semibold",children:"Simulador de Entorno"})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Simulador interactivo de escenarios (implementación completa pendiente)"})]})})}var cf=a.i(35340);function cg({exerciseId:a,exerciseName:c,proofPointName:d,content:e,onSave:f,onComplete:g,onExit:h}){return(0,b.jsx)(w,{exerciseId:a,exerciseName:c,proofPointName:d,onSave:f,onComplete:g,onExit:h,children:(0,b.jsxs)(k.Card,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(cf.Award,{className:"h-5 w-5 text-primary"}),(0,b.jsx)("h3",{className:"font-semibold",children:"Sistema de Progresión"})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Visualización de badges y logros (implementación completa pendiente)"})]})})}function ch(){let a=(0,c.useParams)(),g=(0,c.useRouter)(),i=a.exerciseId,{data:j,error:k,isLoading:l}=(0,d.default)(i?`exercise-${i}`:null,()=>e.exercisesApi.getById(i)),m=async a=>{try{await e.exercisesApi.saveProgress(i,a),f.toast.success("Progreso guardado exitosamente")}catch(a){throw console.error("Error saving progress:",a),f.toast.error("Error al guardar el progreso"),a}},n=async a=>{try{let b=await e.exercisesApi.complete(i,a);f.toast.success("¡Ejercicio completado! 🎉"),b.nextExerciseId?g.push(`/exercises/${b.nextExerciseId}`):b.proofPointCompleted?(f.toast.success("¡Proof Point completado! 🌟"),g.push("/dashboard")):g.push(`/proof-points/${j?.proofPointId}`)}catch(a){throw console.error("Error completing exercise:",a),f.toast.error("Error al completar el ejercicio"),a}},o=()=>{j?.proofPointId?g.push(`/proof-points/${j.proofPointId}`):g.push("/dashboard")};if(l)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(h,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Cargando ejercicio..."})]})});if(k||!j)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-destructive mb-4",children:"Error al cargar el ejercicio"}),(0,b.jsx)("button",{onClick:()=>g.push("/dashboard"),className:"text-primary hover:underline",children:"Volver al Dashboard"})]})});if(!j.content)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"El contenido del ejercicio no está disponible"}),(0,b.jsx)("button",{onClick:()=>g.push("/dashboard"),className:"text-primary hover:underline",children:"Volver al Dashboard"})]})});let p={exerciseId:j.id,exerciseName:j.nombre,proofPointName:j.proofPointName??"Proof Point",savedData:j.savedData,onSave:m,onComplete:n,onExit:o};switch(j.tipo){case"leccion_interactiva":return(0,b.jsx)(bb,{...p,content:j.content});case"cuaderno_trabajo":return(0,b.jsx)(bg,{...p,content:j.content});case"simulacion_interaccion":return(0,b.jsx)(bk,{...p,content:j.content});case"mentor_ia":return(0,b.jsx)(bo,{...p,content:j.content});case"herramienta_analisis":return(0,b.jsx)(b8,{...p,content:j.content});case"herramienta_creacion":return(0,b.jsx)(ca,{...p,content:j.content});case"sistema_tracking":return(0,b.jsx)(cb,{...p,content:j.content});case"herramienta_revision":return(0,b.jsx)(cc,{...p,content:j.content});case"simulador_entorno":return(0,b.jsx)(ce,{...p,content:j.content});case"sistema_progresion":return(0,b.jsx)(cg,{...p,content:j.content});default:return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)("p",{className:"text-destructive mb-4",children:["Tipo de ejercicio no soportado: ",j.tipo]}),(0,b.jsx)("button",{onClick:o,className:"text-primary hover:underline",children:"Volver"})]})})}}a.s(["default",()=>ch],21825)}];

//# sourceMappingURL=app_exercises_%5BexerciseId%5D_page_tsx_ff8e5998._.js.map