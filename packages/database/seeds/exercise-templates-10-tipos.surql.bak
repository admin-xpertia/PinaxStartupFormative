-- ============================================================================
-- SEED: Exercise Templates - 10 Tipos de Ejercicios Mediados por IA
-- ============================================================================
-- Este archivo contiene los 12 tipos de ejercicios con sus configuraciones
-- Ejecutar despu√©s de aplicar el schema principal
-- ============================================================================

-- 1. LECCIONES INTERACTIVAS
CREATE exercise_template:leccion_interactiva SET
  nombre = 'Lecci√≥n Interactiva',
  categoria = 'leccion_interactiva',
  descripcion = 'Transmitir conocimiento conceptual de manera activa donde el aprendiz interact√∫a con el contenido',
  objetivo_pedagogico = 'Verificar comprensi√≥n en tiempo real mediante interacci√≥n activa con el contenido',
  rol_ia = 'Facilitador de aprendizaje activo que eval√∫a respuestas, proporciona feedback explicativo, genera casos de aplicaci√≥n, contextualiza t√©rminos t√©cnicos, crea visualizaciones y adapta profundidad seg√∫n comprensi√≥n',
  configuracion_schema = {
    type: 'object',
    properties: {
      topico: { type: 'string', description: 'Tema o concepto a ense√±ar' },
      profundidad: { type: 'string', enum: ['b√°sico', 'intermedio', 'avanzado'] },
      incluir_glosario: { type: 'boolean', default: true },
      incluir_visualizaciones: { type: 'boolean', default: true },
      numero_casos_practica: { type: 'number', default: 3, minimum: 1, maximum: 10 }
    }
  },
  configuracion_default = {
    profundidad: 'intermedio',
    incluir_glosario: true,
    incluir_visualizaciones: true,
    numero_casos_practica: 3
  },
  prompt_template = 'Eres un dise√±ador instruccional experto creando una lecci√≥n interactiva estilo tutor digital.\n\nCONTEXTO DEL PROGRAMA:\nPrograma: {{programa.nombre}}\nFase: {{fase.nombre}} - {{fase.descripcion}}\nProof Point: {{proof_point.pregunta_central}}\nDocumentaci√≥n clave: {{proof_point.documentacion_contexto}}\n\nDOCUMENTACI√ìN DE LA FASE:\n{{fase_documentation}}\n\nCONSIDERACIONES DEL INSTRUCTOR:\n{{consideraciones}}\n\nCONFIGURACI√ìN:\nDuraci√≥n objetivo: {{configuracion.duracion_minutos}} minutos\nProfundidad: {{configuracion.profundidad}}\nGlosario requerido: {{configuracion.incluir_glosario}}\nN√∫mero de ejemplos: {{configuracion.numero_casos_practica}}\n\nREQUISITOS DE FORMATO:\n- Entrega todo el contenido en un solo documento Markdown.\n- Usa encabezados H2 para temas principales y H3 para subtemas.\n- Cada subsecci√≥n debe tener entre 3 y 5 p√°rrafos conectados por transiciones claras.\n- Inserta cajas de √©nfasis usando la sintaxis :::callout ... ::: para conceptos cr√≠ticos o advertencias.\n- Cada 3-4 p√°rrafos inserta una pregunta de verificaci√≥n usando un bloque ```verification { ... } ``` con el JSON descrito en el output_schema (incluye seccionId, opciones, feedback, accionChatSugerida).\n- Identifica t√©rminos t√©cnicos clave y aseg√∫rate de que aparezcan literalmente igual que en el glosario que entregar√°s.\n- Calcula metadatos (duraci√≥n, conceptos clave, dificultad) basados en el contenido generado.\n\nOUTPUT ESPERADO (JSON):\n{{output_schema}}\n\nIMPORTANTE: Devuelve √∫nicamente JSON v√°lido que siga la estructura anterior. El campo markdown debe contener todo el art√≠culo con las preguntas embebidas en los bloques ```verification```.',
  output_schema = {
    markdown: 'string (documento markdown con H2/H3, :::callout y bloques ```verification```)',
    metadata: {
      titulo: 'string',
      duracionMinutos: 'number',
      dificultad: 'principiante|intermedio|avanzado',
      conceptosClave: ['string'],
      nivelNarrativa: 'string',
      objetivoPrincipal: 'string'
    },
    glosario: [{ termino: 'string', definicion: 'string', slug: 'string' }],
    preguntasVerificacion: [{
      id: 'string',
      seccionId: 'string',
      tipo: 'multiple_choice|verdadero_falso|respuesta_corta',
      enunciado: 'string',
      opciones: [{ id: 'string', texto: 'string', esCorrecta: 'boolean' }],
      respuestaCorrecta: 'string|string[]|boolean',
      criteriosEvaluacion: ['string'],
      feedback: {
        correcto: 'string',
        incorrecto: 'string',
        porOpcion: [{
          optionId: 'string',
          feedback: 'string',
          conceptoReferencia: 'string'
        }]
      },
      accionChatSugerida: 'string'
    }],
    tracking: {
      numeroSecciones: 'number',
      palabras: 'number',
      tiempoLecturaMinutos: 'number',
      tokensEstimados: 'number'
    }
  },
  preview_config = {
    mostrar_progreso: true,
    permitir_saltos: false,
    tiempo_estimado_minutos: 15,
    demo_data: {
      markdown: '## El tamano del modelo importa, pero no como crees\n\nEl debate sobre si es mejor un modelo enorme o uno especializado ha cambiado.\n\n:::callout\nLos modelos de 13B parametros ajustados al dominio pueden superar a gigantes genericos si se entrenan con datos curados.\n:::\n\n### Restricciones del mundo real\nLos dispositivos moviles y el edge marcan limites claros...\n',
      metadata: {
        titulo: 'El tamano-rendimiento en LLMs',
        duracionMinutos: 18,
        dificultad: 'intermedio',
        conceptosClave: ['capacidad vs tamano', 'latencia', 'edge deployment'],
        nivelNarrativa: 'socratico',
        objetivoPrincipal: 'Ensenar como balancear tamano y desempeno en despliegues reales'
      },
      glosario: [
        { termino: 'latencia', definicion: 'Tiempo que tarda el modelo en responder', slug: 'latencia' },
        { termino: 'edge deployment', definicion: 'Despliegue en dispositivos al borde de la red', slug: 'edge-deployment' }
      ],
      preguntasVerificacion: [
        {
          id: 'check-tamano',
          seccionId: 'el-tamano',
          tipo: 'multiple_choice',
          enunciado: 'Por que un modelo de 13B bien ajustado puede ser mas util que uno de 175B?',
          opciones: [
            { id: 'a', texto: 'Porque siempre es mas barato', esCorrecta: false },
            { id: 'b', texto: 'Porque puede enfocarse en el dominio y reducir latencia', esCorrecta: true }
          ],
          respuestaCorrecta: ['b'],
          criteriosEvaluacion: [
            'Menciona foco en dominio',
            'Hace referencia a latencia o costos operativos'
          ],
          feedback: {
            correcto: 'Exacto, el enfoque reduce tokens y hace mas eficiente la inferencia.',
            incorrecto: 'Revisa la seccion sobre compromisos de latencia.',
            porOpcion: [
              { optionId: 'a', feedback: 'El costo ayuda, pero no es la razon principal' }
            ]
          },
          accionChatSugerida: 'No entiendo como la latencia afecta la eleccion del modelo, puedes explicarlo?'
        }
      ],
      tracking: {
        numeroSecciones: 3,
        palabras: 820,
        tiempoLecturaMinutos: 18,
        tokensEstimados: 3200
      }
    }
  },
  icono = 'üìñ',
  color = '#6366f1',
  es_oficial = true,
  activo = true,
  created_at = time::now(),
  updated_at = time::now();

-- 2. CUADERNOS DE TRABAJO
CREATE exercise_template:cuaderno_trabajo SET
  nombre = 'Cuaderno de Trabajo',
  categoria = 'cuaderno_trabajo',
  descripcion = 'Guiar al aprendiz a documentar, estructurar y reflexionar sobre su propio trabajo',
  objetivo_pedagogico = 'Proporcionar andamiaje que gradualmente se retira mientras se eval√∫a calidad y se ofrece feedback formativo',
  rol_ia = 'Editor inteligente y evaluador de proceso que analiza patrones de pensamiento, proporciona feedback en tiempo real, valida completitud y coherencia, mapea conexiones causales, identifica gaps y eval√∫a rigor del razonamiento',
  configuracion_schema = {
    type: 'object',
    properties: {
      secciones: {
        type: 'array',
        description: 'Define las secciones estructuradas del cuaderno.',
        items: {
          type: 'object',
          properties: {
            tituloSeccion: { type: 'string', description: 'T√≠tulo o Enfoque (Ej: "An√°lisis del Problema")' },
            descripcionPrompt: { type: 'string', description: 'Descripci√≥n para la IA (¬øQu√© debe preguntar la IA?)' },
            criteriosPrompt: { type: 'string', description: 'R√∫brica para la IA (¬øQu√© debe evaluar la IA?)' }
          }
        }
      }
    }
  },
  configuracion_default = {
    secciones: []
  },
  prompt_template = 'Eres un dise√±ador instruccional experto creando un cuaderno de trabajo interactivo.\n\nCONTEXTO DEL PROGRAMA:\nPrograma: {{programa.nombre}}\nFase: {{fase.nombre}} - {{fase.descripcion}}\nProof Point: {{proof_point.pregunta_central}}\nDocumentaci√≥n clave: {{proof_point.documentacion_contexto}}\n\nDOCUMENTACI√ìN DE LA FASE:\n{{fase_documentation}}\n\nCONSIDERACIONES DEL INSTRUCTOR:\n{{consideraciones}}\n\nSECCIONES DEFINIDAS POR EL INSTRUCTOR:\n{{#each configuracion.secciones}}\n\nSecci√≥n {{@index}}: {{tituloSeccion}}\n- Descripci√≥n/Objetivo: {{descripcionPrompt}}\n- Criterios de Evaluaci√≥n: {{criteriosPrompt}}\n{{/each}}\n\nCONFIGURACI√ìN:\nDuraci√≥n objetivo: {{configuracion.duracion_minutos}} minutos\n\nREQUISITOS DE FORMATO:\nPara cada secci√≥n definida por el instructor, genera preguntas espec√≠ficas (prompts) que gu√≠en al estudiante.\n\nEl contenido debe seguir esta estructura JSON:\n{\n  "titulo": string,\n  "objetivo": string,\n  "contexto": string,\n  "secciones": [{\n    "titulo": string,\n    "descripcion": string,\n    "instrucciones": string,\n    "criteriosDeEvaluacion": string[],\n    "prompts": [{\n      "tipo": "texto_corto"|"texto_largo"|"lista"|"tabla"|"reflexion",\n      "pregunta": string,\n      "guia": string,\n      "min_palabras"?: number,\n      "max_palabras"?: number,\n      "placeholder"?: string,\n      "criteriosDeEvaluacion": string[]\n    }]\n  }],\n  "criterios_evaluacion": string[],\n  "tiempo_sugerido": number\n}\n\nIMPORTANTE:\n- Cada secci√≥n del cuaderno debe corresponder a una secci√≥n definida por el instructor\n- Usa la "descripcionPrompt" para entender qu√© preguntas generar\n- Usa los "criteriosPrompt" para definir los criteriosDeEvaluacion de cada pregunta\n- Los criteriosDeEvaluacion deben ser espec√≠ficos, medibles y estar alineados con la r√∫brica definida por el instructor\n- Crea entre 2-5 prompts por secci√≥n seg√∫n su complejidad\n- Devuelve √∫nicamente JSON v√°lido',
  output_schema = {
    titulo: 'string',
    objetivo: 'string',
    contexto: 'string',
    secciones: 'array',
    criterios_evaluacion: 'array',
    tiempo_sugerido: 'number'
  },
  preview_config = {
    autoguardado: true,
    mostrar_progreso_secciones: true
  },
  icono = 'üìù',
  color = '#10b981',
  es_oficial = true,
  activo = true,
  created_at = time::now(),
  updated_at = time::now();

-- 3. SIMULACIONES DE INTERACCI√ìN
CREATE exercise_template:simulacion_interaccion SET
  nombre = 'Simulaci√≥n de Interacci√≥n',
  categoria = 'simulacion_interaccion',
  descripcion = 'Pr√°ctica de habilidades interpersonales en entorno seguro con agentes IA que simulan roles espec√≠ficos',
  objetivo_pedagogico = 'Permitir pr√°ctica de habilidades situacionales con feedback sobre t√©cnica y comportamiento',
  rol_ia = 'Agente que encarna personajes coherentes (clientes, usuarios, inversores), mantiene personalidad consistente, ajusta respuestas seg√∫n calidad de interacci√≥n, simula se√±ales paraverbales y genera an√°lisis post-interacci√≥n',
  configuracion_schema = {
    type: 'object',
    properties: {
      rol_simulado: { type: 'string', description: 'Rol que simula la IA (cliente, usuario, inversor, etc.)' },
      nivel_dificultad: { type: 'string', enum: ['cooperativo', 'neutral', 'desafiante'] },
      personalidad: { type: 'object', description: 'Rasgos de personalidad del personaje' },
      contexto_situacion: { type: 'string', description: 'Contexto de la interacci√≥n' },
      duracion_minutos: { type: 'number', default: 10, minimum: 5, maximum: 30 }
    }
  },
  configuracion_default = {
    nivel_dificultad: 'neutral',
    duracion_minutos: 10
  },
  prompt_template = 'Crea una simulaci√≥n de interacci√≥n con {{rol_simulado}} en contexto: {{contexto_situacion}}. Nivel de dificultad: {{nivel_dificultad}}. El contenido debe seguir esta estructura JSON: { "titulo": string, "descripcion": string, "personaje_ia": { "nombre": string, "rol": string, "personalidad": string, "tono": string, "contexto": string }, "objetivo_estudiante": string, "situacion_inicial": string, "criterios_exito": string[], "nivel_dificultad": "principiante"|"intermedio"|"avanzado", "tiempo_sugerido": number }. El personaje debe tener personalidad coherente{{#if personalidad}} con rasgos: {{personalidad}}{{/if}}.',
  output_schema = {
    titulo: 'string',
    descripcion: 'string',
    personaje_ia: 'object',
    objetivo_estudiante: 'string',
    situacion_inicial: 'string',
    criterios_exito: 'array',
    nivel_dificultad: 'string',
    tiempo_sugerido: 'number'
  },
  preview_config = {
    tiempo_respuesta_segundos: 3,
    permitir_reinicio: true
  },
  icono = 'üí¨',
  color = '#f59e0b',
  es_oficial = true,
  activo = true,
  created_at = time::now(),
  updated_at = time::now();

-- 4. MENTORES Y ASESORES IA
CREATE exercise_template:mentor_asesor_ia SET
  nombre = 'Mentor/Asesor IA',
  categoria = 'mentor_asesor_ia',
  descripcion = 'Guidance especializado desde perspectiva de experto con cuestionamiento socr√°tico',
  objetivo_pedagogico = 'Desarrollar capacidad de razonamiento independiente mediante gu√≠a no directiva',
  rol_ia = 'Experto con conocimiento profundo que hace preguntas socr√°ticas, identifica trade-offs, eval√∫a decisiones con criterios del campo, explica mejores pr√°cticas y contextualiza metodolog√≠as',
  configuracion_schema = {
    type: 'object',
    properties: {
      dominio_experto: { type: 'string', description: '√Årea de expertise del mentor' },
      estilo_mentoria: { type: 'string', enum: ['socr√°tico', 'directivo', 'colaborativo'] },
      es_panel: { type: 'boolean', default: false, description: 'Panel multidisciplinario' },
      expertos_panel: { type: 'array', items: { type: 'string' }, description: 'Si es panel, lista de expertos' },
      profundidad_tecnica: { type: 'string', enum: ['conceptual', 'aplicada', 'experta'] }
    }
  },
  configuracion_default = {
    estilo_mentoria: 'socr√°tico',
    es_panel: false,
    profundidad_tecnica: 'aplicada'
  },
  prompt_template = 'Crea una sesi√≥n de mentor√≠a con {{dominio_experto}} usando estilo {{estilo_mentoria}}{{#if es_panel}} como panel con: {{expertos_panel}}{{/if}}. Profundidad: {{profundidad_tecnica}}. El contenido debe seguir esta estructura JSON: { "titulo": string, "objetivo_general": string, "contexto_mentor": { "nombre": string, "especialidad": string, "estilo": string, "enfoque": string }, "pasos": [{ "numero": number, "titulo": string, "descripcion": string, "preguntas_guia": string[], "recursos_recomendados": string[] }], "reflexion_final": string, "metricas_seguimiento": string[] }. Usa preguntas socr√°ticas, identifica trade-offs, eval√∫a con criterios del campo.',
  output_schema = {
    titulo: 'string',
    objetivo_general: 'string',
    contexto_mentor: 'object',
    pasos: 'array',
    reflexion_final: 'string',
    metricas_seguimiento: 'array'
  },
  preview_config = {
    interactivo: true,
    mostrar_razonamiento: true
  },
  icono = 'ü§ñ',
  color = '#8b5cf6',
  es_oficial = true,
  activo = true,
  created_at = time::now(),
  updated_at = time::now();

-- 5. HERRAMIENTAS DE AN√ÅLISIS Y EVALUACI√ìN
CREATE exercise_template:herramienta_analisis SET
  nombre = 'Herramienta de An√°lisis',
  categoria = 'herramienta_analisis',
  descripcion = 'Procesar trabajo del aprendiz y generar an√°lisis estructurado con diagn√≥stico y recomendaciones',
  objetivo_pedagogico = 'Proporcionar evaluaci√≥n rigurosa contra m√∫ltiples dimensiones con feedback accionable',
  rol_ia = 'Analista que identifica patrones no conscientes, eval√∫a contra m√∫ltiples dimensiones con evidencia, detecta gaps cr√≠ticos, valida coherencia, mapea claims a evidencia, eval√∫a sofisticaci√≥n de razonamiento',
  configuracion_schema = {
    type: 'object',
    properties: {
      dimensiones_evaluar: { type: 'array', items: { type: 'string' }, description: 'Dimensiones de evaluaci√≥n' },
      criterios_calidad: { type: 'object', description: 'Criterios espec√≠ficos de calidad' },
      generar_metricas: { type: 'boolean', default: true },
      identificar_patrones: { type: 'boolean', default: true },
      comparar_con_ejemplares: { type: 'boolean', default: false }
    }
  },
  configuracion_default = {
    generar_metricas: true,
    identificar_patrones: true,
    comparar_con_ejemplares: false
  },
  prompt_template = 'Crea una herramienta de an√°lisis para evaluar: {{dimensiones_evaluar}}. Criterios: {{criterios_calidad}}. El contenido debe seguir esta estructura JSON: { "titulo": string, "descripcion": string, "tipoAnalisis": "interview_synthesis"|"data_analysis"|"competitor_analysis", "instrucciones": string[], "outputFormat": "themes"|"matrix"|"metrics" }. Proporciona instrucciones claras para que el estudiante realice el an√°lisis, identifique patrones{{#if generar_metricas}}, genere m√©tricas{{/if}}{{#if comparar_con_ejemplares}}, y compare con ejemplares{{/if}}.',
  output_schema = {
    titulo: 'string',
    descripcion: 'string',
    tipoAnalisis: 'string',
    instrucciones: 'array',
    outputFormat: 'string'
  },
  preview_config = {
    mostrar_graficas: true,
    exportar_reporte: true
  },
  icono = 'üîç',
  color = '#ec4899',
  es_oficial = true,
  activo = true,
  created_at = time::now(),
  updated_at = time::now();

-- 6. HERRAMIENTAS DE CREACI√ìN Y GENERACI√ìN
CREATE exercise_template:herramienta_creacion SET
  nombre = 'Herramienta de Creaci√≥n',
  categoria = 'herramienta_creacion',
  descripcion = 'Asistir en crear outputs proporcionando andamiaje generativo que acelera producci√≥n',
  objetivo_pedagogico = 'Acelerar ciclos de iteraci√≥n sin reemplazar pensamiento cr√≠tico del aprendiz',
  rol_ia = 'Asistente creativo que traduce informaci√≥n en visualizaciones, genera borradores imperfectos que requieren refinamiento, crea variaciones para experimentaci√≥n, produce escenarios coherentes y mantiene voz del aprendiz',
  configuracion_schema = {
    type: 'object',
    properties: {
      tipo_output: { type: 'string', enum: ['documento', 'visual', 'prototipo', 'codigo', 'esquema'] },
      numero_variaciones: { type: 'number', default: 3, minimum: 1, maximum: 5 },
      nivel_completitud: { type: 'string', enum: ['esqueleto', 'borrador', 'semi-completo'], default: 'borrador' },
      incluir_explicacion_logica: { type: 'boolean', default: true },
      mantener_voz_aprendiz: { type: 'boolean', default: true }
    }
  },
  configuracion_default = {
    tipo_output: 'documento',
    numero_variaciones: 3,
    nivel_completitud: 'borrador',
    incluir_explicacion_logica: true,
    mantener_voz_aprendiz: true
  },
  prompt_template = 'Crea una herramienta de creaci√≥n para generar {{tipo_output}} en nivel {{nivel_completitud}}. El contenido debe seguir esta estructura JSON: { "titulo": string, "tipoCreacion": "business_model"|"value_proposition"|"pitch_deck"|"otro", "promptsIniciales": string[], "plantillas": [{ "nombre": string, "descripcion": string, "secciones": string[], "ejemplos": string[] }], "criterios_calidad": string[], "iteraciones_sugeridas": number }. Crea {{numero_variaciones}} variaciones diferentes{{#if incluir_explicacion_logica}} con explicaci√≥n de l√≥gica{{/if}}. Los borradores deben forzar refinamiento del estudiante.',
  output_schema = {
    titulo: 'string',
    tipoCreacion: 'string',
    promptsIniciales: 'array',
    plantillas: 'array',
    criterios_calidad: 'array',
    iteraciones_sugeridas: 'number'
  },
  preview_config = {
    vista_previa_lado_a_lado: true,
    permitir_edicion: true
  },
  icono = 'üé®',
  color = '#14b8a6',
  es_oficial = true,
  activo = true,
  created_at = time::now(),
  updated_at = time::now();

-- 7. SISTEMAS DE TRACKING Y MONITOREO
CREATE exercise_template:sistema_tracking SET
  nombre = 'Sistema de Tracking',
  categoria = 'sistema_tracking',
  descripcion = 'Mantener visibilidad continua del progreso e identificar tendencias longitudinales',
  objetivo_pedagogico = 'Alertar proactivamente cuando atenci√≥n o intervenci√≥n es necesaria',
  rol_ia = 'Sistema de vigilancia inteligente que visualiza estado vs objetivos, solicita updates, detecta patrones problem√°ticos, contextualiza m√©tricas, monitorea adherencia a proceso y dispara intervenciones',
  configuracion_schema = {
    type: 'object',
    properties: {
      metricas_seguimiento: { type: 'array', items: { type: 'string' }, description: 'Qu√© m√©tricas trackear' },
      frecuencia_updates: { type: 'string', enum: ['diaria', 'semanal', 'por_hito'], default: 'semanal' },
      detectar_estancamiento: { type: 'boolean', default: true },
      detectar_frustration: { type: 'boolean', default: true },
      benchmarks: { type: 'object', description: 'Benchmarks de comparaci√≥n' },
      disparar_intervenciones: { type: 'boolean', default: true }
    }
  },
  configuracion_default = {
    frecuencia_updates: 'semanal',
    detectar_estancamiento: true,
    detectar_frustration: true,
    disparar_intervenciones: true
  },
  prompt_template = 'Crea un sistema de tracking para monitorear: {{metricas_seguimiento}}. Frecuencia: {{frecuencia_updates}}. El contenido debe seguir esta estructura JSON: { "titulo": string, "descripcion": string, "metricas": [{ "nombre": string, "descripcion": string, "tipo": "numerico"|"booleano"|"porcentaje", "umbral_critico": number, "meta": number }], "dashboard": { "graficos": string[], "kpis_principales": string[] }, "alertas": [{ "condicion": string, "mensaje": string, "nivel": "info"|"warning"|"critico" }], "recomendaciones_mejora": string[] }{{#if detectar_estancamiento}}. Detecta estancamiento{{/if}}{{#if disparar_intervenciones}}. Dispara intervenciones autom√°ticas{{/if}}.',
  output_schema = {
    titulo: 'string',
    descripcion: 'string',
    metricas: 'array',
    dashboard: 'object',
    alertas: 'array',
    recomendaciones_mejora: 'array'
  },
  preview_config = {
    dashboard_interactivo: true,
    graficas_tendencias: true
  },
  icono = 'üìä',
  color = '#0ea5e9',
  es_oficial = true,
  activo = true,
  created_at = time::now(),
  updated_at = time::now();

-- 8. HERRAMIENTAS DE REVISI√ìN Y FEEDBACK
CREATE exercise_template:herramienta_revision SET
  nombre = 'Herramienta de Revisi√≥n',
  categoria = 'herramienta_revision',
  descripcion = 'Proporcionar retroalimentaci√≥n formativa espec√≠fica, accionable y balanceada',
  objetivo_pedagogico = 'Dar feedback adaptado al nivel de dominio que sea honesto pero motivador',
  rol_ia = 'Revisor experto que proporciona feedback no-intrusivo priorizando se√±alamientos, genera an√°lisis comprehensivo comenzando con fortalezas, compara con ejemplares, adapta tipo/profundidad seg√∫n estado liminal',
  configuracion_schema = {
    type: 'object',
    properties: {
      momento_feedback: { type: 'string', enum: ['tiempo_real', 'post_tarea', 'ambos'], default: 'ambos' },
      priorizar_senalamientos: { type: 'boolean', default: true, description: 'No abrumar con 20 cosas' },
      comenzar_con_fortalezas: { type: 'boolean', default: true },
      comparar_con_ejemplares: { type: 'boolean', default: true },
      adaptar_a_nivel_dominio: { type: 'boolean', default: true },
      incluir_recursos_mejora: { type: 'boolean', default: true }
    }
  },
  configuracion_default = {
    momento_feedback: 'ambos',
    priorizar_senalamientos: true,
    comenzar_con_fortalezas: true,
    comparar_con_ejemplares: true,
    adaptar_a_nivel_dominio: true,
    incluir_recursos_mejora: true
  },
  prompt_template = 'Crea una herramienta de revisi√≥n {{momento_feedback}}. El contenido debe seguir esta estructura JSON: { "titulo": string, "descripcion": string, "criterios_revision": [{ "categoria": string, "aspectos": string[], "peso": number }], "rubrica": [{ "criterio": string, "excelente": string, "bueno": string, "necesita_mejora": string }], "preguntas_autoevaluacion": string[], "ejemplos_comparativos": [{ "nivel": "excelente"|"bueno"|"necesita_mejora", "descripcion": string, "ejemplo": string }], "recursos_mejora": [{ "titulo": string, "tipo": "articulo"|"video"|"plantilla", "url": string }] }{{#if priorizar_senalamientos}}. Prioriza 3-5 se√±alamientos clave{{/if}}{{#if comenzar_con_fortalezas}}. Comienza con fortalezas{{/if}}.',
  output_schema = {
    titulo: 'string',
    descripcion: 'string',
    criterios_revision: 'array',
    rubrica: 'array',
    preguntas_autoevaluacion: 'array',
    ejemplos_comparativos: 'array',
    recursos_mejora: 'array'
  },
  preview_config = {
    resaltar_cambios: true,
    version_mejorada_ejemplo: true
  },
  icono = '‚úÖ',
  color = '#22c55e',
  es_oficial = true,
  activo = true,
  created_at = time::now(),
  updated_at = time::now();

-- 9. SIMULADORES DE ENTORNO
CREATE exercise_template:simulador_entorno SET
  nombre = 'Simulador de Entorno',
  categoria = 'simulador_entorno',
  descripcion = 'Crear entornos virtuales donde experimentar sin consecuencias del mundo real',
  objetivo_pedagogico = 'Acelerar ciclos de aprendizaje mediante experimentaci√≥n segura y m√∫ltiples intentos',
  rol_ia = 'Constructor de mundos simulados que responden real√≠sticamente, generan datos sint√©ticos coherentes, proporcionan entornos de experimentaci√≥n controlados, simulan resultados con variabilidad realista y explican relaciones causales',
  configuracion_schema = {
    type: 'object',
    properties: {
      tipo_entorno: { type: 'string', enum: ['sistema_tecnico', 'mercado', 'organizacion', 'ecosistema'] },
      nivel_fidelidad: { type: 'string', enum: ['simplificado', 'realista', 'experto'], default: 'realista' },
      incluir_casos_edge: { type: 'boolean', default: true },
      permitir_multiples_intentos: { type: 'boolean', default: true },
      explicar_causas: { type: 'boolean', default: true },
      mantener_log_experimentos: { type: 'boolean', default: true }
    }
  },
  configuracion_default = {
    tipo_entorno: 'sistema_tecnico',
    nivel_fidelidad: 'realista',
    incluir_casos_edge: true,
    permitir_multiples_intentos: true,
    explicar_causas: true,
    mantener_log_experimentos: true
  },
  prompt_template = 'Crea un simulador de {{tipo_entorno}} con fidelidad {{nivel_fidelidad}}. El contenido debe seguir esta estructura JSON: { "titulo": string, "descripcion": string, "tipo_entorno": "sistema_tecnico"|"mercado"|"organizacion"|"ecosistema", "estado_inicial": { "variables": object, "condiciones": string[] }, "acciones_posibles": [{ "nombre": string, "descripcion": string, "parametros": string[], "efectos": string[] }], "reglas_simulacion": string[], "metricas_observables": string[], "escenarios_ejemplo": [{ "nombre": string, "configuracion": object, "resultado_esperado": string }] }{{#if incluir_casos_edge}}. Incluye casos edge{{/if}}{{#if explicar_causas}}. Explica relaciones causales{{/if}}.',
  output_schema = {
    titulo: 'string',
    descripcion: 'string',
    tipo_entorno: 'string',
    estado_inicial: 'object',
    acciones_posibles: 'array',
    reglas_simulacion: 'array',
    metricas_observables: 'array',
    escenarios_ejemplo: 'array'
  },
  preview_config = {
    visualizacion_3d: false,
    controles_interactivos: true
  },
  icono = 'üåê',
  color = '#f97316',
  es_oficial = true,
  activo = true,
  created_at = time::now(),
  updated_at = time::now();

-- 10. SISTEMAS DE PROGRESI√ìN Y DESBLOQUEO
CREATE exercise_template:sistema_progresion SET
  nombre = 'Sistema de Progresi√≥n',
  categoria = 'sistema_progresion',
  descripcion = 'Gestionar flujo del aprendiz asegurando dominio suficiente antes de avanzar',
  objetivo_pedagogico = 'Personalizar ruta seg√∫n fortalezas/debilidades manteniendo motivaci√≥n mediante desbloqueos apropiados',
  rol_ia = 'Guardi√°n pedag√≥gico que eval√∫a objetivamente contra criterios de suficiencia, diagnostica estado de dominio, recomienda rutas adaptativas, verifica pre-requisitos, permite reintentos con diagn√≥stico claro y documenta evidencia de dominio',
  configuracion_schema = {
    type: 'object',
    properties: {
      criterios_suficiencia: { type: 'object', description: 'Criterios para permitir progresi√≥n' },
      umbrales_dominio: { type: 'object', description: 'Umbrales de dominio por concepto' },
      permitir_rutas_alternativas: { type: 'boolean', default: true },
      verificar_prerequisitos: { type: 'boolean', default: true },
      permitir_reintentos: { type: 'boolean', default: true },
      max_reintentos: { type: 'number', default: 3, minimum: 1 },
      diagnostico_entre_intentos: { type: 'boolean', default: true }
    }
  },
  configuracion_default = {
    permitir_rutas_alternativas: true,
    verificar_prerequisitos: true,
    permitir_reintentos: true,
    max_reintentos: 3,
    diagnostico_entre_intentos: true
  },
  prompt_template = 'Crea un sistema de progresi√≥n contra criterios: {{criterios_suficiencia}} con umbrales: {{umbrales_dominio}}. El contenido debe seguir esta estructura JSON: { "titulo": string, "descripcion": string, "niveles": [{ "numero": number, "nombre": string, "descripcion": string, "requisitos": string[], "objetivos_aprendizaje": string[], "contenido_desbloqueado": string[] }], "arbol_dependencias": [{ "nivel": number, "prerequisitos": number[], "opcional": boolean }], "criterios_evaluacion": [{ "nivel": number, "criterio": string, "umbral": number, "metodo_evaluacion": string }], "rutas_alternativas": [{ "nombre": string, "niveles_incluidos": number[], "enfoque": string }] }{{#if verificar_prerequisitos}}. Verifica pre-requisitos{{/if}}{{#if permitir_rutas_alternativas}}. Incluye rutas adaptativas{{/if}}.',
  output_schema = {
    titulo: 'string',
    descripcion: 'string',
    niveles: 'array',
    arbol_dependencias: 'array',
    criterios_evaluacion: 'array',
    rutas_alternativas: 'array'
  },
  preview_config = {
    mostrar_arbol_progresion: true,
    indicar_bloqueados: true
  },
  icono = 'üéØ',
  color = '#a855f7',
  es_oficial = true,
  activo = true,
  created_at = time::now(),
  updated_at = time::now();

-- ============================================================================
-- VERIFICACI√ìN
-- ============================================================================

-- Verificar que se crearon los 10 templates
SELECT count() AS total_templates FROM exercise_template WHERE activo = true GROUP ALL;

-- Listar todos los templates creados
SELECT id, nombre, categoria, icono FROM exercise_template WHERE activo = true ORDER BY categoria;
