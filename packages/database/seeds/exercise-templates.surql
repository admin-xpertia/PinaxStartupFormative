-- ============================================================================
-- SEED: EXERCISE TEMPLATES
-- ============================================================================
-- Inserta los 12 tipos de ejercicios mediados por IA en la base de datos
-- Fecha: 2025-11-06
-- ============================================================================

-- Nota: Este script asume que la tabla exercise_template ya ha sido creada

-- 1. LECCI√ìN INTERACTIVA
CREATE exercise_template:leccion_interactiva CONTENT {
    nombre: "Lecci√≥n Interactiva",
    categoria: "leccion_interactiva",
    descripcion: "Transmitir conocimiento conceptual de manera activa donde el aprendiz interact√∫a con el contenido en lugar de consumirlo pasivamente, permitiendo verificar comprensi√≥n en tiempo real.",
    objetivo_pedagogico: "Facilitar aprendizaje activo mediante contenido interactivo con verificaci√≥n de comprensi√≥n inmediata",
    rol_ia: "La IA act√∫a como facilitador de aprendizaje activo que eval√∫a respuestas inmediatamente, proporciona feedback explicativo, genera casos de aplicaci√≥n m√∫ltiples, contextualiza t√©rminos t√©cnicos mediante glosario din√°mico, y adapta profundidad de explicaciones seg√∫n nivel de comprensi√≥n.",
    icono: "üìñ",
    color: "#3b82f6",
    configuracion_schema: {
        duracion_minutos: { type: "number", label: "Duraci√≥n estimada (minutos)", default: 20, min: 10, max: 60 },
        profundidad: { type: "select", label: "Nivel de profundidad", options: ["basica", "intermedia", "avanzada"], default: "intermedia" },
        incluir_quizzes: { type: "boolean", label: "Incluir quizzes embebidos", default: true },
        incluir_glosario: { type: "boolean", label: "Incluir glosario de t√©rminos", default: true },
        numero_ejemplos: { type: "number", label: "N√∫mero de ejemplos pr√°cticos", default: 3, min: 1, max: 5 }
    },
    configuracion_default: {
        duracion_minutos: 20,
        profundidad: "intermedia",
        incluir_quizzes: true,
        incluir_glosario: true,
        numero_ejemplos: 3
    },
    prompt_template: "Eres un dise√±ador instruccional experto creando una lecci√≥n interactiva estilo tutor digital.\n\nCONTEXTO DEL PROGRAMA:\nPrograma: {{programa.nombre}}\nFase: {{fase.nombre}} - {{fase.descripcion}}\nProof Point: {{proof_point.pregunta_central}}\nDocumentaci√≥n clave: {{proof_point.documentacion_contexto}}\n\nDOCUMENTACI√ìN DE LA FASE:\n{{fase_documentation}}\n\nCONSIDERACIONES DEL INSTRUCTOR:\n{{consideraciones}}\n\nCONFIGURACI√ìN:\nDuraci√≥n objetivo: {{configuracion.duracion_minutos}} minutos\nProfundidad: {{configuracion.profundidad}}\nGlosario requerido: {{configuracion.incluir_glosario}}\nN√∫mero de ejemplos: {{configuracion.numero_ejemplos}}\n\nREQUISITOS DE FORMATO:\n- Entrega todo el contenido en un solo documento Markdown.\n- Usa encabezados H2 para temas principales y H3 para subtemas.\n- Cada subsecci√≥n debe tener entre 3 y 5 p√°rrafos conectados por transiciones claras.\n- Inserta cajas de √©nfasis usando la sintaxis :::callout ... ::: para conceptos cr√≠ticos o advertencias.\n- Cada 3-4 p√°rrafos inserta una pregunta de verificaci√≥n usando un bloque ```verification { ... } ``` con el JSON descrito en el output_schema (incluye seccionId, opciones, feedback, accionChatSugerida).\n- Identifica t√©rminos t√©cnicos clave y aseg√∫rate de que aparezcan literalmente igual que en el glosario que entregar√°s.\n- Calcula metadatos (duraci√≥n, conceptos clave, dificultad) basados en el contenido generado.\n\nOUTPUT ESPERADO (JSON):\n{{output_schema}}\n\nIMPORTANTE: Devuelve √∫nicamente JSON v√°lido que siga la estructura anterior. El campo markdown debe contener todo el art√≠culo con las preguntas embebidas en los bloques ```verification```.",
    output_schema: {
        markdown: "string (documento markdown con H2/H3, :::callout y bloques ```verification```)",
        metadata: {
            titulo: "string",
            duracionMinutos: "number",
            dificultad: "principiante|intermedio|avanzado",
            conceptosClave: ["string"],
            nivelNarrativa: "string",
            objetivoPrincipal: "string"
        },
        glosario: [{ termino: "string", definicion: "string", slug: "string" }],
        preguntasVerificacion: [{
            id: "string",
            seccionId: "string",
            tipo: "multiple_choice|verdadero_falso|respuesta_corta",
            enunciado: "string",
            opciones: [{ id: "string", texto: "string", esCorrecta: "boolean" }],
            respuestaCorrecta: "string|string[]|boolean",
            criteriosEvaluacion: ["string"],
            feedback: {
                correcto: "string",
                incorrecto: "string",
                porOpcion: [{
                    optionId: "string",
                    feedback: "string",
                    conceptoReferencia: "string"
                }]
            },
            accionChatSugerida: "string"
        }],
        tracking: {
            numeroSecciones: "number",
            palabras: "number",
            tiempoLecturaMinutos: "number",
            tokensEstimados: "number"
        }
    },
    preview_config: {
        demo_data: {
            markdown: "## El tama√±o s√≠ importa, pero no como crees\n\nEl debate sobre si es mejor un modelo enorme o uno especializado ha cambiado.\n\n:::callout\nLos modelos de 13B par√°metros ajustados al dominio pueden superar a gigantes gen√©ricos si se entrenan con datos curados.\n:::\n\n```verification\n{\"id\":\"check-tamano\",\"seccionId\":\"el-tamano\",\"tipo\":\"multiple_choice\",\"enunciado\":\"¬øPor qu√© un modelo de 13B bien ajustado puede ser m√°s √∫til que uno de 175B?\",\"opciones\":[{\"id\":\"a\",\"texto\":\"Porque siempre es m√°s barato\",\"esCorrecta\":false},{\"id\":\"b\",\"texto\":\"Porque puede enfocarse en el dominio y reducir latencia\",\"esCorrecta\":true}],\"respuestaCorrecta\":[\"b\"],\"feedback\":{\"correcto\":\"Exacto, el enfoque reduce tokens y hace m√°s eficiente la inferencia.\",\"incorrecto\":\"Revisa la secci√≥n sobre compromisos de latencia.\",\"porOpcion\":[{\"optionId\":\"a\",\"feedback\":\"El costo ayuda, pero no es la raz√≥n principal\"}]},\"accionChatSugerida\":\"No entiendo c√≥mo la latencia afecta la elecci√≥n del modelo, ¬øpuedes explicarlo?\"}\n```\n\n### Restricciones del mundo real\nLos dispositivos m√≥viles y el edge marcan l√≠mites claros...\n",
            metadata: {
                titulo: "El tama√±o-rendimiento en LLMs",
                duracionMinutos: 18,
                dificultad: "intermedio",
                conceptosClave: ["capacidad vs tama√±o", "latencia", "edge deployment"],
                nivelNarrativa: "socratico",
                objetivoPrincipal: "Ense√±ar c√≥mo balancear tama√±o y desempe√±o en despliegues reales"
            },
            glosario: [
                { termino: "latencia", definicion: "Tiempo que tarda el modelo en responder", slug: "latencia" },
                { termino: "edge deployment", definicion: "Despliegue en dispositivos al borde de la red", slug: "edge-deployment" }
            ],
            preguntasVerificacion: [
                {
                    id: "check-tamano",
                    seccionId: "el-tamano",
                    tipo: "multiple_choice",
                    enunciado: "¬øPor qu√© un modelo de 13B bien ajustado puede ser m√°s √∫til que uno de 175B?",
                    opciones: [
                        { id: "a", texto: "Porque siempre es m√°s barato", esCorrecta: false },
                        { id: "b", texto: "Porque puede enfocarse en el dominio y reducir latencia", esCorrecta: true }
                    ],
                    respuestaCorrecta: ["b"],
                    criteriosEvaluacion: [
                        "Menciona foco en dominio",
                        "Hace referencia a latencia o costos operativos"
                    ],
                    feedback: {
                        correcto: "Exacto, el enfoque reduce tokens y hace m√°s eficiente la inferencia.",
                        incorrecto: "Revisa la secci√≥n sobre compromisos de latencia.",
                        porOpcion: [
                            { optionId: "a", feedback: "El costo ayuda, pero no es la raz√≥n principal" }
                        ]
                    },
                    accionChatSugerida: "No entiendo c√≥mo la latencia afecta la elecci√≥n del modelo, ¬øpuedes explicarlo?"
                }
            ],
            tracking: {
                numeroSecciones: 3,
                palabras: 820,
                tiempoLecturaMinutos: 18,
                tokensEstimados: 3200
            }
        }
    },
    es_oficial: true,
    activo: true
};

-- 2. CUADERNO DE TRABAJO
CREATE exercise_template:cuaderno_trabajo CONTENT {
    nombre: "Cuaderno de Trabajo",
    categoria: "cuaderno_trabajo",
    descripcion: "Guiar al aprendiz a documentar, estructurar y reflexionar sobre su propio trabajo, proporcionando andamiaje que gradualmente se retira mientras se eval√∫a calidad y se ofrece feedback formativo continuo.",
    objetivo_pedagogico: "Desarrollar capacidad de reflexi√≥n estructurada y documentaci√≥n rigurosa del pensamiento",
    rol_ia: "La IA funciona como editor inteligente y evaluador de proceso que analiza patrones de pensamiento, proporciona feedback en tiempo real, valida completitud y coherencia, identifica gaps espec√≠ficos, y eval√∫a rigor del razonamiento.",
    icono: "üìù",
    color: "#8b5cf6",
    configuracion_schema: {
        type: "object",
        properties: {
            secciones: {
                type: "array",
                description: "Define las secciones estructuradas del cuaderno.",
                items: {
                    type: "object",
                    properties: {
                        tituloSeccion: { type: "string", description: "T√≠tulo o Enfoque (Ej: 'An√°lisis del Problema')" },
                        descripcionPrompt: { type: "string", description: "Descripci√≥n para la IA (¬øQu√© debe preguntar la IA?)" },
                        criteriosPrompt: { type: "string", description: "R√∫brica para la IA (¬øQu√© debe evaluar la IA?)" }
                    }
                }
            }
        }
    },
    configuracion_default: {
        secciones: []
    },
    prompt_template: "Eres un dise√±ador instruccional experto creando un cuaderno de trabajo reflexivo.\n\nCONTEXTO: {{contexto_completo}}\n\nTAREA:\nGenera un cuaderno de trabajo con {{configuracion.numero_secciones}} secciones que gu√≠e al estudiante a documentar y reflexionar sobre su trabajo relacionado con: {{proof_point.pregunta_central}}\n\nEl cuaderno debe:\n1. Proporcionar instrucciones claras y contextualizadas\n2. Incluir preguntas gu√≠a del tipo: {{configuracion.tipo_preguntas}}\n3. Mostrar ejemplos de respuestas fuertes\n4. Definir criterios de evaluaci√≥n claros\n5. Nivel de andamiaje: {{configuracion.nivel_andamiaje}}\n\nOUTPUT (JSON): {{output_schema}}",
    output_schema: {
        titulo: "string",
        instrucciones_generales: "string (markdown)",
        secciones: [{
            titulo: "string",
            tipo: "string",
            instrucciones: "string (markdown)",
            preguntas_guia: ["string"],
            ejemplos_respuestas_fuertes: ["string"],
            criterios_evaluacion: ["string"],
            es_critica: "boolean"
        }],
        criterios_calidad: {
            evidencia: { peso: "number", descriptores: ["string"] },
            claridad: { peso: "number", descriptores: ["string"] },
            profundidad: { peso: "number", descriptores: ["string"] }
        }
    },
    preview_config: {},
    es_oficial: true,
    activo: true
};

-- 3. SIMULACI√ìN DE INTERACCI√ìN
CREATE exercise_template:simulacion_interaccion CONTENT {
    nombre: "Simulaci√≥n de Interacci√≥n",
    categoria: "simulacion_interaccion",
    descripcion: "Permitir pr√°ctica de habilidades interpersonales o situacionales en entorno seguro donde el aprendiz interact√∫a con agentes IA que simulan roles espec√≠ficos con comportamiento realista.",
    objetivo_pedagogico: "Desarrollar habilidades de comunicaci√≥n e interacci√≥n mediante pr√°ctica en entorno seguro",
    rol_ia: "La IA encarna personajes coherentes que mantienen personalidad consistente, ajustan respuestas seg√∫n calidad de preguntas, simulan se√±ales paraverbales, escalan complejidad, y generan an√°lisis multidimensional post-interacci√≥n.",
    icono: "üí¨",
    color: "#10b981",
    configuracion_schema: {
        duracion_minutos: { type: "number", default: 30, min: 15, max: 60 },
        tipo_personaje: { type: "select", options: ["cliente", "usuario", "inversor", "colaborador", "mentor", "custom"], default: "cliente" },
        nivel_dificultad: { type: "select", options: ["cooperativo", "neutral", "desafiante"], default: "neutral" },
        numero_turnos_minimo: { type: "number", default: 10, min: 5, max: 30 },
        evaluar_tecnicas: { type: "multiselect", options: ["escucha_activa", "preguntas_abiertas", "empatia", "validacion", "sintesis"], default: ["escucha_activa", "preguntas_abiertas"] }
    },
    configuracion_default: {
        duracion_minutos: 30,
        tipo_personaje: "cliente",
        nivel_dificultad: "neutral",
        numero_turnos_minimo: 10,
        evaluar_tecnicas: ["escucha_activa", "preguntas_abiertas"]
    },
    prompt_template: "Eres un dise√±ador de simulaciones creando una interacci√≥n conversacional realista.\n\nCONTEXTO: {{contexto_completo}}\n\nTAREA:\nCrea una simulaci√≥n donde el estudiante interact√∫a con un {{configuracion.tipo_personaje}} para practicar habilidades de comunicaci√≥n.\n\nDificultad: {{configuracion.nivel_dificultad}}\nM√≠nimo de turnos: {{configuracion.numero_turnos_minimo}}\nT√©cnicas a evaluar: {{configuracion.evaluar_tecnicas}}\n\nOUTPUT (JSON): {{output_schema}}",
    output_schema: {
        titulo: "string",
        contexto_simulacion: "string",
        personaje: {
            nombre: "string",
            rol: "string",
            background: "string",
            personalidad: "string",
            objetivos_conversacion: ["string"],
            estilo_comunicacion: "string"
        },
        escenario_inicial: "string",
        mensaje_apertura: "string",
        banco_respuestas: [{ contexto: "string", variantes: ["string"], senales_paraverbales: "string" }],
        criterios_evaluacion: {}
    },
    preview_config: {},
    es_oficial: true,
    activo: true
};

-- 4. MENTOR Y ASESOR IA
CREATE exercise_template:mentor_asesor_ia CONTENT {
    nombre: "Mentor y Asesor IA",
    categoria: "mentor_asesor_ia",
    descripcion: "Proporcionar guidance especializado desde perspectiva de experto en un rol o dominio espec√≠fico, simulando relaci√≥n mentor-mentee con cuestionamiento socr√°tico y ense√±anza contextualizada.",
    objetivo_pedagogico: "Desarrollar pensamiento cr√≠tico mediante cuestionamiento socr√°tico y guidance experto",
    rol_ia: "La IA asume identidad de experto que hace preguntas socr√°ticas, identifica trade-offs no considerados, eval√∫a decisiones con criterios del campo, explica el 'por qu√©' detr√°s de mejores pr√°cticas, y contextualiza metodolog√≠as.",
    icono: "üßë‚Äçüè´",
    color: "#f59e0b",
    configuracion_schema: {
        duracion_minutos: { type: "number", default: 30, min: 15, max: 60 },
        tipo_mentor: { type: "select", options: ["emprendedor_serial", "inversor", "product_manager", "cientifico", "dise√±ador", "custom"], default: "emprendedor_serial" },
        estilo_mentoria: { type: "select", options: ["socratico", "directivo", "exploratorio"], default: "socratico" },
        numero_mentores: { type: "number", default: 1, min: 1, max: 4 }
    },
    configuracion_default: {
        duracion_minutos: 30,
        tipo_mentor: "emprendedor_serial",
        estilo_mentoria: "socratico",
        numero_mentores: 1
    },
    prompt_template: "Eres un dise√±ador de experiencias de mentor√≠a creando una sesi√≥n de guidance experto.\n\nCONTEXTO: {{contexto_completo}}\n\nTAREA:\nCrea una experiencia de mentor√≠a con {{configuracion.numero_mentores}} mentor(es) del tipo {{configuracion.tipo_mentor}} con estilo {{configuracion.estilo_mentoria}}.\n\nOUTPUT (JSON): {{output_schema}}",
    output_schema: {
        titulo: "string",
        contexto_mentoria: "string",
        mentores: [{ nombre: "string", rol: "string", expertise: "string" }],
        situacion_inicial: "string",
        objetivos_sesion: ["string"]
    },
    preview_config: {},
    es_oficial: true,
    activo: true
};

-- 5. HERRAMIENTA DE AN√ÅLISIS Y EVALUACI√ìN
CREATE exercise_template:herramienta_analisis CONTENT {
    nombre: "Herramienta de An√°lisis y Evaluaci√≥n",
    categoria: "herramienta_analisis",
    descripcion: "Procesar trabajo del aprendiz y generar an√°lisis estructurado con diagn√≥stico, evaluaci√≥n contra criterios m√∫ltiples, y recomendaciones accionables espec√≠ficas.",
    objetivo_pedagogico: "Proporcionar evaluaci√≥n rigurosa y feedback accionable sobre trabajo del estudiante",
    rol_ia: "La IA funciona como analista riguroso que identifica patrones, eval√∫a contra m√∫ltiples dimensiones con evidencia espec√≠fica, detecta gaps, valida coherencia, mapea claims a evidencia, y sintetiza evaluaci√≥n hol√≠stica.",
    icono: "üîç",
    color: "#ef4444",
    configuracion_schema: {
        duracion_minutos: { type: "number", default: 15, min: 5, max: 30 },
        dimensiones_analisis: { type: "multiselect", options: ["evidencia", "coherencia", "rigor", "completitud", "viabilidad"], default: ["evidencia", "coherencia", "completitud"] },
        tipo_trabajo: { type: "select", options: ["propuesta", "reporte", "plan", "hipotesis", "prototipo"], default: "propuesta" },
        nivel_detalle: { type: "select", options: ["basico", "detallado", "exhaustivo"], default: "detallado" }
    },
    configuracion_default: {
        duracion_minutos: 15,
        dimensiones_analisis: ["evidencia", "coherencia", "completitud"],
        tipo_trabajo: "propuesta",
        nivel_detalle: "detallado"
    },
    prompt_template: "Eres un dise√±ador de herramientas de evaluaci√≥n creando un analizador riguroso.\n\nCONTEXTO: {{contexto_completo}}\n\nTAREA:\nCrea una herramienta que analice {{configuracion.tipo_trabajo}} del estudiante evaluando: {{configuracion.dimensiones_analisis}}\n\nNivel de detalle: {{configuracion.nivel_detalle}}\n\nOUTPUT (JSON): {{output_schema}}",
    output_schema: {
        titulo: "string",
        instrucciones: "string",
        dimensiones_evaluacion: [{ nombre: "string", peso: "number" }]
    },
    preview_config: {},
    es_oficial: true,
    activo: true
};

-- 6. HERRAMIENTA DE CREACI√ìN Y GENERACI√ìN
CREATE exercise_template:herramienta_creacion CONTENT {
    nombre: "Herramienta de Creaci√≥n y Generaci√≥n",
    categoria: "herramienta_creacion",
    descripcion: "Asistir al aprendiz en crear outputs (documentos, visuales, prototipos) proporcionando andamiaje generativo que acelera producci√≥n sin reemplazar su pensamiento cr√≠tico.",
    objetivo_pedagogico: "Acelerar ciclos de creaci√≥n manteniendo el pensamiento cr√≠tico del estudiante",
    rol_ia: "La IA act√∫a como asistente creativo que traduce informaci√≥n en visualizaciones, genera borradores √∫tiles pero imperfectos, crea m√∫ltiples variaciones, y mantiene la voz del aprendiz.",
    icono: "‚ú®",
    color: "#ec4899",
    configuracion_schema: {
        duracion_minutos: { type: "number", default: 30, min: 15, max: 60 },
        tipo_output: { type: "select", options: ["documento", "diagrama", "canvas", "prototipo", "presentacion"], default: "canvas" },
        numero_variaciones: { type: "number", default: 3, min: 1, max: 5 },
        nivel_refinamiento: { type: "select", options: ["borrador", "intermedio", "pulido"], default: "borrador" }
    },
    configuracion_default: {
        duracion_minutos: 30,
        tipo_output: "canvas",
        numero_variaciones: 3,
        nivel_refinamiento: "borrador"
    },
    prompt_template: "Eres un dise√±ador de herramientas generativas creando un asistente creativo.\n\nCONTEXTO: {{contexto_completo}}\n\nTAREA:\nCrea una herramienta que ayude al estudiante a crear {{configuracion.tipo_output}} con {{configuracion.numero_variaciones}} variaciones al nivel {{configuracion.nivel_refinamiento}}.\n\nOUTPUT (JSON): {{output_schema}}",
    output_schema: {
        titulo: "string",
        tipo_output: "string",
        inputs_requeridos: [{ nombre: "string", tipo: "string" }]
    },
    preview_config: {},
    es_oficial: true,
    activo: true
};

-- 7. SISTEMA DE TRACKING Y MONITOREO
CREATE exercise_template:sistema_tracking CONTENT {
    nombre: "Sistema de Tracking y Monitoreo",
    categoria: "sistema_tracking",
    descripcion: "Mantener visibilidad continua del progreso, identificar tendencias longitudinales, y alertar proactivamente cuando atenci√≥n o intervenci√≥n es necesaria.",
    objetivo_pedagogico: "Mantener accountability y visibilidad del progreso del estudiante",
    rol_ia: "La IA opera como sistema de vigilancia inteligente que visualiza estado vs objetivos, solicita updates regulares, detecta patrones problem√°ticos, y dispara intervenciones proactivas.",
    icono: "üìä",
    color: "#06b6d4",
    configuracion_schema: {
        duracion_minutos: { type: "number", default: 10, min: 5, max: 20 },
        frecuencia_updates: { type: "select", options: ["diario", "semanal", "cada_hito"], default: "semanal" },
        metricas_track: { type: "multiselect", options: ["tiempo_invertido", "hitos_completados", "calidad_trabajo", "adherencia_proceso"], default: ["hitos_completados", "calidad_trabajo"] }
    },
    configuracion_default: {
        duracion_minutos: 10,
        frecuencia_updates: "semanal",
        metricas_track: ["hitos_completados", "calidad_trabajo"]
    },
    prompt_template: "Eres un dise√±ador de sistemas de tracking creando un monitor de progreso.\n\nCONTEXTO: {{contexto_completo}}\n\nTAREA:\nCrea un sistema que trackee {{configuracion.metricas_track}} con frecuencia {{configuracion.frecuencia_updates}}.\n\nOUTPUT (JSON): {{output_schema}}",
    output_schema: {
        titulo: "string",
        metricas_configuradas: [{ nombre: "string", tipo: "string" }]
    },
    preview_config: {},
    es_oficial: true,
    activo: true
};

-- 8. HERRAMIENTA DE REVISI√ìN Y FEEDBACK
CREATE exercise_template:herramienta_revision CONTENT {
    nombre: "Herramienta de Revisi√≥n y Feedback",
    categoria: "herramienta_revision",
    descripcion: "Proporcionar retroalimentaci√≥n formativa en tiempo real o post-tarea que sea espec√≠fica, accionable, balanceada y adaptada al nivel de dominio del aprendiz.",
    objetivo_pedagogico: "Proporcionar feedback formativo continuo que acelere aprendizaje",
    rol_ia: "La IA funciona como revisor experto que proporciona feedback no-intrusivo priorizando se√±alamientos, genera an√°lisis post-tarea balanceado, adapta seg√∫n estado liminal, y conecta feedback con recursos.",
    icono: "‚úèÔ∏è",
    color: "#84cc16",
    configuracion_schema: {
        duracion_minutos: { type: "number", default: 15, min: 5, max: 30 },
        momento_feedback: { type: "select", options: ["tiempo_real", "post_tarea", "ambos"], default: "ambos" },
        estilo_feedback: { type: "select", options: ["constructivo", "socratico", "directivo"], default: "constructivo" },
        nivel_estudiante: { type: "select", options: ["pre_liminal", "liminal", "post_liminal"], default: "liminal" }
    },
    configuracion_default: {
        duracion_minutos: 15,
        momento_feedback: "ambos",
        estilo_feedback: "constructivo",
        nivel_estudiante: "liminal"
    },
    prompt_template: "Eres un dise√±ador de sistemas de feedback creando un revisor experto.\n\nCONTEXTO: {{contexto_completo}}\n\nTAREA:\nCrea una herramienta de feedback {{configuracion.momento_feedback}} con estilo {{configuracion.estilo_feedback}} para estudiantes nivel {{configuracion.nivel_estudiante}}.\n\nOUTPUT (JSON): {{output_schema}}",
    output_schema: {
        titulo: "string",
        criterios_revision: [{ nombre: "string", peso: "number" }]
    },
    preview_config: {},
    es_oficial: true,
    activo: true
};

-- 9. SIMULADOR DE ENTORNO
CREATE exercise_template:simulador_entorno CONTENT {
    nombre: "Simulador de Entorno",
    categoria: "simulador_entorno",
    descripcion: "Crear entornos virtuales donde el aprendiz puede experimentar, construir o practicar sin consecuencias del mundo real, acelerando ciclos de aprendizaje.",
    objetivo_pedagogico: "Permitir experimentaci√≥n segura y r√°pida sin consecuencias del mundo real",
    rol_ia: "La IA construye y gestiona mundos simulados que responden real√≠sticamente, genera datos sint√©ticos coherentes, permite experimentaci√≥n controlada, y explica relaciones causales.",
    icono: "üåç",
    color: "#14b8a6",
    configuracion_schema: {
        duracion_minutos: { type: "number", default: 40, min: 20, max: 90 },
        tipo_entorno: { type: "select", options: ["mercado", "organizacion", "sistema_tecnico", "ecosistema"], default: "mercado" },
        nivel_complejidad: { type: "select", options: ["simple", "moderado", "complejo"], default: "moderado" },
        variables_controlables: { type: "multiselect", options: ["precio", "marketing", "producto", "operaciones"], default: ["precio", "producto"] }
    },
    configuracion_default: {
        duracion_minutos: 40,
        tipo_entorno: "mercado",
        nivel_complejidad: "moderado",
        variables_controlables: ["precio", "producto"]
    },
    prompt_template: "Eres un dise√±ador de simulaciones creando un entorno experimental.\n\nCONTEXTO: {{contexto_completo}}\n\nTAREA:\nCrea un simulador de {{configuracion.tipo_entorno}} con complejidad {{configuracion.nivel_complejidad}} donde el estudiante controla: {{configuracion.variables_controlables}}.\n\nOUTPUT (JSON): {{output_schema}}",
    output_schema: {
        titulo: "string",
        tipo_entorno: "string",
        estado_inicial: { variables: {} }
    },
    preview_config: {},
    es_oficial: true,
    activo: true
};

-- 10. SISTEMA DE PROGRESI√ìN Y DESBLOQUEO
CREATE exercise_template:sistema_progresion CONTENT {
    nombre: "Sistema de Progresi√≥n y Desbloqueo",
    categoria: "sistema_progresion",
    descripcion: "Gestionar flujo del aprendiz a trav√©s del programa asegurando dominio suficiente antes de avanzar, personalizando ruta seg√∫n fortalezas/debilidades, y manteniendo motivaci√≥n mediante desbloqueos apropiados.",
    objetivo_pedagogico: "Asegurar dominio antes de progresi√≥n mientras se mantiene motivaci√≥n",
    rol_ia: "La IA opera como guardi√°n pedag√≥gico que eval√∫a objetivamente, diagnostica dominio, recomienda rutas adaptativas, verifica pre-requisitos, permite reintentos con diagn√≥stico, y balancea personalizaci√≥n con estructura.",
    icono: "üîì",
    color: "#a855f7",
    configuracion_schema: {
        duracion_minutos: { type: "number", default: 20, min: 10, max: 45 },
        tipo_evaluacion: { type: "select", options: ["quiz", "proyecto", "portafolio", "mixto"], default: "mixto" },
        umbral_progresion: { type: "number", default: 70, min: 60, max: 90 },
        permitir_reintentos: { type: "boolean", default: true },
        numero_reintentos_max: { type: "number", default: 3, min: 1, max: 5 }
    },
    configuracion_default: {
        duracion_minutos: 20,
        tipo_evaluacion: "mixto",
        umbral_progresion: 70,
        permitir_reintentos: true,
        numero_reintentos_max: 3
    },
    prompt_template: "Eres un dise√±ador de sistemas de evaluaci√≥n creando un guardi√°n pedag√≥gico.\n\nCONTEXTO: {{contexto_completo}}\n\nTAREA:\nCrea una evaluaci√≥n tipo {{configuracion.tipo_evaluacion}} con umbral {{configuracion.umbral_progresion}}% que permita {{configuracion.numero_reintentos_max}} reintentos.\n\nOUTPUT (JSON): {{output_schema}}",
    output_schema: {
        titulo: "string",
        tipo_evaluacion: "string",
        umbral_progresion: {}
    },
    preview_config: {},
    es_oficial: true,
    activo: true
};

-- 11. CASO DE AN√ÅLISIS
CREATE exercise_template:caso CONTENT {
    nombre: "Caso de An√°lisis",
    categoria: "caso",
    descripcion: "Instrumento de aprendizaje basado en an√°lisis situacional que presenta una narrativa rica de una situaci√≥n real o realista para desarrollar juicio profesional contextualizado.",
    objetivo_pedagogico: "Desarrollar la capacidad de aplicar frameworks conceptuales a situaciones ambiguas del mundo real, identificando factores causales, evaluando decisiones y proponiendo alternativas justificadas.",
    rol_ia: "Consultor socr√°tico que no da respuestas, sino que cuestiona el razonamiento del estudiante (\"¬øQu√© evidencia del caso sustenta tu afirmaci√≥n?\", \"¬øConsideraste estas restricciones?\") para desarrollar rigor anal√≠tico y pensamiento multidimensional.",
    icono: "‚öñÔ∏è",
    color: "#d946ef",
    configuracion_schema: {
        type: "object",
        properties: {
            narrativa_caso: {
                type: "string",
                description: "Narrativa completa del caso (historia, datos, protagonistas)"
            },
            preguntas_analisis: {
                type: "array",
                description: "Preguntas estructuradas que gu√≠an el an√°lisis del estudiante.",
                items: {
                    type: "object",
                    properties: {
                        pregunta_guia: {
                            type: "string",
                            description: "Pregunta para el estudiante (Ej: \"Identifica el problema central\")"
                        },
                        criterios_ia: {
                            type: "string",
                            description: "Criterios que la IA usar√° para evaluar la respuesta del estudiante"
                        }
                    }
                }
            }
        },
        required: ["narrativa_caso"]
    },
    configuracion_default: {
        preguntas_analisis: []
    },
    prompt_template: "Eres un dise√±ador instruccional experto creando un Caso de An√°lisis interactivo.\n\nCONTEXTO DEL PROGRAMA:\n{{programa.nombre}}, Fase: {{fase.nombre}}\nProof Point: {{proof_point.pregunta_central}}\n\nNARRATIVA BASE PROPORCIONADA:\n{{configuracion.narrativa_caso}}\n\nPREGUNTAS DE AN√ÅLISIS DEFINIDAS POR INSTRUCTOR:\n{{#each configuracion.preguntas_analisis}}\n- Pregunta: {{pregunta_guia}}\n- Criterios IA: {{criterios_ia}}\n{{/each}}\n\nREQUISITOS DE FORMATO:\n- El output debe ser un JSON que siga el output_schema.\n- El campo \"narrativa_markdown\" debe contener la historia del caso, formateada con H2/H3 y :::callouts para datos clave.\n- El campo \"secciones_analisis\" debe tomar las \"preguntas_analisis\" del instructor y convertirlas en secciones de un cuaderno de trabajo, detallando qu√© debe hacer el estudiante.\n\nOUTPUT ESPERADO (JSON):\n{{output_schema}}\n\nIMPORTANTE: Devuelve √∫nicamente JSON v√°lido.",
    output_schema: {
        titulo: "string",
        narrativa_markdown: "string (La historia del caso formateada)",
        metadata: {
            conceptosClave: ["string"],
            tiempoEstimadoMinutos: "number"
        },
        secciones_analisis: [{
            id: "string",
            titulo: "string (Basado en la pregunta_guia)",
            instrucciones: "string (Instrucci√≥n clara para el estudiante)",
            placeholder: "string (Ej: \"Escribe tu an√°lisis aqu√≠...\")",
            criterios_evaluacion_ia: ["string (Basado en criterios_ia)"]
        }]
    },
    preview_config: {
        mostrar_progreso: true,
        tiempo_estimado_minutos: 45
    },
    es_oficial: true,
    activo: true
};

-- 12. INSTRUCCIONES DE ACTIVIDAD
CREATE exercise_template:instrucciones CONTENT {
    nombre: "Instrucciones de Actividad",
    categoria: "instrucciones",
    descripcion: "Gu√≠a procedimental paso a paso para ejecutar actividades de aprendizaje aut√©nticas fuera de la plataforma (entrevistas, prototipos f√≠sicos, experimentos).",
    objetivo_pedagogico: "Proporcionar andamiaje procedimental y soporte \"just-in-time\" para que el estudiante navegue exitosamente actividades en el mundo real.",
    rol_ia: "Coaching as√≠ncrono que ayuda al estudiante a preparar la actividad (\"¬øQu√© preguntas priorizo?\"), consultar durante (\"¬øC√≥mo respondo a esta objeci√≥n?\"), y reflexionar despu√©s (\"¬øMi approach fue correcto?\") usando el contexto del objetivo de la actividad.",
    icono: "üìã",
    color: "#f97316",
    configuracion_schema: {
        type: "object",
        properties: {
            objetivo_actividad: {
                type: "string",
                description: "Qu√© debe lograr el estudiante con esta actividad en el mundo real"
            },
            contexto_ia: {
                type: "string",
                description: "Contexto clave para el Asistente IA (Ej: \"El estudiante va a entrevistar a un cliente B2B dif√≠cil\")"
            },
            checklists_preparacion: {
                type: "array",
                description: "Listas de verificaci√≥n (pre, durante, post)",
                items: {
                    type: "object",
                    properties: {
                        titulo: {
                            type: "string",
                            description: "Ej: \"Antes de la Entrevista\""
                        },
                        items: {
                            type: "array",
                            items: { type: "string" }
                        }
                    }
                }
            }
        },
        required: ["objetivo_actividad", "contexto_ia"]
    },
    configuracion_default: {
        checklists_preparacion: []
    },
    prompt_template: "Eres un dise√±ador instruccional experto creando una gu√≠a de instrucciones para una actividad aut√©ntica fuera de la plataforma.\n\nCONTEXTO DEL PROGRAMA:\n{{programa.nombre}}, Fase: {{fase.nombre}}\nProof Point: {{proof_point.pregunta_central}}\n\nDEFINICI√ìN DE LA ACTIVIDAD (Instructor):\n- Objetivo: {{configuracion.objetivo_actividad}}\n- Contexto para IA: {{configuracion.contexto_ia}}\n- Checklists: {{configuracion.checklists_preparacion}}\n\nREQUISITOS DE FORMATO:\n- El output debe ser un JSON que siga el output_schema.\n- Genera un \"resumen_mision\" claro.\n- Detalla los \"pasos_ejecucion\" (inferidos del objetivo).\n- Formatea los \"checklists\" proporcionados.\n- Genera 3 \"preguntas_asistencia_sugeridas\" que el estudiante podr√≠a hacerle a la IA (Ej: \"Ay√∫dame a preparar mis preguntas de apertura\").\n\nOUTPUT ESPERADO (JSON):\n{{output_schema}}\n\nIMPORTANTE: Devuelve √∫nicamente JSON v√°lido.",
    output_schema: {
        titulo: "string",
        resumen_mision: "string (Descripci√≥n clara del objetivo)",
        pasos_ejecucion: [{
            id: "string",
            nombre: "string",
            descripcion: "string"
        }],
        checklists: [{
            titulo: "string",
            items: [{ id: "string", texto: "string", completado: "boolean" }]
        }],
        preguntas_asistencia_sugeridas: ["string"]
    },
    preview_config: {
        autoguardado: false,
        mostrar_progreso_secciones: true
    },
    es_oficial: true,
    activo: true
};

-- 13. METACOGNICION
CREATE exercise_template:metacognicion CONTENT {
    nombre: "Metacognicion",
    categoria: "metacognicion",
    descripcion: "Experiencia estructurada de reflexion guiada sobre el propio proceso de aprendizaje para desarrollar auto-regulacion y conciencia epistemica.",
    objetivo_pedagogico: "Desarrollar la capacidad de monitorear la propia comprension, diagnosticar confusiones, seleccionar estrategias de aprendizaje y evaluar la efectividad de los enfoques.",
    rol_ia: "Facilitador reflexivo no-evaluativo que emplea conversacion socratica estructurada para guiar al estudiante a traves de un proceso de reflexion profunda sobre su experiencia de aprendizaje.",
    icono: "üß†",
    color: "#f43f5e",
    configuracion_schema: {
        type: "object",
        properties: {
            pregunta_anclaje: {
                type: "string",
                description: "Pregunta inicial que ancla la reflexion a un momento especifico."
            },
            contexto_ia: {
                type: "string",
                description: "Contexto clave para que la IA comprenda el objetivo de la sesion."
            },
            dimensiones_explorar: {
                type: "array",
                description: "Dimensiones metacognitivas que la IA debe explorar durante la conversacion.",
                items: { type: "string" },
                default: ["comprension_conceptual", "estados_afectivos", "transferencia"]
            }
        },
        required: ["pregunta_anclaje", "contexto_ia"]
    },
    configuracion_default: {
        dimensiones_explorar: ["comprension_conceptual", "estados_afectivos", "transferencia"]
    },
    prompt_template: "Eres un dise√±ador instruccional experto en aprendizaje auto-regulado. Tu tarea es configurar una sesi√≥n de chat de metacognici√≥n.\n\nCONFIGURACI√ìN DEL INSTRUCTOR:\n- Pregunta de Anclaje: {{configuracion.pregunta_anclaje}}\n- Contexto General: {{configuracion.contexto_ia}}\n- Dimensiones a Explorar: {{configuracion.dimensiones_explorar}}\n\nTU TAREA:\nGenera un JSON que siga el output_schema para inicializar el chat.\n1. Crea un t√≠tulo para la actividad.\n2. Adapta la pregunta_anclaje del instructor para que sea el mensaje_apertura_ia (el primer mensaje que ver√° el estudiante).\n3. Genera el system_prompt_chat. Este es el cerebro de la IA. Debe contener todas las instrucciones detalladas que definen su rol. Usa el siguiente texto como base fundamental para el system_prompt_chat:\n\n--- INICIO DEL SYSTEM PROMPT BASE ---\nEres un facilitador reflexivo no-evaluativo. Tu objetivo es guiar al estudiante en una reflexi√≥n profunda sobre su aprendizaje.\n\nCONTEXTO DE ESTA SESI√ìN: {{configuracion.contexto_ia}}\n\nTU PROTOCOLO CONVERSACIONAL ESTRUCTURADO:\n1. Anclaje: Inicia con la pregunta de anclaje.\n2. Profundizaci√≥n (Follow-ups): Basado en su respuesta, usa preguntas de seguimiento adaptativas para explorar estas dimensiones: {{configuracion.dimensiones_explorar}}.\n   - Comprensi√≥n Conceptual: \"¬øQu√© conceptos te resultan claros ahora vs. cu√°les siguen nebulosos?\"\n   - Estrategias de Aprendizaje: \"Cuando te sentiste bloqueado, ¬øqu√© hiciste?\"\n   - Estados Afectivos: \"¬øHubo momentos de frustraci√≥n? ¬øQu√© los provoc√≥?\"\n   - Transferencia: \"¬øC√≥mo podr√≠as usar esto en otro contexto?\"\n3. Contexto Longitudinal: Conecta sus reflexiones actuales con las pasadas cuando sea posible.\n4. Transferencia Prospectiva: \"Bas√°ndote en esto, ¬øqu√© anticipas que ser√° similar o diferente en el pr√≥ximo desaf√≠o?\"\n5. Tono: Mantente emp√°tico y no-evaluativo. Normaliza la confusi√≥n. No eval√∫es respuestas como \"correctas\" o \"incorrectas\".\n6. S√≠ntesis: Al final, ayuda al estudiante a resumir los insights.\n--- FIN DEL SYSTEM PROMPT BASE ---\n\nOUTPUT ESPERADO (JSON):\n{{output_schema}}\n\nIMPORTANTE: Devuelve √∫nicamente JSON v√°lido.",
    output_schema: {
        titulo: "string",
        mensaje_apertura_ia: "string",
        system_prompt_chat: "string"
    },
    preview_config: {
        interactivo: true,
        mostrar_razonamiento: false,
        tiempo_estimado_minutos: 20
    },
    es_oficial: true,
    activo: true
};
